(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function rw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pg={exports:{}},Zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function zD(){if(Cb)return Zu;Cb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return Zu.Fragment=t,Zu.jsx=e,Zu.jsxs=e,Zu}var Db;function BD(){return Db||(Db=1,Pg.exports=zD()),Pg.exports}var L=BD(),Og={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function jD(){if(Vb)return Rt;Vb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,z={};function Q(O,it,ft){this.props=O,this.context=it,this.refs=z,this.updater=ft||N}Q.prototype.isReactComponent={},Q.prototype.setState=function(O,it){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,it,"setState")},Q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function $(){}$.prototype=Q.prototype;function G(O,it,ft){this.props=O,this.context=it,this.refs=z,this.updater=ft||N}var st=G.prototype=new $;st.constructor=G,k(st,Q.prototype),st.isPureReactComponent=!0;var rt=Array.isArray;function lt(){}var R={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function C(O,it,ft){var dt=ft.ref;return{$$typeof:n,type:O,key:it,ref:dt!==void 0?dt:null,props:ft}}function M(O,it){return C(O.type,it,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function B(O){var it={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ft){return it[ft]})}var x=/\/+/g;function jt(O,it){return typeof O=="object"&&O!==null&&O.key!=null?B(""+O.key):it.toString(36)}function oe(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(lt,lt):(O.status="pending",O.then(function(it){O.status==="pending"&&(O.status="fulfilled",O.value=it)},function(it){O.status==="pending"&&(O.status="rejected",O.reason=it)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function W(O,it,ft,dt,St){var Vt=typeof O;(Vt==="undefined"||Vt==="boolean")&&(O=null);var qt=!1;if(O===null)qt=!0;else switch(Vt){case"bigint":case"string":case"number":qt=!0;break;case"object":switch(O.$$typeof){case n:case t:qt=!0;break;case y:return qt=O._init,W(qt(O._payload),it,ft,dt,St)}}if(qt)return St=St(O),qt=dt===""?"."+jt(O,0):dt,rt(St)?(ft="",qt!=null&&(ft=qt.replace(x,"$&/")+"/"),W(St,it,ft,"",function(Zr){return Zr})):St!=null&&(V(St)&&(St=M(St,ft+(St.key==null||O&&O.key===St.key?"":(""+St.key).replace(x,"$&/")+"/")+qt)),it.push(St)),1;qt=0;var je=dt===""?".":dt+":";if(rt(O))for(var ce=0;ce<O.length;ce++)dt=O[ce],Vt=je+jt(dt,ce),qt+=W(dt,it,ft,Vt,St);else if(ce=w(O),typeof ce=="function")for(O=ce.call(O),ce=0;!(dt=O.next()).done;)dt=dt.value,Vt=je+jt(dt,ce++),qt+=W(dt,it,ft,Vt,St);else if(Vt==="object"){if(typeof O.then=="function")return W(oe(O),it,ft,dt,St);throw it=String(O),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return qt}function at(O,it,ft){if(O==null)return O;var dt=[],St=0;return W(O,dt,"","",function(Vt){return it.call(ft,Vt,St++)}),dt}function mt(O){if(O._status===-1){var it=O._result;it=it(),it.then(function(ft){(O._status===0||O._status===-1)&&(O._status=1,O._result=ft)},function(ft){(O._status===0||O._status===-1)&&(O._status=2,O._result=ft)}),O._status===-1&&(O._status=0,O._result=it)}if(O._status===1)return O._result.default;throw O._result}var Dt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},kt={map:at,forEach:function(O,it,ft){at(O,function(){it.apply(this,arguments)},ft)},count:function(O){var it=0;return at(O,function(){it++}),it},toArray:function(O){return at(O,function(it){return it})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Rt.Activity=v,Rt.Children=kt,Rt.Component=Q,Rt.Fragment=e,Rt.Profiler=a,Rt.PureComponent=G,Rt.StrictMode=s,Rt.Suspense=d,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},Rt.cache=function(O){return function(){return O.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(O,it,ft){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var dt=k({},O.props),St=O.key;if(it!=null)for(Vt in it.key!==void 0&&(St=""+it.key),it)!I.call(it,Vt)||Vt==="key"||Vt==="__self"||Vt==="__source"||Vt==="ref"&&it.ref===void 0||(dt[Vt]=it[Vt]);var Vt=arguments.length-2;if(Vt===1)dt.children=ft;else if(1<Vt){for(var qt=Array(Vt),je=0;je<Vt;je++)qt[je]=arguments[je+2];dt.children=qt}return C(O.type,St,dt)},Rt.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Rt.createElement=function(O,it,ft){var dt,St={},Vt=null;if(it!=null)for(dt in it.key!==void 0&&(Vt=""+it.key),it)I.call(it,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(St[dt]=it[dt]);var qt=arguments.length-2;if(qt===1)St.children=ft;else if(1<qt){for(var je=Array(qt),ce=0;ce<qt;ce++)je[ce]=arguments[ce+2];St.children=je}if(O&&O.defaultProps)for(dt in qt=O.defaultProps,qt)St[dt]===void 0&&(St[dt]=qt[dt]);return C(O,Vt,St)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(O){return{$$typeof:h,render:O}},Rt.isValidElement=V,Rt.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:mt}},Rt.memo=function(O,it){return{$$typeof:p,type:O,compare:it===void 0?null:it}},Rt.startTransition=function(O){var it=R.T,ft={};R.T=ft;try{var dt=O(),St=R.S;St!==null&&St(ft,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(lt,Dt)}catch(Vt){Dt(Vt)}finally{it!==null&&ft.types!==null&&(it.types=ft.types),R.T=it}},Rt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Rt.use=function(O){return R.H.use(O)},Rt.useActionState=function(O,it,ft){return R.H.useActionState(O,it,ft)},Rt.useCallback=function(O,it){return R.H.useCallback(O,it)},Rt.useContext=function(O){return R.H.useContext(O)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(O,it){return R.H.useDeferredValue(O,it)},Rt.useEffect=function(O,it){return R.H.useEffect(O,it)},Rt.useEffectEvent=function(O){return R.H.useEffectEvent(O)},Rt.useId=function(){return R.H.useId()},Rt.useImperativeHandle=function(O,it,ft){return R.H.useImperativeHandle(O,it,ft)},Rt.useInsertionEffect=function(O,it){return R.H.useInsertionEffect(O,it)},Rt.useLayoutEffect=function(O,it){return R.H.useLayoutEffect(O,it)},Rt.useMemo=function(O,it){return R.H.useMemo(O,it)},Rt.useOptimistic=function(O,it){return R.H.useOptimistic(O,it)},Rt.useReducer=function(O,it,ft){return R.H.useReducer(O,it,ft)},Rt.useRef=function(O){return R.H.useRef(O)},Rt.useState=function(O){return R.H.useState(O)},Rt.useSyncExternalStore=function(O,it,ft){return R.H.useSyncExternalStore(O,it,ft)},Rt.useTransition=function(){return R.H.useTransition()},Rt.version="19.2.3",Rt}var Nb;function S_(){return Nb||(Nb=1,Og.exports=jD()),Og.exports}var Z=S_();const FD=rw(Z);var kg={exports:{}},Ju={},Lg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function qD(){return Mb||(Mb=1,(function(n){function t(W,at){var mt=W.length;W.push(at);t:for(;0<mt;){var Dt=mt-1>>>1,kt=W[Dt];if(0<a(kt,at))W[Dt]=at,W[mt]=kt,mt=Dt;else break t}}function e(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var at=W[0],mt=W.pop();if(mt!==at){W[0]=mt;t:for(var Dt=0,kt=W.length,O=kt>>>1;Dt<O;){var it=2*(Dt+1)-1,ft=W[it],dt=it+1,St=W[dt];if(0>a(ft,mt))dt<kt&&0>a(St,ft)?(W[Dt]=St,W[dt]=mt,Dt=dt):(W[Dt]=ft,W[it]=mt,Dt=it);else if(dt<kt&&0>a(St,mt))W[Dt]=St,W[dt]=mt,Dt=dt;else break t}}return at}function a(W,at){var mt=W.sortIndex-at.sortIndex;return mt!==0?mt:W.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],p=[],y=1,v=null,b=3,w=!1,N=!1,k=!1,z=!1,Q=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function st(W){for(var at=e(p);at!==null;){if(at.callback===null)s(p);else if(at.startTime<=W)s(p),at.sortIndex=at.expirationTime,t(d,at);else break;at=e(p)}}function rt(W){if(k=!1,st(W),!N)if(e(d)!==null)N=!0,lt||(lt=!0,B());else{var at=e(p);at!==null&&oe(rt,at.startTime-W)}}var lt=!1,R=-1,I=5,C=-1;function M(){return z?!0:!(n.unstable_now()-C<I)}function V(){if(z=!1,lt){var W=n.unstable_now();C=W;var at=!0;try{t:{N=!1,k&&(k=!1,$(R),R=-1),w=!0;var mt=b;try{e:{for(st(W),v=e(d);v!==null&&!(v.expirationTime>W&&M());){var Dt=v.callback;if(typeof Dt=="function"){v.callback=null,b=v.priorityLevel;var kt=Dt(v.expirationTime<=W);if(W=n.unstable_now(),typeof kt=="function"){v.callback=kt,st(W),at=!0;break e}v===e(d)&&s(d),st(W)}else s(d);v=e(d)}if(v!==null)at=!0;else{var O=e(p);O!==null&&oe(rt,O.startTime-W),at=!1}}break t}finally{v=null,b=mt,w=!1}at=void 0}}finally{at?B():lt=!1}}}var B;if(typeof G=="function")B=function(){G(V)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,jt=x.port2;x.port1.onmessage=V,B=function(){jt.postMessage(null)}}else B=function(){Q(V,0)};function oe(W,at){R=Q(function(){W(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(W){switch(b){case 1:case 2:case 3:var at=3;break;default:at=b}var mt=b;b=at;try{return W()}finally{b=mt}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(W,at){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var mt=b;b=W;try{return at()}finally{b=mt}},n.unstable_scheduleCallback=function(W,at,mt){var Dt=n.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?Dt+mt:Dt):mt=Dt,W){case 1:var kt=-1;break;case 2:kt=250;break;case 5:kt=1073741823;break;case 4:kt=1e4;break;default:kt=5e3}return kt=mt+kt,W={id:y++,callback:at,priorityLevel:W,startTime:mt,expirationTime:kt,sortIndex:-1},mt>Dt?(W.sortIndex=mt,t(p,W),e(d)===null&&W===e(p)&&(k?($(R),R=-1):k=!0,oe(rt,mt-Dt))):(W.sortIndex=kt,t(d,W),N||w||(N=!0,lt||(lt=!0,B()))),W},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(W){var at=b;return function(){var mt=b;b=at;try{return W.apply(this,arguments)}finally{b=mt}}}})(Ug)),Ug}var Pb;function HD(){return Pb||(Pb=1,Lg.exports=qD()),Lg.exports}var zg={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function GD(){if(Ob)return ln;Ob=1;var n=S_();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ln.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(d,p,null,y)},ln.flushSync=function(d){var p=u.T,y=s.p;try{if(u.T=null,s.p=2,d)return d()}finally{u.T=p,s.p=y,s.d.f()}},ln.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},ln.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},ln.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:w}):y==="script"&&s.d.X(d,{crossOrigin:v,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ln.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},ln.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);s.d.L(d,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ln.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=h(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},ln.requestFormReset=function(d){s.d.r(d)},ln.unstable_batchedUpdates=function(d,p){return d(p)},ln.useFormState=function(d,p,y){return u.H.useFormState(d,p,y)},ln.useFormStatus=function(){return u.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var kb;function KD(){if(kb)return zg.exports;kb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),zg.exports=GD(),zg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function QD(){if(Lb)return Ju;Lb=1;var n=HD(),t=S_(),e=KD();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,c=r;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return d(m),i;if(g===c)return d(m),r;g=g.sibling}throw Error(s(188))}if(o.return!==c.return)o=m,c=g;else{for(var T=!1,A=m.child;A;){if(A===o){T=!0,o=m,c=g;break}if(A===c){T=!0,c=m,o=g;break}A=A.sibling}if(!T){for(A=g.child;A;){if(A===o){T=!0,o=g,c=m;break}if(A===c){T=!0,c=g,o=m;break}A=A.sibling}if(!T)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),G=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),rt=Symbol.for("react.suspense"),lt=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var x=Symbol.for("react.client.reference");function jt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===x?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case Q:return"Profiler";case z:return"StrictMode";case rt:return"Suspense";case lt:return"SuspenseList";case C:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case G:return i.displayName||"Context";case $:return(i._context.displayName||"Context")+".Consumer";case st:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return r=i.displayName||null,r!==null?r:jt(i.type)||"Memo";case I:r=i._payload,i=i._init;try{return jt(i(r))}catch{}}return null}var oe=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},Dt=[],kt=-1;function O(i){return{current:i}}function it(i){0>kt||(i.current=Dt[kt],Dt[kt]=null,kt--)}function ft(i,r){kt++,Dt[kt]=i.current,i.current=r}var dt=O(null),St=O(null),Vt=O(null),qt=O(null);function je(i,r){switch(ft(Vt,r),ft(St,i),ft(dt,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?ZE(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=ZE(r),i=JE(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}it(dt),ft(dt,i)}function ce(){it(dt),it(St),it(Vt)}function Zr(i){i.memoizedState!==null&&ft(qt,i);var r=dt.current,o=JE(r,i.type);r!==o&&(ft(St,i),ft(dt,o))}function uo(i){St.current===i&&(it(dt),it(St)),qt.current===i&&(it(qt),Yu._currentValue=mt)}var co,ho;function Ii(i){if(co===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);co=r&&r[1]||"",ho=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+co+i+ho}var Yl=!1;function Jr(i,r){if(!i||Yl)return"";Yl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(X){var K=X}Reflect.construct(i,[],nt)}else{try{nt.call()}catch(X){K=X}i.call(nt.prototype)}}else{try{throw Error()}catch(X){K=X}(nt=i())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],A=g[1];if(T&&A){var D=T.split(`
`),H=A.split(`
`);for(m=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;if(c===D.length||m===H.length)for(c=D.length-1,m=H.length-1;1<=c&&0<=m&&D[c]!==H[m];)m--;for(;1<=c&&0<=m;c--,m--)if(D[c]!==H[m]){if(c!==1||m!==1)do if(c--,m--,0>m||D[c]!==H[m]){var J=`
`+D[c].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=c&&0<=m);break}}}finally{Yl=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ii(o):""}function Xl(i,r){switch(i.tag){case 26:case 27:case 5:return Ii(i.type);case 16:return Ii("Lazy");case 13:return i.child!==r&&r!==null?Ii("Suspense Fallback"):Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return Jr(i.type,!1);case 11:return Jr(i.type.render,!1);case 1:return Jr(i.type,!0);case 31:return Ii("Activity");default:return""}}function $l(i){try{var r="",o=null;do r+=Xl(i,o),o=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Re=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,js=n.unstable_cancelCallback,km=n.unstable_shouldYield,mh=n.unstable_requestPaint,pn=n.unstable_now,ta=n.unstable_getCurrentPriorityLevel,Wl=n.unstable_ImmediatePriority,Zl=n.unstable_UserBlockingPriority,Fs=n.unstable_NormalPriority,Lm=n.unstable_LowPriority,ph=n.unstable_IdlePriority,gh=n.log,yh=n.unstable_setDisableYieldValue,ui=null,We=null;function Hn(i){if(typeof gh=="function"&&yh(i),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(ui,i)}catch{}}var Ae=Math.clz32?Math.clz32:vh,_h=Math.log,fo=Math.LN2;function vh(i){return i>>>=0,i===0?32:31-(_h(i)/fo|0)|0}var Ri=256,ea=262144,xe=4194304;function xi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ci(i,r,o){var c=i.pendingLanes;if(c===0)return 0;var m=0,g=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var A=c&134217727;return A!==0?(c=A&~g,c!==0?m=xi(c):(T&=A,T!==0?m=xi(T):o||(o=A&~i,o!==0&&(m=xi(o))))):(A=c&~g,A!==0?m=xi(A):T!==0?m=xi(T):o||(o=c&~i,o!==0&&(m=xi(o)))),m===0?0:r!==0&&r!==m&&(r&g)===0&&(g=m&-m,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:m}function ci(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Um(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Th(){var i=xe;return xe<<=1,(xe&62914560)===0&&(xe=4194304),i}function Di(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function na(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zm(i,r,o,c,m,g){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var A=i.entanglements,D=i.expirationTimes,H=i.hiddenUpdates;for(o=T&~o;0<o;){var J=31-Ae(o),nt=1<<J;A[J]=0,D[J]=-1;var K=H[J];if(K!==null)for(H[J]=null,J=0;J<K.length;J++){var X=K[J];X!==null&&(X.lane&=-536870913)}o&=~nt}c!==0&&ia(i,c,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~r))}function ia(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-Ae(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|o&261930}function Jl(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var c=31-Ae(o),m=1<<c;m&r|i[c]&r&&(i[c]|=r),o&=~m}}function tu(i,r){var o=r&-r;return o=(o&42)!==0?1:sa(o),(o&(i.suspendedLanes|r))!==0?0:o}function sa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function as(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Eh(){var i=at.p;return i!==0?i:(i=window.event,i===void 0?32:bb(i.type))}function hi(i,r){var o=at.p;try{return at.p=i,r()}finally{at.p=o}}var fi=Math.random().toString(36).slice(2),Ce="__reactFiber$"+fi,Qe="__reactProps$"+fi,Vi="__reactContainer$"+fi,mo="__reactEvents$"+fi,Bm="__reactListeners$"+fi,bh="__reactHandles$"+fi,Ah="__reactResources$"+fi,Ni="__reactMarker$"+fi;function po(i){delete i[Ce],delete i[Qe],delete i[mo],delete i[Bm],delete i[bh]}function Mi(i){var r=i[Ce];if(r)return r;for(var o=i.parentNode;o;){if(r=o[Vi]||o[Ce]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=ab(i);i!==null;){if(o=i[Ce])return o;i=ab(i)}return r}i=o,o=i.parentNode}return null}function Gn(i){if(i=i[Ce]||i[Vi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Nn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Pi(i){var r=i[Ah];return r||(r=i[Ah]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function De(i){i[Ni]=!0}var eu=new Set,nu={};function Oi(i,r){ki(i,r),ki(i+"Capture",r)}function ki(i,r){for(nu[i]=r,i=0;i<r.length;i++)eu.add(r[i])}var iu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),su={},ru={};function Sh(i){return Re.call(ru,i)?!0:Re.call(su,i)?!1:iu.test(i)?ru[i]=!0:(su[i]=!0,!1)}function go(i,r,o){if(Sh(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function Mn(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function Ve(i,r,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+c)}}function Ye(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function qs(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function au(i,r,o){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,g.call(this,T)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function $t(i){if(!i._valueTracker){var r=qs(i)?"checked":"value";i._valueTracker=au(i,r,""+i[r])}}function ra(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return i&&(c=qs(i)?i.checked?"true":"false":i.value),i=c,i!==o?(r.setValue(i),!0):!1}function Li(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aa=/[\n"\\]/g;function An(i){return i.replace(aa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function yo(i,r,o,c,m,g,T,A){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),r!=null?T==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Ye(r)):i.value!==""+Ye(r)&&(i.value=""+Ye(r)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),r!=null?ou(i,T,Ye(r)):o!=null?ou(i,T,Ye(o)):c!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+Ye(A):i.removeAttribute("name")}function wh(i,r,o,c,m,g,T,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){$t(i);return}o=o!=null?""+Ye(o):"",r=r!=null?""+Ye(r):o,A||r===i.value||(i.value=r),i.defaultValue=r}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=A?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),$t(i)}function ou(i,r,o){r==="number"&&Li(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Hs(i,r,o,c){if(i=i.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<i.length;o++)m=r.hasOwnProperty("$"+i[o].value),i[o].selected!==m&&(i[o].selected=m),m&&c&&(i[o].defaultSelected=!0)}else{for(o=""+Ye(o),r=null,m=0;m<i.length;m++){if(i[m].value===o){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}r!==null||i[m].disabled||(r=i[m])}r!==null&&(r.selected=!0)}}function Ih(i,r,o){if(r!=null&&(r=""+Ye(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+Ye(o):""}function Gs(i,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(s(92));if(oe(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Ye(r),i.defaultValue=o,c=i.textContent,c===o&&c!==""&&c!==null&&(i.value=c),$t(i)}function Sn(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var Rh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lu(i,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,o):typeof o!="number"||o===0||Rh.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function uu(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in r)c=r[m],r.hasOwnProperty(m)&&o[m]!==c&&lu(i,m,c)}else for(var g in r)r.hasOwnProperty(g)&&lu(i,g,r[g])}function _o(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(i){return Ks.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function di(){}var cu=null;function Kn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qs=null,Ui=null;function oa(i){var r=Gn(i);if(r&&(i=r.stateNode)){var o=i[Qe]||null;t:switch(i=r.stateNode,r.type){case"input":if(yo(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+An(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==i&&c.form===i.form){var m=c[Qe]||null;if(!m)throw Error(s(90));yo(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===i.form&&ra(c)}break t;case"textarea":Ih(i,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&Hs(i,!!o.multiple,r,!1)}}}var To=!1;function Ys(i,r,o){if(To)return i(r,o);To=!0;try{var c=i(r);return c}finally{if(To=!1,(Qs!==null||Ui!==null)&&(bf(),Qs&&(r=Qs,i=Ui,Ui=Qs=null,oa(r),i)))for(r=0;r<i.length;r++)oa(i[r])}}function mi(i,r){var o=i.stateNode;if(o===null)return null;var c=o[Qe]||null;if(c===null)return null;o=c[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),la=!1;if(Qn)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){la=!0}}),window.addEventListener("test",ne,ne),window.removeEventListener("test",ne,ne)}catch{la=!1}var zi=null,hu=null,ua=null;function fu(){if(ua)return ua;var i,r=hu,o=r.length,c,m="value"in zi?zi.value:zi.textContent,g=m.length;for(i=0;i<o&&r[i]===m[i];i++);var T=o-i;for(c=1;c<=T&&r[o-c]===m[g-c];c++);return ua=m.slice(i,1<c?1-c:void 0)}function ca(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function os(){return!0}function pi(){return!1}function Ze(i){function r(o,c,m,g,T){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(o=i[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?os:pi,this.isPropagationStopped=pi,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),r}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=Ze(ls),Xs=v({},ls,{view:0,detail:0}),du=Ze(Xs),$s,Eo,ji,bo=v({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ji&&(ji&&i.type==="mousemove"?($s=i.screenX-ji.screenX,Eo=i.screenY-ji.screenY):Eo=$s=0,ji=i),$s)},movementY:function(i){return"movementY"in i?i.movementY:Eo}}),mu=Ze(bo),ha=v({},bo,{dataTransfer:0}),Ch=Ze(ha),Dh=v({},Xs,{relatedTarget:0}),fa=Ze(Dh),pu=v({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Vh=Ze(pu),Ao=v({},ls,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Nh=Ze(Ao),Mh=v({},ls,{data:0}),Fi=Ze(Mh),Ph={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lh(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=kh[i])?!!r[i]:!1}function Ws(){return Lh}var gn=v({},Xs,{key:function(i){if(i.key){var r=Ph[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=ca(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Oh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(i){return i.type==="keypress"?ca(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ca(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Uh=Ze(gn),zh=v({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),us=Ze(zh),f=v({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),_=Ze(f),E=v({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Ze(E),F=v({},bo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Ze(F),ut=v({},ls,{newState:0,oldState:0}),xt=Ze(ut),Se=[9,13,27,32],Qt=Qn&&"CompositionEvent"in window,he=null;Qn&&"documentMode"in document&&(he=document.documentMode);var Yn=Qn&&"TextEvent"in window&&!he,qi=Qn&&(!Qt||he&&8<he&&11>=he),gi=" ",yi=!1;function da(i,r){switch(i){case"keyup":return Se.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function So(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var wo=!1;function u2(i,r){switch(i){case"compositionend":return So(r);case"keypress":return r.which!==32?null:(yi=!0,gi);case"textInput":return i=r.data,i===gi&&yi?null:i;default:return null}}function c2(i,r){if(wo)return i==="compositionend"||!Qt&&da(i,r)?(i=fu(),ua=hu=zi=null,wo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return qi&&r.locale!=="ko"?null:r.data;default:return null}}var h2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!h2[i.type]:r==="textarea"}function c0(i,r,o,c){Qs?Ui?Ui.push(c):Ui=[c]:Qs=c,r=Cf(r,"onChange"),0<r.length&&(o=new Bi("onChange","change",null,o,c),i.push({event:o,listeners:r}))}var gu=null,yu=null;function f2(i){KE(i,0)}function Bh(i){var r=Nn(i);if(ra(r))return i}function h0(i,r){if(i==="change")return r}var f0=!1;if(Qn){var jm;if(Qn){var Fm="oninput"in document;if(!Fm){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),Fm=typeof d0.oninput=="function"}jm=Fm}else jm=!1;f0=jm&&(!document.documentMode||9<document.documentMode)}function m0(){gu&&(gu.detachEvent("onpropertychange",p0),yu=gu=null)}function p0(i){if(i.propertyName==="value"&&Bh(yu)){var r=[];c0(r,yu,i,Kn(i)),Ys(f2,r)}}function d2(i,r,o){i==="focusin"?(m0(),gu=r,yu=o,gu.attachEvent("onpropertychange",p0)):i==="focusout"&&m0()}function m2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bh(yu)}function p2(i,r){if(i==="click")return Bh(r)}function g2(i,r){if(i==="input"||i==="change")return Bh(r)}function y2(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Pn=typeof Object.is=="function"?Object.is:y2;function _u(i,r){if(Pn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!Re.call(r,m)||!Pn(i[m],r[m]))return!1}return!0}function g0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function y0(i,r){var o=g0(i);i=0;for(var c;o;){if(o.nodeType===3){if(c=i+o.textContent.length,i<=r&&c>=r)return{node:o,offset:r-i};i=c}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=g0(o)}}function _0(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?_0(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function v0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Li(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=Li(i.document)}return r}function qm(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var _2=Qn&&"documentMode"in document&&11>=document.documentMode,Io=null,Hm=null,vu=null,Gm=!1;function T0(i,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Gm||Io==null||Io!==Li(c)||(c=Io,"selectionStart"in c&&qm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),vu&&_u(vu,c)||(vu=c,c=Cf(Hm,"onSelect"),0<c.length&&(r=new Bi("onSelect","select",null,r,o),i.push({event:r,listeners:c}),r.target=Io)))}function ma(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var Ro={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},Km={},E0={};Qn&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function pa(i){if(Km[i])return Km[i];if(!Ro[i])return i;var r=Ro[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in E0)return Km[i]=r[o];return i}var b0=pa("animationend"),A0=pa("animationiteration"),S0=pa("animationstart"),v2=pa("transitionrun"),T2=pa("transitionstart"),E2=pa("transitioncancel"),w0=pa("transitionend"),I0=new Map,Qm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qm.push("scrollEnd");function _i(i,r){I0.set(i,r),Oi(r,[i])}var jh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Xn=[],xo=0,Ym=0;function Fh(){for(var i=xo,r=Ym=xo=0;r<i;){var o=Xn[r];Xn[r++]=null;var c=Xn[r];Xn[r++]=null;var m=Xn[r];Xn[r++]=null;var g=Xn[r];if(Xn[r++]=null,c!==null&&m!==null){var T=c.pending;T===null?m.next=m:(m.next=T.next,T.next=m),c.pending=m}g!==0&&R0(o,m,g)}}function qh(i,r,o,c){Xn[xo++]=i,Xn[xo++]=r,Xn[xo++]=o,Xn[xo++]=c,Ym|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Xm(i,r,o,c){return qh(i,r,o,c),Hh(i)}function ga(i,r){return qh(i,null,null,r),Hh(i)}function R0(i,r,o){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o);for(var m=!1,g=i.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,m&&r!==null&&(m=31-Ae(o),i=g.hiddenUpdates,c=i[m],c===null?i[m]=[r]:c.push(r),r.lane=o|536870912),g):null}function Hh(i){if(50<ju)throw ju=0,sg=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Co={};function b2(i,r,o,c){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(i,r,o,c){return new b2(i,r,o,c)}function $m(i){return i=i.prototype,!(!i||!i.isReactComponent)}function cs(i,r){var o=i.alternate;return o===null?(o=On(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function x0(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Gh(i,r,o,c,m,g){var T=0;if(c=i,typeof i=="function")$m(i)&&(T=1);else if(typeof i=="string")T=RD(i,o,dt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case C:return i=On(31,o,r,m),i.elementType=C,i.lanes=g,i;case k:return ya(o.children,m,g,r);case z:T=8,m|=24;break;case Q:return i=On(12,o,r,m|2),i.elementType=Q,i.lanes=g,i;case rt:return i=On(13,o,r,m),i.elementType=rt,i.lanes=g,i;case lt:return i=On(19,o,r,m),i.elementType=lt,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:T=10;break t;case $:T=9;break t;case st:T=11;break t;case R:T=14;break t;case I:T=16,c=null;break t}T=29,o=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=On(T,o,r,m),r.elementType=i,r.type=c,r.lanes=g,r}function ya(i,r,o,c){return i=On(7,i,c,r),i.lanes=o,i}function Wm(i,r,o){return i=On(6,i,null,r),i.lanes=o,i}function C0(i){var r=On(18,null,null,0);return r.stateNode=i,r}function Zm(i,r,o){return r=On(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var D0=new WeakMap;function $n(i,r){if(typeof i=="object"&&i!==null){var o=D0.get(i);return o!==void 0?o:(r={value:i,source:r,stack:$l(r)},D0.set(i,r),r)}return{value:i,source:r,stack:$l(r)}}var Do=[],Vo=0,Kh=null,Tu=0,Wn=[],Zn=0,Zs=null,Hi=1,Gi="";function hs(i,r){Do[Vo++]=Tu,Do[Vo++]=Kh,Kh=i,Tu=r}function V0(i,r,o){Wn[Zn++]=Hi,Wn[Zn++]=Gi,Wn[Zn++]=Zs,Zs=i;var c=Hi;i=Gi;var m=32-Ae(c)-1;c&=~(1<<m),o+=1;var g=32-Ae(r)+m;if(30<g){var T=m-m%5;g=(c&(1<<T)-1).toString(32),c>>=T,m-=T,Hi=1<<32-Ae(r)+m|o<<m|c,Gi=g+i}else Hi=1<<g|o<<m|c,Gi=i}function Jm(i){i.return!==null&&(hs(i,1),V0(i,1,0))}function tp(i){for(;i===Kh;)Kh=Do[--Vo],Do[Vo]=null,Tu=Do[--Vo],Do[Vo]=null;for(;i===Zs;)Zs=Wn[--Zn],Wn[Zn]=null,Gi=Wn[--Zn],Wn[Zn]=null,Hi=Wn[--Zn],Wn[Zn]=null}function N0(i,r){Wn[Zn++]=Hi,Wn[Zn++]=Gi,Wn[Zn++]=Zs,Hi=r.id,Gi=r.overflow,Zs=i}var Je=null,le=null,Ft=!1,Js=null,Jn=!1,ep=Error(s(519));function tr(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eu($n(r,i)),ep}function M0(i){var r=i.stateNode,o=i.type,c=i.memoizedProps;switch(r[Ce]=i,r[Qe]=c,o){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(o=0;o<qu.length;o++)Ot(qu[o],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":Ot("invalid",r),wh(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ot("invalid",r);break;case"textarea":Ot("invalid",r),Gs(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||$E(r.textContent,o)?(c.popover!=null&&(Ot("beforetoggle",r),Ot("toggle",r)),c.onScroll!=null&&Ot("scroll",r),c.onScrollEnd!=null&&Ot("scrollend",r),c.onClick!=null&&(r.onclick=di),r=!0):r=!1,r||tr(i,!0)}function P0(i){for(Je=i.return;Je;)switch(Je.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:Je=Je.return}}function No(i){if(i!==Je)return!1;if(!Ft)return P0(i),Ft=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||vg(i.type,i.memoizedProps)),o=!o),o&&le&&tr(i),P0(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));le=rb(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));le=rb(i)}else r===27?(r=le,mr(i.type)?(i=Sg,Sg=null,le=i):le=r):le=Je?ei(i.stateNode.nextSibling):null;return!0}function _a(){le=Je=null,Ft=!1}function np(){var i=Js;return i!==null&&(xn===null?xn=i:xn.push.apply(xn,i),Js=null),i}function Eu(i){Js===null?Js=[i]:Js.push(i)}var ip=O(null),va=null,fs=null;function er(i,r,o){ft(ip,r._currentValue),r._currentValue=o}function ds(i){i._currentValue=ip.current,it(ip)}function sp(i,r,o){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===o)break;i=i.return}}function rp(i,r,o,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;t:for(;g!==null;){var A=g;g=m;for(var D=0;D<r.length;D++)if(A.context===r[D]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),sp(g.return,o,i),c||(T=null);break t}g=A.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),sp(T,o,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Mo(i,r,o,c){i=null;for(var m=r,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var A=m.type;Pn(m.pendingProps.value,T.value)||(i!==null?i.push(A):i=[A])}}else if(m===qt.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Yu):i=[Yu])}m=m.return}i!==null&&rp(r,i,o,c),r.flags|=262144}function Qh(i){for(i=i.firstContext;i!==null;){if(!Pn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ta(i){va=i,fs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function tn(i){return O0(va,i)}function Yh(i,r){return va===null&&Ta(i),O0(i,r)}function O0(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},fs===null){if(i===null)throw Error(s(308));fs=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else fs=fs.next=r;return o}var A2=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},S2=n.unstable_scheduleCallback,w2=n.unstable_NormalPriority,Ne={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ap(){return{controller:new A2,data:new Map,refCount:0}}function bu(i){i.refCount--,i.refCount===0&&S2(w2,function(){i.controller.abort()})}var Au=null,op=0,Po=0,Oo=null;function I2(i,r){if(Au===null){var o=Au=[];op=0,Po=cg(),Oo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return op++,r.then(k0,k0),r}function k0(){if(--op===0&&Au!==null){Oo!==null&&(Oo.status="fulfilled");var i=Au;Au=null,Po=0,Oo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function R2(i,r){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var m=0;m<o.length;m++)(0,o[m])(r)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var L0=W.S;W.S=function(i,r){TE=pn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&I2(i,r),L0!==null&&L0(i,r)};var Ea=O(null);function lp(){var i=Ea.current;return i!==null?i:ae.pooledCache}function Xh(i,r){r===null?ft(Ea,Ea.current):ft(Ea,r.pool)}function U0(){var i=lp();return i===null?null:{parent:Ne._currentValue,pool:i}}var ko=Error(s(460)),up=Error(s(474)),$h=Error(s(542)),Wh={then:function(){}};function z0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function B0(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(di,di),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,F0(i),i;default:if(typeof r.status=="string")r.then(di,di);else{if(i=ae,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=c}},function(c){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,F0(i),i}throw Aa=r,ko}}function ba(i){try{var r=i._init;return r(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Aa=o,ko):o}}var Aa=null;function j0(){if(Aa===null)throw Error(s(459));var i=Aa;return Aa=null,i}function F0(i){if(i===ko||i===$h)throw Error(s(483))}var Lo=null,Su=0;function Zh(i){var r=Su;return Su+=1,Lo===null&&(Lo=[]),B0(Lo,i,r)}function wu(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Jh(i,r){throw r.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function q0(i){function r(U,P){if(i){var q=U.deletions;q===null?(U.deletions=[P],U.flags|=16):q.push(P)}}function o(U,P){if(!i)return null;for(;P!==null;)r(U,P),P=P.sibling;return null}function c(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function m(U,P){return U=cs(U,P),U.index=0,U.sibling=null,U}function g(U,P,q){return U.index=q,i?(q=U.alternate,q!==null?(q=q.index,q<P?(U.flags|=67108866,P):q):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function T(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function A(U,P,q,et){return P===null||P.tag!==6?(P=Wm(q,U.mode,et),P.return=U,P):(P=m(P,q),P.return=U,P)}function D(U,P,q,et){var vt=q.type;return vt===k?J(U,P,q.props.children,et,q.key):P!==null&&(P.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===I&&ba(vt)===P.type)?(P=m(P,q.props),wu(P,q),P.return=U,P):(P=Gh(q.type,q.key,q.props,null,U.mode,et),wu(P,q),P.return=U,P)}function H(U,P,q,et){return P===null||P.tag!==4||P.stateNode.containerInfo!==q.containerInfo||P.stateNode.implementation!==q.implementation?(P=Zm(q,U.mode,et),P.return=U,P):(P=m(P,q.children||[]),P.return=U,P)}function J(U,P,q,et,vt){return P===null||P.tag!==7?(P=ya(q,U.mode,et,vt),P.return=U,P):(P=m(P,q),P.return=U,P)}function nt(U,P,q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Wm(""+P,U.mode,q),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return q=Gh(P.type,P.key,P.props,null,U.mode,q),wu(q,P),q.return=U,q;case N:return P=Zm(P,U.mode,q),P.return=U,P;case I:return P=ba(P),nt(U,P,q)}if(oe(P)||B(P))return P=ya(P,U.mode,q,null),P.return=U,P;if(typeof P.then=="function")return nt(U,Zh(P),q);if(P.$$typeof===G)return nt(U,Yh(U,P),q);Jh(U,P)}return null}function K(U,P,q,et){var vt=P!==null?P.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return vt!==null?null:A(U,P,""+q,et);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return q.key===vt?D(U,P,q,et):null;case N:return q.key===vt?H(U,P,q,et):null;case I:return q=ba(q),K(U,P,q,et)}if(oe(q)||B(q))return vt!==null?null:J(U,P,q,et,null);if(typeof q.then=="function")return K(U,P,Zh(q),et);if(q.$$typeof===G)return K(U,P,Yh(U,q),et);Jh(U,q)}return null}function X(U,P,q,et,vt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return U=U.get(q)||null,A(P,U,""+et,vt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case w:return U=U.get(et.key===null?q:et.key)||null,D(P,U,et,vt);case N:return U=U.get(et.key===null?q:et.key)||null,H(P,U,et,vt);case I:return et=ba(et),X(U,P,q,et,vt)}if(oe(et)||B(et))return U=U.get(q)||null,J(P,U,et,vt,null);if(typeof et.then=="function")return X(U,P,q,Zh(et),vt);if(et.$$typeof===G)return X(U,P,q,Yh(P,et),vt);Jh(P,et)}return null}function pt(U,P,q,et){for(var vt=null,Gt=null,yt=P,Nt=P=0,Ut=null;yt!==null&&Nt<q.length;Nt++){yt.index>Nt?(Ut=yt,yt=null):Ut=yt.sibling;var Kt=K(U,yt,q[Nt],et);if(Kt===null){yt===null&&(yt=Ut);break}i&&yt&&Kt.alternate===null&&r(U,yt),P=g(Kt,P,Nt),Gt===null?vt=Kt:Gt.sibling=Kt,Gt=Kt,yt=Ut}if(Nt===q.length)return o(U,yt),Ft&&hs(U,Nt),vt;if(yt===null){for(;Nt<q.length;Nt++)yt=nt(U,q[Nt],et),yt!==null&&(P=g(yt,P,Nt),Gt===null?vt=yt:Gt.sibling=yt,Gt=yt);return Ft&&hs(U,Nt),vt}for(yt=c(yt);Nt<q.length;Nt++)Ut=X(yt,U,Nt,q[Nt],et),Ut!==null&&(i&&Ut.alternate!==null&&yt.delete(Ut.key===null?Nt:Ut.key),P=g(Ut,P,Nt),Gt===null?vt=Ut:Gt.sibling=Ut,Gt=Ut);return i&&yt.forEach(function(vr){return r(U,vr)}),Ft&&hs(U,Nt),vt}function Et(U,P,q,et){if(q==null)throw Error(s(151));for(var vt=null,Gt=null,yt=P,Nt=P=0,Ut=null,Kt=q.next();yt!==null&&!Kt.done;Nt++,Kt=q.next()){yt.index>Nt?(Ut=yt,yt=null):Ut=yt.sibling;var vr=K(U,yt,Kt.value,et);if(vr===null){yt===null&&(yt=Ut);break}i&&yt&&vr.alternate===null&&r(U,yt),P=g(vr,P,Nt),Gt===null?vt=vr:Gt.sibling=vr,Gt=vr,yt=Ut}if(Kt.done)return o(U,yt),Ft&&hs(U,Nt),vt;if(yt===null){for(;!Kt.done;Nt++,Kt=q.next())Kt=nt(U,Kt.value,et),Kt!==null&&(P=g(Kt,P,Nt),Gt===null?vt=Kt:Gt.sibling=Kt,Gt=Kt);return Ft&&hs(U,Nt),vt}for(yt=c(yt);!Kt.done;Nt++,Kt=q.next())Kt=X(yt,U,Nt,Kt.value,et),Kt!==null&&(i&&Kt.alternate!==null&&yt.delete(Kt.key===null?Nt:Kt.key),P=g(Kt,P,Nt),Gt===null?vt=Kt:Gt.sibling=Kt,Gt=Kt);return i&&yt.forEach(function(UD){return r(U,UD)}),Ft&&hs(U,Nt),vt}function re(U,P,q,et){if(typeof q=="object"&&q!==null&&q.type===k&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case w:t:{for(var vt=q.key;P!==null;){if(P.key===vt){if(vt=q.type,vt===k){if(P.tag===7){o(U,P.sibling),et=m(P,q.props.children),et.return=U,U=et;break t}}else if(P.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===I&&ba(vt)===P.type){o(U,P.sibling),et=m(P,q.props),wu(et,q),et.return=U,U=et;break t}o(U,P);break}else r(U,P);P=P.sibling}q.type===k?(et=ya(q.props.children,U.mode,et,q.key),et.return=U,U=et):(et=Gh(q.type,q.key,q.props,null,U.mode,et),wu(et,q),et.return=U,U=et)}return T(U);case N:t:{for(vt=q.key;P!==null;){if(P.key===vt)if(P.tag===4&&P.stateNode.containerInfo===q.containerInfo&&P.stateNode.implementation===q.implementation){o(U,P.sibling),et=m(P,q.children||[]),et.return=U,U=et;break t}else{o(U,P);break}else r(U,P);P=P.sibling}et=Zm(q,U.mode,et),et.return=U,U=et}return T(U);case I:return q=ba(q),re(U,P,q,et)}if(oe(q))return pt(U,P,q,et);if(B(q)){if(vt=B(q),typeof vt!="function")throw Error(s(150));return q=vt.call(q),Et(U,P,q,et)}if(typeof q.then=="function")return re(U,P,Zh(q),et);if(q.$$typeof===G)return re(U,P,Yh(U,q),et);Jh(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,P!==null&&P.tag===6?(o(U,P.sibling),et=m(P,q),et.return=U,U=et):(o(U,P),et=Wm(q,U.mode,et),et.return=U,U=et),T(U)):o(U,P)}return function(U,P,q,et){try{Su=0;var vt=re(U,P,q,et);return Lo=null,vt}catch(yt){if(yt===ko||yt===$h)throw yt;var Gt=On(29,yt,null,U.mode);return Gt.lanes=et,Gt.return=U,Gt}finally{}}}var Sa=q0(!0),H0=q0(!1),nr=!1;function cp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hp(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ir(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function sr(i,r,o){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Yt&2)!==0){var m=c.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),c.pending=r,r=Hh(i),R0(i,null,o),r}return qh(i,c,r,o),Hh(i)}function Iu(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,o|=c,r.lanes=o,Jl(i,o)}}function fp(i,r){var o=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?m=g=r:g=g.next=r}else m=g=r;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var dp=!1;function Ru(){if(dp){var i=Oo;if(i!==null)throw i}}function xu(i,r,o,c){dp=!1;var m=i.updateQueue;nr=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var D=A,H=D.next;D.next=null,T===null?g=H:T.next=H,T=D;var J=i.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==T&&(A===null?J.firstBaseUpdate=H:A.next=H,J.lastBaseUpdate=D))}if(g!==null){var nt=m.baseState;T=0,J=H=D=null,A=g;do{var K=A.lane&-536870913,X=K!==A.lane;if(X?(Lt&K)===K:(c&K)===K){K!==0&&K===Po&&(dp=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var pt=i,Et=A;K=r;var re=o;switch(Et.tag){case 1:if(pt=Et.payload,typeof pt=="function"){nt=pt.call(re,nt,K);break t}nt=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=Et.payload,K=typeof pt=="function"?pt.call(re,nt,K):pt,K==null)break t;nt=v({},nt,K);break t;case 2:nr=!0}}K=A.callback,K!==null&&(i.flags|=64,X&&(i.flags|=8192),X=m.callbacks,X===null?m.callbacks=[K]:X.push(K))}else X={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(H=J=X,D=nt):J=J.next=X,T|=K;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;X=A,A=X.next,X.next=null,m.lastBaseUpdate=X,m.shared.pending=null}}while(!0);J===null&&(D=nt),m.baseState=D,m.firstBaseUpdate=H,m.lastBaseUpdate=J,g===null&&(m.shared.lanes=0),ur|=T,i.lanes=T,i.memoizedState=nt}}function G0(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function K0(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)G0(o[i],r)}var Uo=O(null),tf=O(0);function Q0(i,r){i=bs,ft(tf,i),ft(Uo,r),bs=i|r.baseLanes}function mp(){ft(tf,bs),ft(Uo,Uo.current)}function pp(){bs=tf.current,it(Uo),it(tf)}var kn=O(null),ti=null;function rr(i){var r=i.alternate;ft(we,we.current&1),ft(kn,i),ti===null&&(r===null||Uo.current!==null||r.memoizedState!==null)&&(ti=i)}function gp(i){ft(we,we.current),ft(kn,i),ti===null&&(ti=i)}function Y0(i){i.tag===22?(ft(we,we.current),ft(kn,i),ti===null&&(ti=i)):ar()}function ar(){ft(we,we.current),ft(kn,kn.current)}function Ln(i){it(kn),ti===i&&(ti=null),it(we)}var we=O(0);function ef(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||bg(o)||Ag(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ms=0,Ct=null,ie=null,Me=null,nf=!1,zo=!1,wa=!1,sf=0,Cu=0,Bo=null,x2=0;function ve(){throw Error(s(321))}function yp(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!Pn(i[o],r[o]))return!1;return!0}function _p(i,r,o,c,m,g){return ms=g,Ct=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=i===null||i.memoizedState===null?VT:Mp,wa=!1,g=o(c,m),wa=!1,zo&&(g=$0(r,o,c,m)),X0(i),g}function X0(i){W.H=Nu;var r=ie!==null&&ie.next!==null;if(ms=0,Me=ie=Ct=null,nf=!1,Cu=0,Bo=null,r)throw Error(s(300));i===null||Pe||(i=i.dependencies,i!==null&&Qh(i)&&(Pe=!0))}function $0(i,r,o,c){Ct=i;var m=0;do{if(zo&&(Bo=null),Cu=0,zo=!1,25<=m)throw Error(s(301));if(m+=1,Me=ie=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}W.H=NT,g=r(o,c)}while(zo);return g}function C2(){var i=W.H,r=i.useState()[0];return r=typeof r.then=="function"?Du(r):r,i=i.useState()[0],(ie!==null?ie.memoizedState:null)!==i&&(Ct.flags|=1024),r}function vp(){var i=sf!==0;return sf=0,i}function Tp(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function Ep(i){if(nf){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}nf=!1}ms=0,Me=ie=Ct=null,zo=!1,Cu=sf=0,Bo=null}function yn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?Ct.memoizedState=Me=i:Me=Me.next=i,Me}function Ie(){if(ie===null){var i=Ct.alternate;i=i!==null?i.memoizedState:null}else i=ie.next;var r=Me===null?Ct.memoizedState:Me.next;if(r!==null)Me=r,ie=i;else{if(i===null)throw Ct.alternate===null?Error(s(467)):Error(s(310));ie=i,i={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Me===null?Ct.memoizedState=Me=i:Me=Me.next=i}return Me}function rf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Du(i){var r=Cu;return Cu+=1,Bo===null&&(Bo=[]),i=B0(Bo,i,r),r=Ct,(Me===null?r.memoizedState:Me.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?VT:Mp),i}function af(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Du(i);if(i.$$typeof===G)return tn(i)}throw Error(s(438,String(i)))}function bp(i){var r=null,o=Ct.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Ct.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=rf(),Ct.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),c=0;c<i;c++)o[c]=M;return r.index++,o}function ps(i,r){return typeof r=="function"?r(i):r}function of(i){var r=Ie();return Ap(r,ie,i)}function Ap(i,r,o){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var m=i.baseQueue,g=c.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}r.baseQueue=m=g,c.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{r=m.next;var A=T=null,D=null,H=r,J=!1;do{var nt=H.lane&-536870913;if(nt!==H.lane?(Lt&nt)===nt:(ms&nt)===nt){var K=H.revertLane;if(K===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),nt===Po&&(J=!0);else if((ms&K)===K){H=H.next,K===Po&&(J=!0);continue}else nt={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(A=D=nt,T=g):D=D.next=nt,Ct.lanes|=K,ur|=K;nt=H.action,wa&&o(g,nt),g=H.hasEagerState?H.eagerState:o(g,nt)}else K={lane:nt,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(A=D=K,T=g):D=D.next=K,Ct.lanes|=nt,ur|=nt;H=H.next}while(H!==null&&H!==r);if(D===null?T=g:D.next=A,!Pn(g,i.memoizedState)&&(Pe=!0,J&&(o=Oo,o!==null)))throw o;i.memoizedState=g,i.baseState=T,i.baseQueue=D,c.lastRenderedState=g}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Sp(i){var r=Ie(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var c=o.dispatch,m=o.pending,g=r.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);Pn(g,r.memoizedState)||(Pe=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,c]}function W0(i,r,o){var c=Ct,m=Ie(),g=Ft;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=r();var T=!Pn((ie||m).memoizedState,o);if(T&&(m.memoizedState=o,Pe=!0),m=m.queue,Rp(tT.bind(null,c,m,i),[i]),m.getSnapshot!==r||T||Me!==null&&Me.memoizedState.tag&1){if(c.flags|=2048,jo(9,{destroy:void 0},J0.bind(null,c,m,o,r),null),ae===null)throw Error(s(349));g||(ms&127)!==0||Z0(c,r,o)}return o}function Z0(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=Ct.updateQueue,r===null?(r=rf(),Ct.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function J0(i,r,o,c){r.value=o,r.getSnapshot=c,eT(r)&&nT(i)}function tT(i,r,o){return o(function(){eT(r)&&nT(i)})}function eT(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!Pn(i,o)}catch{return!0}}function nT(i){var r=ga(i,2);r!==null&&Cn(r,i,2)}function wp(i){var r=yn();if(typeof i=="function"){var o=i;if(i=o(),wa){Hn(!0);try{o()}finally{Hn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:i},r}function iT(i,r,o,c){return i.baseState=o,Ap(i,ie,typeof c=="function"?c:ps)}function D2(i,r,o,c,m){if(cf(i))throw Error(s(485));if(i=r.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};W.T!==null?o(!0):g.isTransition=!1,c(g),o=r.pending,o===null?(g.next=r.pending=g,sT(r,g)):(g.next=o.next,r.pending=o.next=g)}}function sT(i,r){var o=r.action,c=r.payload,m=i.state;if(r.isTransition){var g=W.T,T={};W.T=T;try{var A=o(m,c),D=W.S;D!==null&&D(T,A),rT(i,r,A)}catch(H){Ip(i,r,H)}finally{g!==null&&T.types!==null&&(g.types=T.types),W.T=g}}else try{g=o(m,c),rT(i,r,g)}catch(H){Ip(i,r,H)}}function rT(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){aT(i,r,c)},function(c){return Ip(i,r,c)}):aT(i,r,o)}function aT(i,r,o){r.status="fulfilled",r.value=o,oT(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,sT(i,o)))}function Ip(i,r,o){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,oT(r),r=r.next;while(r!==c)}i.action=null}function oT(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function lT(i,r){return r}function uT(i,r){if(Ft){var o=ae.formState;if(o!==null){t:{var c=Ct;if(Ft){if(le){e:{for(var m=le,g=Jn;m.nodeType!==8;){if(!g){m=null;break e}if(m=ei(m.nextSibling),m===null){m=null;break e}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){le=ei(m.nextSibling),c=m.data==="F!";break t}}tr(c)}c=!1}c&&(r=o[0])}}return o=yn(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lT,lastRenderedState:r},o.queue=c,o=xT.bind(null,Ct,c),c.dispatch=o,c=wp(!1),g=Np.bind(null,Ct,!1,c.queue),c=yn(),m={state:r,dispatch:null,action:i,pending:null},c.queue=m,o=D2.bind(null,Ct,m,g,o),m.dispatch=o,c.memoizedState=i,[r,o,!1]}function cT(i){var r=Ie();return hT(r,ie,i)}function hT(i,r,o){if(r=Ap(i,r,lT)[0],i=of(ps)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Du(r)}catch(T){throw T===ko?$h:T}else c=r;r=Ie();var m=r.queue,g=m.dispatch;return o!==r.memoizedState&&(Ct.flags|=2048,jo(9,{destroy:void 0},V2.bind(null,m,o),null)),[c,g,i]}function V2(i,r){i.action=r}function fT(i){var r=Ie(),o=ie;if(o!==null)return hT(r,o,i);Ie(),r=r.memoizedState,o=Ie();var c=o.queue.dispatch;return o.memoizedState=i,[r,c,!1]}function jo(i,r,o,c){return i={tag:i,create:o,deps:c,inst:r,next:null},r=Ct.updateQueue,r===null&&(r=rf(),Ct.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(c=o.next,o.next=i,i.next=c,r.lastEffect=i),i}function dT(){return Ie().memoizedState}function lf(i,r,o,c){var m=yn();Ct.flags|=i,m.memoizedState=jo(1|r,{destroy:void 0},o,c===void 0?null:c)}function uf(i,r,o,c){var m=Ie();c=c===void 0?null:c;var g=m.memoizedState.inst;ie!==null&&c!==null&&yp(c,ie.memoizedState.deps)?m.memoizedState=jo(r,g,o,c):(Ct.flags|=i,m.memoizedState=jo(1|r,g,o,c))}function mT(i,r){lf(8390656,8,i,r)}function Rp(i,r){uf(2048,8,i,r)}function N2(i){Ct.flags|=4;var r=Ct.updateQueue;if(r===null)r=rf(),Ct.updateQueue=r,r.events=[i];else{var o=r.events;o===null?r.events=[i]:o.push(i)}}function pT(i){var r=Ie().memoizedState;return N2({ref:r,nextImpl:i}),function(){if((Yt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function gT(i,r){return uf(4,2,i,r)}function yT(i,r){return uf(4,4,i,r)}function _T(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function vT(i,r,o){o=o!=null?o.concat([i]):null,uf(4,4,_T.bind(null,r,i),o)}function xp(){}function TT(i,r){var o=Ie();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&yp(r,c[1])?c[0]:(o.memoizedState=[i,r],i)}function ET(i,r){var o=Ie();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&yp(r,c[1]))return c[0];if(c=i(),wa){Hn(!0);try{i()}finally{Hn(!1)}}return o.memoizedState=[c,r],c}function Cp(i,r,o){return o===void 0||(ms&1073741824)!==0&&(Lt&261930)===0?i.memoizedState=r:(i.memoizedState=o,i=bE(),Ct.lanes|=i,ur|=i,o)}function bT(i,r,o,c){return Pn(o,r)?o:Uo.current!==null?(i=Cp(i,o,c),Pn(i,r)||(Pe=!0),i):(ms&42)===0||(ms&1073741824)!==0&&(Lt&261930)===0?(Pe=!0,i.memoizedState=o):(i=bE(),Ct.lanes|=i,ur|=i,r)}function AT(i,r,o,c,m){var g=at.p;at.p=g!==0&&8>g?g:8;var T=W.T,A={};W.T=A,Np(i,!1,r,o);try{var D=m(),H=W.S;if(H!==null&&H(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=R2(D,c);Vu(i,r,J,Bn(i))}else Vu(i,r,c,Bn(i))}catch(nt){Vu(i,r,{then:function(){},status:"rejected",reason:nt},Bn())}finally{at.p=g,T!==null&&A.types!==null&&(T.types=A.types),W.T=T}}function M2(){}function Dp(i,r,o,c){if(i.tag!==5)throw Error(s(476));var m=ST(i).queue;AT(i,m,r,mt,o===null?M2:function(){return wT(i),o(c)})}function ST(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:mt},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function wT(i){var r=ST(i);r.next===null&&(r=i.alternate.memoizedState),Vu(i,r.next.queue,{},Bn())}function Vp(){return tn(Yu)}function IT(){return Ie().memoizedState}function RT(){return Ie().memoizedState}function P2(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=Bn();i=ir(o);var c=sr(r,i,o);c!==null&&(Cn(c,r,o),Iu(c,r,o)),r={cache:ap()},i.payload=r;return}r=r.return}}function O2(i,r,o){var c=Bn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},cf(i)?CT(r,o):(o=Xm(i,r,o,c),o!==null&&(Cn(o,i,c),DT(o,r,c)))}function xT(i,r,o){var c=Bn();Vu(i,r,o,c)}function Vu(i,r,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(cf(i))CT(r,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var T=r.lastRenderedState,A=g(T,o);if(m.hasEagerState=!0,m.eagerState=A,Pn(A,T))return qh(i,r,m,0),ae===null&&Fh(),!1}catch{}finally{}if(o=Xm(i,r,m,c),o!==null)return Cn(o,i,c),DT(o,r,c),!0}return!1}function Np(i,r,o,c){if(c={lane:2,revertLane:cg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},cf(i)){if(r)throw Error(s(479))}else r=Xm(i,o,c,2),r!==null&&Cn(r,i,2)}function cf(i){var r=i.alternate;return i===Ct||r!==null&&r===Ct}function CT(i,r){zo=nf=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function DT(i,r,o){if((o&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,o|=c,r.lanes=o,Jl(i,o)}}var Nu={readContext:tn,use:af,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve};Nu.useEffectEvent=ve;var VT={readContext:tn,use:af,useCallback:function(i,r){return yn().memoizedState=[i,r===void 0?null:r],i},useContext:tn,useEffect:mT,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,lf(4194308,4,_T.bind(null,r,i),o)},useLayoutEffect:function(i,r){return lf(4194308,4,i,r)},useInsertionEffect:function(i,r){lf(4,2,i,r)},useMemo:function(i,r){var o=yn();r=r===void 0?null:r;var c=i();if(wa){Hn(!0);try{i()}finally{Hn(!1)}}return o.memoizedState=[c,r],c},useReducer:function(i,r,o){var c=yn();if(o!==void 0){var m=o(r);if(wa){Hn(!0);try{o(r)}finally{Hn(!1)}}}else m=r;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=O2.bind(null,Ct,i),[c.memoizedState,i]},useRef:function(i){var r=yn();return i={current:i},r.memoizedState=i},useState:function(i){i=wp(i);var r=i.queue,o=xT.bind(null,Ct,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:xp,useDeferredValue:function(i,r){var o=yn();return Cp(o,i,r)},useTransition:function(){var i=wp(!1);return i=AT.bind(null,Ct,i.queue,!0,!1),yn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var c=Ct,m=yn();if(Ft){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),ae===null)throw Error(s(349));(Lt&127)!==0||Z0(c,r,o)}m.memoizedState=o;var g={value:o,getSnapshot:r};return m.queue=g,mT(tT.bind(null,c,g,i),[i]),c.flags|=2048,jo(9,{destroy:void 0},J0.bind(null,c,g,o,r),null),o},useId:function(){var i=yn(),r=ae.identifierPrefix;if(Ft){var o=Gi,c=Hi;o=(c&~(1<<32-Ae(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=sf++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=x2++,r="_"+r+"r_"+o.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Vp,useFormState:uT,useActionState:uT,useOptimistic:function(i){var r=yn();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Np.bind(null,Ct,!0,o),o.dispatch=r,[i,r]},useMemoCache:bp,useCacheRefresh:function(){return yn().memoizedState=P2.bind(null,Ct)},useEffectEvent:function(i){var r=yn(),o={impl:i};return r.memoizedState=o,function(){if((Yt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Mp={readContext:tn,use:af,useCallback:TT,useContext:tn,useEffect:Rp,useImperativeHandle:vT,useInsertionEffect:gT,useLayoutEffect:yT,useMemo:ET,useReducer:of,useRef:dT,useState:function(){return of(ps)},useDebugValue:xp,useDeferredValue:function(i,r){var o=Ie();return bT(o,ie.memoizedState,i,r)},useTransition:function(){var i=of(ps)[0],r=Ie().memoizedState;return[typeof i=="boolean"?i:Du(i),r]},useSyncExternalStore:W0,useId:IT,useHostTransitionStatus:Vp,useFormState:cT,useActionState:cT,useOptimistic:function(i,r){var o=Ie();return iT(o,ie,i,r)},useMemoCache:bp,useCacheRefresh:RT};Mp.useEffectEvent=pT;var NT={readContext:tn,use:af,useCallback:TT,useContext:tn,useEffect:Rp,useImperativeHandle:vT,useInsertionEffect:gT,useLayoutEffect:yT,useMemo:ET,useReducer:Sp,useRef:dT,useState:function(){return Sp(ps)},useDebugValue:xp,useDeferredValue:function(i,r){var o=Ie();return ie===null?Cp(o,i,r):bT(o,ie.memoizedState,i,r)},useTransition:function(){var i=Sp(ps)[0],r=Ie().memoizedState;return[typeof i=="boolean"?i:Du(i),r]},useSyncExternalStore:W0,useId:IT,useHostTransitionStatus:Vp,useFormState:fT,useActionState:fT,useOptimistic:function(i,r){var o=Ie();return ie!==null?iT(o,ie,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:bp,useCacheRefresh:RT};NT.useEffectEvent=pT;function Pp(i,r,o,c){r=i.memoizedState,o=o(c,r),o=o==null?r:v({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Op={enqueueSetState:function(i,r,o){i=i._reactInternals;var c=Bn(),m=ir(c);m.payload=r,o!=null&&(m.callback=o),r=sr(i,m,c),r!==null&&(Cn(r,i,c),Iu(r,i,c))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var c=Bn(),m=ir(c);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=sr(i,m,c),r!==null&&(Cn(r,i,c),Iu(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=Bn(),c=ir(o);c.tag=2,r!=null&&(c.callback=r),r=sr(i,c,o),r!==null&&(Cn(r,i,o),Iu(r,i,o))}};function MT(i,r,o,c,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,T):r.prototype&&r.prototype.isPureReactComponent?!_u(o,c)||!_u(m,g):!0}function PT(i,r,o,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==i&&Op.enqueueReplaceState(r,r.state,null)}function Ia(i,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(i=i.defaultProps){o===r&&(o=v({},o));for(var m in i)o[m]===void 0&&(o[m]=i[m])}return o}function OT(i){jh(i)}function kT(i){console.error(i)}function LT(i){jh(i)}function hf(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function UT(i,r,o){try{var c=i.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function kp(i,r,o){return o=ir(o),o.tag=3,o.payload={element:null},o.callback=function(){hf(i,r)},o}function zT(i){return i=ir(i),i.tag=3,i}function BT(i,r,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;i.payload=function(){return m(g)},i.callback=function(){UT(r,o,c)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){UT(r,o,c),typeof m!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function k2(i,r,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Mo(r,o,m,!0),o=kn.current,o!==null){switch(o.tag){case 31:case 13:return ti===null?Af():o.alternate===null&&Te===0&&(Te=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Wh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),og(i,c,m)),!1;case 22:return o.flags|=65536,c===Wh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),og(i,c,m)),!1}throw Error(s(435,o.tag))}return og(i,c,m),Af(),!1}if(Ft)return r=kn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,c!==ep&&(i=Error(s(422),{cause:c}),Eu($n(i,o)))):(c!==ep&&(r=Error(s(423),{cause:c}),Eu($n(r,o))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=$n(c,o),m=kp(i.stateNode,c,m),fp(i,m),Te!==4&&(Te=2)),!1;var g=Error(s(520),{cause:c});if(g=$n(g,o),Bu===null?Bu=[g]:Bu.push(g),Te!==4&&(Te=2),r===null)return!0;c=$n(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=m&-m,o.lanes|=i,i=kp(o.stateNode,c,i),fp(o,i),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(cr===null||!cr.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=zT(m),BT(m,i,o,c),fp(o,m),!1}o=o.return}while(o!==null);return!1}var Lp=Error(s(461)),Pe=!1;function en(i,r,o,c){r.child=i===null?H0(r,null,o,c):Sa(r,i.child,o,c)}function jT(i,r,o,c,m){o=o.render;var g=r.ref;if("ref"in c){var T={};for(var A in c)A!=="ref"&&(T[A]=c[A])}else T=c;return Ta(r),c=_p(i,r,o,T,g,m),A=vp(),i!==null&&!Pe?(Tp(i,r,m),gs(i,r,m)):(Ft&&A&&Jm(r),r.flags|=1,en(i,r,c,m),r.child)}function FT(i,r,o,c,m){if(i===null){var g=o.type;return typeof g=="function"&&!$m(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,qT(i,r,g,c,m)):(i=Gh(o.type,null,c,r,r.mode,m),i.ref=r.ref,i.return=r,r.child=i)}if(g=i.child,!Gp(i,m)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:_u,o(T,c)&&i.ref===r.ref)return gs(i,r,m)}return r.flags|=1,i=cs(g,c),i.ref=r.ref,i.return=r,r.child=i}function qT(i,r,o,c,m){if(i!==null){var g=i.memoizedProps;if(_u(g,c)&&i.ref===r.ref)if(Pe=!1,r.pendingProps=c=g,Gp(i,m))(i.flags&131072)!==0&&(Pe=!0);else return r.lanes=i.lanes,gs(i,r,m)}return Up(i,r,o,c,m)}function HT(i,r,o,c){var m=c.children,g=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,i!==null){for(c=r.child=i.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~g}else c=0,r.child=null;return GT(i,r,g,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Xh(r,g!==null?g.cachePool:null),g!==null?Q0(r,g):mp(),Y0(r);else return c=r.lanes=536870912,GT(i,r,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Xh(r,g.cachePool),Q0(r,g),ar(),r.memoizedState=null):(i!==null&&Xh(r,null),mp(),ar());return en(i,r,m,o),r.child}function Mu(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function GT(i,r,o,c,m){var g=lp();return g=g===null?null:{parent:Ne._currentValue,pool:g},r.memoizedState={baseLanes:o,cachePool:g},i!==null&&Xh(r,null),mp(),Y0(r),i!==null&&Mo(i,r,c,!0),r.childLanes=m,null}function ff(i,r){return r=mf({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function KT(i,r,o){return Sa(r,i.child,null,o),i=ff(r,r.pendingProps),i.flags|=2,Ln(r),r.memoizedState=null,i}function L2(i,r,o){var c=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ft){if(c.mode==="hidden")return i=ff(r,c),r.lanes=536870912,Mu(null,i);if(gp(r),(i=le)?(i=sb(i,Jn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Zs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},o=C0(i),o.return=r,r.child=o,Je=r,le=null)):i=null,i===null)throw tr(r);return r.lanes=536870912,null}return ff(r,c)}var g=i.memoizedState;if(g!==null){var T=g.dehydrated;if(gp(r),m)if(r.flags&256)r.flags&=-257,r=KT(i,r,o);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Pe||Mo(i,r,o,!1),m=(o&i.childLanes)!==0,Pe||m){if(c=ae,c!==null&&(T=tu(c,o),T!==0&&T!==g.retryLane))throw g.retryLane=T,ga(i,T),Cn(c,i,T),Lp;Af(),r=KT(i,r,o)}else i=g.treeContext,le=ei(T.nextSibling),Je=r,Ft=!0,Js=null,Jn=!1,i!==null&&N0(r,i),r=ff(r,c),r.flags|=4096;return r}return i=cs(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function df(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function Up(i,r,o,c,m){return Ta(r),o=_p(i,r,o,c,void 0,m),c=vp(),i!==null&&!Pe?(Tp(i,r,m),gs(i,r,m)):(Ft&&c&&Jm(r),r.flags|=1,en(i,r,o,m),r.child)}function QT(i,r,o,c,m,g){return Ta(r),r.updateQueue=null,o=$0(r,c,o,m),X0(i),c=vp(),i!==null&&!Pe?(Tp(i,r,g),gs(i,r,g)):(Ft&&c&&Jm(r),r.flags|=1,en(i,r,o,g),r.child)}function YT(i,r,o,c,m){if(Ta(r),r.stateNode===null){var g=Co,T=o.contextType;typeof T=="object"&&T!==null&&(g=tn(T)),g=new o(c,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Op,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=c,g.state=r.memoizedState,g.refs={},cp(r),T=o.contextType,g.context=typeof T=="object"&&T!==null?tn(T):Co,g.state=r.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Pp(r,o,T,c),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Op.enqueueReplaceState(g,g.state,null),xu(r,c,g,m),Ru(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){g=r.stateNode;var A=r.memoizedProps,D=Ia(o,A);g.props=D;var H=g.context,J=o.contextType;T=Co,typeof J=="object"&&J!==null&&(T=tn(J));var nt=o.getDerivedStateFromProps;J=typeof nt=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||H!==T)&&PT(r,g,c,T),nr=!1;var K=r.memoizedState;g.state=K,xu(r,c,g,m),Ru(),H=r.memoizedState,A||K!==H||nr?(typeof nt=="function"&&(Pp(r,o,nt,c),H=r.memoizedState),(D=nr||MT(r,o,D,c,K,H,T))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=H),g.props=c,g.state=H,g.context=T,c=D):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{g=r.stateNode,hp(i,r),T=r.memoizedProps,J=Ia(o,T),g.props=J,nt=r.pendingProps,K=g.context,H=o.contextType,D=Co,typeof H=="object"&&H!==null&&(D=tn(H)),A=o.getDerivedStateFromProps,(H=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==nt||K!==D)&&PT(r,g,c,D),nr=!1,K=r.memoizedState,g.state=K,xu(r,c,g,m),Ru();var X=r.memoizedState;T!==nt||K!==X||nr||i!==null&&i.dependencies!==null&&Qh(i.dependencies)?(typeof A=="function"&&(Pp(r,o,A,c),X=r.memoizedState),(J=nr||MT(r,o,J,c,K,X,D)||i!==null&&i.dependencies!==null&&Qh(i.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,X,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,X,D)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=X),g.props=c,g.state=X,g.context=D,c=J):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),c=!1)}return g=c,df(i,r),c=(r.flags&128)!==0,g||c?(g=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,i!==null&&c?(r.child=Sa(r,i.child,null,m),r.child=Sa(r,null,o,m)):en(i,r,o,m),r.memoizedState=g.state,i=r.child):i=gs(i,r,m),i}function XT(i,r,o,c){return _a(),r.flags|=256,en(i,r,o,c),r.child}var zp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bp(i){return{baseLanes:i,cachePool:U0()}}function jp(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=zn),i}function $T(i,r,o){var c=r.pendingProps,m=!1,g=(r.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(we.current&2)!==0),T&&(m=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ft){if(m?rr(r):ar(),(i=le)?(i=sb(i,Jn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Zs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},o=C0(i),o.return=r,r.child=o,Je=r,le=null)):i=null,i===null)throw tr(r);return Ag(i)?r.lanes=32:r.lanes=536870912,null}var A=c.children;return c=c.fallback,m?(ar(),m=r.mode,A=mf({mode:"hidden",children:A},m),c=ya(c,m,o,null),A.return=r,c.return=r,A.sibling=c,r.child=A,c=r.child,c.memoizedState=Bp(o),c.childLanes=jp(i,T,o),r.memoizedState=zp,Mu(null,c)):(rr(r),Fp(r,A))}var D=i.memoizedState;if(D!==null&&(A=D.dehydrated,A!==null)){if(g)r.flags&256?(rr(r),r.flags&=-257,r=qp(i,r,o)):r.memoizedState!==null?(ar(),r.child=i.child,r.flags|=128,r=null):(ar(),A=c.fallback,m=r.mode,c=mf({mode:"visible",children:c.children},m),A=ya(A,m,o,null),A.flags|=2,c.return=r,A.return=r,c.sibling=A,r.child=c,Sa(r,i.child,null,o),c=r.child,c.memoizedState=Bp(o),c.childLanes=jp(i,T,o),r.memoizedState=zp,r=Mu(null,c));else if(rr(r),Ag(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var H=T.dgst;T=H,c=Error(s(419)),c.stack="",c.digest=T,Eu({value:c,source:null,stack:null}),r=qp(i,r,o)}else if(Pe||Mo(i,r,o,!1),T=(o&i.childLanes)!==0,Pe||T){if(T=ae,T!==null&&(c=tu(T,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,ga(i,c),Cn(T,i,c),Lp;bg(A)||Af(),r=qp(i,r,o)}else bg(A)?(r.flags|=192,r.child=i.child,r=null):(i=D.treeContext,le=ei(A.nextSibling),Je=r,Ft=!0,Js=null,Jn=!1,i!==null&&N0(r,i),r=Fp(r,c.children),r.flags|=4096);return r}return m?(ar(),A=c.fallback,m=r.mode,D=i.child,H=D.sibling,c=cs(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,H!==null?A=cs(H,A):(A=ya(A,m,o,null),A.flags|=2),A.return=r,c.return=r,c.sibling=A,r.child=c,Mu(null,c),c=r.child,A=i.child.memoizedState,A===null?A=Bp(o):(m=A.cachePool,m!==null?(D=Ne._currentValue,m=m.parent!==D?{parent:D,pool:D}:m):m=U0(),A={baseLanes:A.baseLanes|o,cachePool:m}),c.memoizedState=A,c.childLanes=jp(i,T,o),r.memoizedState=zp,Mu(i.child,c)):(rr(r),o=i.child,i=o.sibling,o=cs(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,i!==null&&(T=r.deletions,T===null?(r.deletions=[i],r.flags|=16):T.push(i)),r.child=o,r.memoizedState=null,o)}function Fp(i,r){return r=mf({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function mf(i,r){return i=On(22,i,null,r),i.lanes=0,i}function qp(i,r,o){return Sa(r,i.child,null,o),i=Fp(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function WT(i,r,o){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),sp(i.return,r,o)}function Hp(i,r,o,c,m,g){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:g}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=o,T.tailMode=m,T.treeForkCount=g)}function ZT(i,r,o){var c=r.pendingProps,m=c.revealOrder,g=c.tail;c=c.children;var T=we.current,A=(T&2)!==0;if(A?(T=T&1|2,r.flags|=128):T&=1,ft(we,T),en(i,r,c,o),c=Ft?Tu:0,!A&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&WT(i,o,r);else if(i.tag===19)WT(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(o=r.child,m=null;o!==null;)i=o.alternate,i!==null&&ef(i)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),Hp(r,!1,m,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(i=m.alternate,i!==null&&ef(i)===null){r.child=m;break}i=m.sibling,m.sibling=o,o=m,m=i}Hp(r,!0,o,null,g,c);break;case"together":Hp(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function gs(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),ur|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Mo(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=cs(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=cs(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function Gp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Qh(i)))}function U2(i,r,o){switch(r.tag){case 3:je(r,r.stateNode.containerInfo),er(r,Ne,i.memoizedState.cache),_a();break;case 27:case 5:Zr(r);break;case 4:je(r,r.stateNode.containerInfo);break;case 10:er(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,gp(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(rr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?$T(i,r,o):(rr(r),i=gs(i,r,o),i!==null?i.sibling:null);rr(r);break;case 19:var m=(i.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Mo(i,r,o,!1),c=(o&r.childLanes)!==0),m){if(c)return ZT(i,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ft(we,we.current),c)break;return null;case 22:return r.lanes=0,HT(i,r,o,r.pendingProps);case 24:er(r,Ne,i.memoizedState.cache)}return gs(i,r,o)}function JT(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)Pe=!0;else{if(!Gp(i,o)&&(r.flags&128)===0)return Pe=!1,U2(i,r,o);Pe=(i.flags&131072)!==0}else Pe=!1,Ft&&(r.flags&1048576)!==0&&V0(r,Tu,r.index);switch(r.lanes=0,r.tag){case 16:t:{var c=r.pendingProps;if(i=ba(r.elementType),r.type=i,typeof i=="function")$m(i)?(c=Ia(i,c),r.tag=1,r=YT(null,r,i,c,o)):(r.tag=0,r=Up(null,r,i,c,o));else{if(i!=null){var m=i.$$typeof;if(m===st){r.tag=11,r=jT(null,r,i,c,o);break t}else if(m===R){r.tag=14,r=FT(null,r,i,c,o);break t}}throw r=jt(i)||i,Error(s(306,r,""))}}return r;case 0:return Up(i,r,r.type,r.pendingProps,o);case 1:return c=r.type,m=Ia(c,r.pendingProps),YT(i,r,c,m,o);case 3:t:{if(je(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var g=r.memoizedState;m=g.element,hp(i,r),xu(r,c,null,o);var T=r.memoizedState;if(c=T.cache,er(r,Ne,c),c!==g.cache&&rp(r,[Ne],o,!0),Ru(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=XT(i,r,c,o);break t}else if(c!==m){m=$n(Error(s(424)),r),Eu(m),r=XT(i,r,c,o);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(le=ei(i.firstChild),Je=r,Ft=!0,Js=null,Jn=!0,o=H0(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(_a(),c===m){r=gs(i,r,o);break t}en(i,r,c,o)}r=r.child}return r;case 26:return df(i,r),i===null?(o=cb(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ft||(o=r.type,i=r.pendingProps,c=Df(Vt.current).createElement(o),c[Ce]=r,c[Qe]=i,nn(c,o,i),De(c),r.stateNode=c):r.memoizedState=cb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Zr(r),i===null&&Ft&&(c=r.stateNode=ob(r.type,r.pendingProps,Vt.current),Je=r,Jn=!0,m=le,mr(r.type)?(Sg=m,le=ei(c.firstChild)):le=m),en(i,r,r.pendingProps.children,o),df(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ft&&((m=c=le)&&(c=mD(c,r.type,r.pendingProps,Jn),c!==null?(r.stateNode=c,Je=r,le=ei(c.firstChild),Jn=!1,m=!0):m=!1),m||tr(r)),Zr(r),m=r.type,g=r.pendingProps,T=i!==null?i.memoizedProps:null,c=g.children,vg(m,g)?c=null:T!==null&&vg(m,T)&&(r.flags|=32),r.memoizedState!==null&&(m=_p(i,r,C2,null,null,o),Yu._currentValue=m),df(i,r),en(i,r,c,o),r.child;case 6:return i===null&&Ft&&((i=o=le)&&(o=pD(o,r.pendingProps,Jn),o!==null?(r.stateNode=o,Je=r,le=null,i=!0):i=!1),i||tr(r)),null;case 13:return $T(i,r,o);case 4:return je(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=Sa(r,null,c,o):en(i,r,c,o),r.child;case 11:return jT(i,r,r.type,r.pendingProps,o);case 7:return en(i,r,r.pendingProps,o),r.child;case 8:return en(i,r,r.pendingProps.children,o),r.child;case 12:return en(i,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,er(r,r.type,c.value),en(i,r,c.children,o),r.child;case 9:return m=r.type._context,c=r.pendingProps.children,Ta(r),m=tn(m),c=c(m),r.flags|=1,en(i,r,c,o),r.child;case 14:return FT(i,r,r.type,r.pendingProps,o);case 15:return qT(i,r,r.type,r.pendingProps,o);case 19:return ZT(i,r,o);case 31:return L2(i,r,o);case 22:return HT(i,r,o,r.pendingProps);case 24:return Ta(r),c=tn(Ne),i===null?(m=lp(),m===null&&(m=ae,g=ap(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),r.memoizedState={parent:c,cache:m},cp(r),er(r,Ne,m)):((i.lanes&o)!==0&&(hp(i,r),xu(r,null,null,o),Ru()),m=i.memoizedState,g=r.memoizedState,m.parent!==c?(m={parent:c,cache:c},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),er(r,Ne,c)):(c=g.cache,er(r,Ne,c),c!==m.cache&&rp(r,[Ne],o,!0))),en(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ys(i){i.flags|=4}function Kp(i,r,o,c,m){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(IE())i.flags|=8192;else throw Aa=Wh,up}else i.flags&=-16777217}function tE(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!pb(r))if(IE())i.flags|=8192;else throw Aa=Wh,up}function pf(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Th():536870912,i.lanes|=r,Go|=r)}function Pu(i,r){if(!Ft)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function ue(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,c=0;if(r)for(var m=i.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=o,r}function z2(i,r,o){var c=r.pendingProps;switch(tp(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(r),null;case 1:return ue(r),null;case 3:return o=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ds(Ne),ce(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(No(r)?ys(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,np())),ue(r),null;case 26:var m=r.type,g=r.memoizedState;return i===null?(ys(r),g!==null?(ue(r),tE(r,g)):(ue(r),Kp(r,m,null,c,o))):g?g!==i.memoizedState?(ys(r),ue(r),tE(r,g)):(ue(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&ys(r),ue(r),Kp(r,m,i,c,o)),null;case 27:if(uo(r),o=Vt.current,m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&ys(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return ue(r),null}i=dt.current,No(r)?M0(r):(i=ob(m,c,o),r.stateNode=i,ys(r))}return ue(r),null;case 5:if(uo(r),m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&ys(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return ue(r),null}if(g=dt.current,No(r))M0(r);else{var T=Df(Vt.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?T.createElement(m,{is:c.is}):T.createElement(m)}}g[Ce]=r,g[Qe]=c;t:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break t;for(;T.sibling===null;){if(T.return===null||T.return===r)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=g;t:switch(nn(g,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&ys(r)}}return ue(r),Kp(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,o),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&ys(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=Vt.current,No(r)){if(i=r.stateNode,o=r.memoizedProps,c=null,m=Je,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[Ce]=r,i=!!(i.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||$E(i.nodeValue,o)),i||tr(r,!0)}else i=Df(i).createTextNode(c),i[Ce]=r,r.stateNode=i}return ue(r),null;case 31:if(o=r.memoizedState,i===null||i.memoizedState!==null){if(c=No(r),o!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ce]=r}else _a(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ue(r),i=!1}else o=np(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return r.flags&256?(Ln(r),r):(Ln(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ue(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=No(r),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Ce]=r}else _a(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ue(r),m=!1}else m=np(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(Ln(r),r):(Ln(r),null)}return Ln(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,i=i!==null&&i.memoizedState!==null,o&&(c=r.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)),o!==i&&o&&(r.child.flags|=8192),pf(r,r.updateQueue),ue(r),null);case 4:return ce(),i===null&&mg(r.stateNode.containerInfo),ue(r),null;case 10:return ds(r.type),ue(r),null;case 19:if(it(we),c=r.memoizedState,c===null)return ue(r),null;if(m=(r.flags&128)!==0,g=c.rendering,g===null)if(m)Pu(c,!1);else{if(Te!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(g=ef(i),g!==null){for(r.flags|=128,Pu(c,!1),i=g.updateQueue,r.updateQueue=i,pf(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)x0(o,i),o=o.sibling;return ft(we,we.current&1|2),Ft&&hs(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&pn()>Tf&&(r.flags|=128,m=!0,Pu(c,!1),r.lanes=4194304)}else{if(!m)if(i=ef(g),i!==null){if(r.flags|=128,m=!0,i=i.updateQueue,r.updateQueue=i,pf(r,i),Pu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Ft)return ue(r),null}else 2*pn()-c.renderingStartTime>Tf&&o!==536870912&&(r.flags|=128,m=!0,Pu(c,!1),r.lanes=4194304);c.isBackwards?(g.sibling=r.child,r.child=g):(i=c.last,i!==null?i.sibling=g:r.child=g,c.last=g)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=pn(),i.sibling=null,o=we.current,ft(we,m?o&1|2:o&1),Ft&&hs(r,c.treeForkCount),i):(ue(r),null);case 22:case 23:return Ln(r),pp(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(ue(r),r.subtreeFlags&6&&(r.flags|=8192)):ue(r),o=r.updateQueue,o!==null&&pf(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),i!==null&&it(Ea),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ds(Ne),ue(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function B2(i,r){switch(tp(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ds(Ne),ce(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return uo(r),null;case 31:if(r.memoizedState!==null){if(Ln(r),r.alternate===null)throw Error(s(340));_a()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Ln(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));_a()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return it(we),null;case 4:return ce(),null;case 10:return ds(r.type),null;case 22:case 23:return Ln(r),pp(),i!==null&&it(Ea),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ds(Ne),null;case 25:return null;default:return null}}function eE(i,r){switch(tp(r),r.tag){case 3:ds(Ne),ce();break;case 26:case 27:case 5:uo(r);break;case 4:ce();break;case 31:r.memoizedState!==null&&Ln(r);break;case 13:Ln(r);break;case 19:it(we);break;case 10:ds(r.type);break;case 22:case 23:Ln(r),pp(),i!==null&&it(Ea);break;case 24:ds(Ne)}}function Ou(i,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&i)===i){c=void 0;var g=o.create,T=o.inst;c=g(),T.destroy=c}o=o.next}while(o!==m)}}catch(A){Zt(r,r.return,A)}}function or(i,r,o){try{var c=r.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&i)===i){var T=c.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,m=r;var D=o,H=A;try{H()}catch(J){Zt(m,D,J)}}}c=c.next}while(c!==g)}}catch(J){Zt(r,r.return,J)}}function nE(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{K0(r,o)}catch(c){Zt(i,i.return,c)}}}function iE(i,r,o){o.props=Ia(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(c){Zt(i,r,c)}}function ku(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof o=="function"?i.refCleanup=o(c):o.current=c}}catch(m){Zt(i,r,m)}}function Ki(i,r){var o=i.ref,c=i.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){Zt(i,r,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Zt(i,r,m)}else o.current=null}function sE(i){var r=i.type,o=i.memoizedProps,c=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break t;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){Zt(i,i.return,m)}}function Qp(i,r,o){try{var c=i.stateNode;lD(c,i.type,o,r),c[Qe]=r}catch(m){Zt(i,i.return,m)}}function rE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&mr(i.type)||i.tag===4}function Yp(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||rE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&mr(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Xp(i,r,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=di));else if(c!==4&&(c===27&&mr(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(Xp(i,r,o),i=i.sibling;i!==null;)Xp(i,r,o),i=i.sibling}function gf(i,r,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(c!==4&&(c===27&&mr(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(gf(i,r,o),i=i.sibling;i!==null;)gf(i,r,o),i=i.sibling}function aE(i){var r=i.stateNode,o=i.memoizedProps;try{for(var c=i.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);nn(r,c,o),r[Ce]=i,r[Qe]=o}catch(g){Zt(i,i.return,g)}}var _s=!1,Oe=!1,$p=!1,oE=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function j2(i,r){if(i=i.containerInfo,yg=Lf,i=v0(i),qm(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var T=0,A=-1,D=-1,H=0,J=0,nt=i,K=null;e:for(;;){for(var X;nt!==o||m!==0&&nt.nodeType!==3||(A=T+m),nt!==g||c!==0&&nt.nodeType!==3||(D=T+c),nt.nodeType===3&&(T+=nt.nodeValue.length),(X=nt.firstChild)!==null;)K=nt,nt=X;for(;;){if(nt===i)break e;if(K===o&&++H===m&&(A=T),K===g&&++J===c&&(D=T),(X=nt.nextSibling)!==null)break;nt=K,K=nt.parentNode}nt=X}o=A===-1||D===-1?null:{start:A,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(_g={focusedElem:i,selectionRange:o},Lf=!1,Xe=r;Xe!==null;)if(r=Xe,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Xe=i;else for(;Xe!==null;){switch(r=Xe,g=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)m=i[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=r,m=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var pt=Ia(o.type,m);i=c.getSnapshotBeforeUpdate(pt,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(Et){Zt(o,o.return,Et)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)Eg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Eg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Xe=i;break}Xe=r.return}}function lE(i,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ts(i,o),c&4&&Ou(5,o);break;case 1:if(Ts(i,o),c&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(T){Zt(o,o.return,T)}else{var m=Ia(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(m,r,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Zt(o,o.return,T)}}c&64&&nE(o),c&512&&ku(o,o.return);break;case 3:if(Ts(i,o),c&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{K0(i,r)}catch(T){Zt(o,o.return,T)}}break;case 27:r===null&&c&4&&aE(o);case 26:case 5:Ts(i,o),r===null&&c&4&&sE(o),c&512&&ku(o,o.return);break;case 12:Ts(i,o);break;case 31:Ts(i,o),c&4&&hE(i,o);break;case 13:Ts(i,o),c&4&&fE(i,o),c&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=$2.bind(null,o),gD(i,o))));break;case 22:if(c=o.memoizedState!==null||_s,!c){r=r!==null&&r.memoizedState!==null||Oe,m=_s;var g=Oe;_s=c,(Oe=r)&&!g?Es(i,o,(o.subtreeFlags&8772)!==0):Ts(i,o),_s=m,Oe=g}break;case 30:break;default:Ts(i,o)}}function uE(i){var r=i.alternate;r!==null&&(i.alternate=null,uE(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&po(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var fe=null,wn=!1;function vs(i,r,o){for(o=o.child;o!==null;)cE(i,r,o),o=o.sibling}function cE(i,r,o){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(ui,o)}catch{}switch(o.tag){case 26:Oe||Ki(o,r),vs(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Oe||Ki(o,r);var c=fe,m=wn;mr(o.type)&&(fe=o.stateNode,wn=!1),vs(i,r,o),Gu(o.stateNode),fe=c,wn=m;break;case 5:Oe||Ki(o,r);case 6:if(c=fe,m=wn,fe=null,vs(i,r,o),fe=c,wn=m,fe!==null)if(wn)try{(fe.nodeType===9?fe.body:fe.nodeName==="HTML"?fe.ownerDocument.body:fe).removeChild(o.stateNode)}catch(g){Zt(o,r,g)}else try{fe.removeChild(o.stateNode)}catch(g){Zt(o,r,g)}break;case 18:fe!==null&&(wn?(i=fe,nb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Jo(i)):nb(fe,o.stateNode));break;case 4:c=fe,m=wn,fe=o.stateNode.containerInfo,wn=!0,vs(i,r,o),fe=c,wn=m;break;case 0:case 11:case 14:case 15:or(2,o,r),Oe||or(4,o,r),vs(i,r,o);break;case 1:Oe||(Ki(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&iE(o,r,c)),vs(i,r,o);break;case 21:vs(i,r,o);break;case 22:Oe=(c=Oe)||o.memoizedState!==null,vs(i,r,o),Oe=c;break;default:vs(i,r,o)}}function hE(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Jo(i)}catch(o){Zt(r,r.return,o)}}}function fE(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Jo(i)}catch(o){Zt(r,r.return,o)}}function F2(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new oE),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new oE),r;default:throw Error(s(435,i.tag))}}function yf(i,r){var o=F2(i);r.forEach(function(c){if(!o.has(c)){o.add(c);var m=W2.bind(null,i,c);c.then(m,m)}})}function In(i,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],g=i,T=r,A=T;t:for(;A!==null;){switch(A.tag){case 27:if(mr(A.type)){fe=A.stateNode,wn=!1;break t}break;case 5:fe=A.stateNode,wn=!1;break t;case 3:case 4:fe=A.stateNode.containerInfo,wn=!0;break t}A=A.return}if(fe===null)throw Error(s(160));cE(g,T,m),fe=null,wn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)dE(r,i),r=r.sibling}var vi=null;function dE(i,r){var o=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:In(r,i),Rn(i),c&4&&(or(3,i,i.return),Ou(3,i),or(5,i,i.return));break;case 1:In(r,i),Rn(i),c&512&&(Oe||o===null||Ki(o,o.return)),c&64&&_s&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=vi;if(In(r,i),Rn(i),c&512&&(Oe||o===null||Ki(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=i.memoizedState,o===null)if(c===null)if(i.stateNode===null){t:{c=i.type,o=i.memoizedProps,m=m.ownerDocument||m;e:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Ni]||g[Ce]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),nn(g,c,o),g[Ce]=i,De(g),c=g;break t;case"link":var T=db("link","href",m).get(c+(o.href||""));if(T){for(var A=0;A<T.length;A++)if(g=T[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(A,1);break e}}g=m.createElement(c),nn(g,c,o),m.head.appendChild(g);break;case"meta":if(T=db("meta","content",m).get(c+(o.content||""))){for(A=0;A<T.length;A++)if(g=T[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(A,1);break e}}g=m.createElement(c),nn(g,c,o),m.head.appendChild(g);break;default:throw Error(s(468,c))}g[Ce]=i,De(g),c=g}i.stateNode=c}else mb(m,i.type,i.stateNode);else i.stateNode=fb(m,c,i.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?mb(m,i.type,i.stateNode):fb(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Qp(i,i.memoizedProps,o.memoizedProps)}break;case 27:In(r,i),Rn(i),c&512&&(Oe||o===null||Ki(o,o.return)),o!==null&&c&4&&Qp(i,i.memoizedProps,o.memoizedProps);break;case 5:if(In(r,i),Rn(i),c&512&&(Oe||o===null||Ki(o,o.return)),i.flags&32){m=i.stateNode;try{Sn(m,"")}catch(pt){Zt(i,i.return,pt)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,Qp(i,m,o!==null?o.memoizedProps:m)),c&1024&&($p=!0);break;case 6:if(In(r,i),Rn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,o=i.stateNode;try{o.nodeValue=c}catch(pt){Zt(i,i.return,pt)}}break;case 3:if(Mf=null,m=vi,vi=Vf(r.containerInfo),In(r,i),vi=m,Rn(i),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Jo(r.containerInfo)}catch(pt){Zt(i,i.return,pt)}$p&&($p=!1,mE(i));break;case 4:c=vi,vi=Vf(i.stateNode.containerInfo),In(r,i),Rn(i),vi=c;break;case 12:In(r,i),Rn(i);break;case 31:In(r,i),Rn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,yf(i,c)));break;case 13:In(r,i),Rn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(vf=pn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,yf(i,c)));break;case 22:m=i.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,H=_s,J=Oe;if(_s=H||m,Oe=J||D,In(r,i),Oe=J,_s=H,Rn(i),c&8192)t:for(r=i.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(o===null||D||_s||Oe||Ra(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){D=o=r;try{if(g=D.stateNode,m)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=D.stateNode;var nt=D.memoizedProps.style,K=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(pt){Zt(D,D.return,pt)}}}else if(r.tag===6){if(o===null){D=r;try{D.stateNode.nodeValue=m?"":D.memoizedProps}catch(pt){Zt(D,D.return,pt)}}}else if(r.tag===18){if(o===null){D=r;try{var X=D.stateNode;m?ib(X,!0):ib(D.stateNode,!1)}catch(pt){Zt(D,D.return,pt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,yf(i,o))));break;case 19:In(r,i),Rn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,yf(i,c)));break;case 30:break;case 21:break;default:In(r,i),Rn(i)}}function Rn(i){var r=i.flags;if(r&2){try{for(var o,c=i.return;c!==null;){if(rE(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,g=Yp(i);gf(i,g,m);break;case 5:var T=o.stateNode;o.flags&32&&(Sn(T,""),o.flags&=-33);var A=Yp(i);gf(i,A,T);break;case 3:case 4:var D=o.stateNode.containerInfo,H=Yp(i);Xp(i,H,D);break;default:throw Error(s(161))}}catch(J){Zt(i,i.return,J)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function mE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;mE(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Ts(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)lE(i,r.alternate,r),r=r.sibling}function Ra(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:or(4,r,r.return),Ra(r);break;case 1:Ki(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&iE(r,r.return,o),Ra(r);break;case 27:Gu(r.stateNode);case 26:case 5:Ki(r,r.return),Ra(r);break;case 22:r.memoizedState===null&&Ra(r);break;case 30:Ra(r);break;default:Ra(r)}i=i.sibling}}function Es(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,m=i,g=r,T=g.flags;switch(g.tag){case 0:case 11:case 15:Es(m,g,o),Ou(4,g);break;case 1:if(Es(m,g,o),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(H){Zt(c,c.return,H)}if(c=g,m=c.updateQueue,m!==null){var A=c.stateNode;try{var D=m.shared.hiddenCallbacks;if(D!==null)for(m.shared.hiddenCallbacks=null,m=0;m<D.length;m++)G0(D[m],A)}catch(H){Zt(c,c.return,H)}}o&&T&64&&nE(g),ku(g,g.return);break;case 27:aE(g);case 26:case 5:Es(m,g,o),o&&c===null&&T&4&&sE(g),ku(g,g.return);break;case 12:Es(m,g,o);break;case 31:Es(m,g,o),o&&T&4&&hE(m,g);break;case 13:Es(m,g,o),o&&T&4&&fE(m,g);break;case 22:g.memoizedState===null&&Es(m,g,o),ku(g,g.return);break;case 30:break;default:Es(m,g,o)}r=r.sibling}}function Wp(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&bu(o))}function Zp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&bu(i))}function Ti(i,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)pE(i,r,o,c),r=r.sibling}function pE(i,r,o,c){var m=r.flags;switch(r.tag){case 0:case 11:case 15:Ti(i,r,o,c),m&2048&&Ou(9,r);break;case 1:Ti(i,r,o,c);break;case 3:Ti(i,r,o,c),m&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&bu(i)));break;case 12:if(m&2048){Ti(i,r,o,c),i=r.stateNode;try{var g=r.memoizedProps,T=g.id,A=g.onPostCommit;typeof A=="function"&&A(T,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(D){Zt(r,r.return,D)}}else Ti(i,r,o,c);break;case 31:Ti(i,r,o,c);break;case 13:Ti(i,r,o,c);break;case 23:break;case 22:g=r.stateNode,T=r.alternate,r.memoizedState!==null?g._visibility&2?Ti(i,r,o,c):Lu(i,r):g._visibility&2?Ti(i,r,o,c):(g._visibility|=2,Fo(i,r,o,c,(r.subtreeFlags&10256)!==0||!1)),m&2048&&Wp(T,r);break;case 24:Ti(i,r,o,c),m&2048&&Zp(r.alternate,r);break;default:Ti(i,r,o,c)}}function Fo(i,r,o,c,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=i,T=r,A=o,D=c,H=T.flags;switch(T.tag){case 0:case 11:case 15:Fo(g,T,A,D,m),Ou(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?Fo(g,T,A,D,m):Lu(g,T):(J._visibility|=2,Fo(g,T,A,D,m)),m&&H&2048&&Wp(T.alternate,T);break;case 24:Fo(g,T,A,D,m),m&&H&2048&&Zp(T.alternate,T);break;default:Fo(g,T,A,D,m)}r=r.sibling}}function Lu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,c=r,m=c.flags;switch(c.tag){case 22:Lu(o,c),m&2048&&Wp(c.alternate,c);break;case 24:Lu(o,c),m&2048&&Zp(c.alternate,c);break;default:Lu(o,c)}r=r.sibling}}var Uu=8192;function qo(i,r,o){if(i.subtreeFlags&Uu)for(i=i.child;i!==null;)gE(i,r,o),i=i.sibling}function gE(i,r,o){switch(i.tag){case 26:qo(i,r,o),i.flags&Uu&&i.memoizedState!==null&&xD(o,vi,i.memoizedState,i.memoizedProps);break;case 5:qo(i,r,o);break;case 3:case 4:var c=vi;vi=Vf(i.stateNode.containerInfo),qo(i,r,o),vi=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Uu,Uu=16777216,qo(i,r,o),Uu=c):qo(i,r,o));break;default:qo(i,r,o)}}function yE(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function zu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Xe=c,vE(c,i)}yE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_E(i),i=i.sibling}function _E(i){switch(i.tag){case 0:case 11:case 15:zu(i),i.flags&2048&&or(9,i,i.return);break;case 3:zu(i);break;case 12:zu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,_f(i)):zu(i);break;default:zu(i)}}function _f(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Xe=c,vE(c,i)}yE(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:or(8,r,r.return),_f(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,_f(r));break;default:_f(r)}i=i.sibling}}function vE(i,r){for(;Xe!==null;){var o=Xe;switch(o.tag){case 0:case 11:case 15:or(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:bu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Xe=c;else t:for(o=i;Xe!==null;){c=Xe;var m=c.sibling,g=c.return;if(uE(c),c===o){Xe=null;break t}if(m!==null){m.return=g,Xe=m;break t}Xe=g}}}var q2={getCacheForType:function(i){var r=tn(Ne),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o},cacheSignal:function(){return tn(Ne).controller.signal}},H2=typeof WeakMap=="function"?WeakMap:Map,Yt=0,ae=null,Pt=null,Lt=0,Wt=0,Un=null,lr=!1,Ho=!1,Jp=!1,bs=0,Te=0,ur=0,xa=0,tg=0,zn=0,Go=0,Bu=null,xn=null,eg=!1,vf=0,TE=0,Tf=1/0,Ef=null,cr=null,qe=0,hr=null,Ko=null,As=0,ng=0,ig=null,EE=null,ju=0,sg=null;function Bn(){return(Yt&2)!==0&&Lt!==0?Lt&-Lt:W.T!==null?cg():Eh()}function bE(){if(zn===0)if((Lt&536870912)===0||Ft){var i=ea;ea<<=1,(ea&3932160)===0&&(ea=262144),zn=i}else zn=536870912;return i=kn.current,i!==null&&(i.flags|=32),zn}function Cn(i,r,o){(i===ae&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)&&(Qo(i,0),fr(i,Lt,zn,!1)),na(i,o),((Yt&2)===0||i!==ae)&&(i===ae&&((Yt&2)===0&&(xa|=o),Te===4&&fr(i,Lt,zn,!1)),Qi(i))}function AE(i,r,o){if((Yt&6)!==0)throw Error(s(327));var c=!o&&(r&127)===0&&(r&i.expiredLanes)===0||ci(i,r),m=c?Q2(i,r):ag(i,r,!0),g=c;do{if(m===0){Ho&&!c&&fr(i,r,0,!1);break}else{if(o=i.current.alternate,g&&!G2(o)){m=ag(i,r,!1),g=!1;continue}if(m===2){if(g=r,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;t:{var A=i;m=Bu;var D=A.current.memoizedState.isDehydrated;if(D&&(Qo(A,T).flags|=256),T=ag(A,T,!1),T!==2){if(Jp&&!D){A.errorRecoveryDisabledLanes|=g,xa|=g,m=4;break t}g=xn,xn=m,g!==null&&(xn===null?xn=g:xn.push.apply(xn,g))}m=T}if(g=!1,m!==2)continue}}if(m===1){Qo(i,0),fr(i,r,0,!0);break}t:{switch(c=i,g=m,g){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:fr(c,r,zn,!lr);break t;case 2:xn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(m=vf+300-pn(),10<m)){if(fr(c,r,zn,!lr),Ci(c,0,!0)!==0)break t;As=r,c.timeoutHandle=tb(SE.bind(null,c,o,xn,Ef,eg,r,zn,xa,Go,lr,g,"Throttled",-0,0),m);break t}SE(c,o,xn,Ef,eg,r,zn,xa,Go,lr,g,null,-0,0)}}break}while(!0);Qi(i)}function SE(i,r,o,c,m,g,T,A,D,H,J,nt,K,X){if(i.timeoutHandle=-1,nt=r.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:di},gE(r,g,nt);var pt=(g&62914560)===g?vf-pn():(g&4194048)===g?TE-pn():0;if(pt=CD(nt,pt),pt!==null){As=g,i.cancelPendingCommit=pt(NE.bind(null,i,r,g,o,c,m,T,A,D,J,nt,null,K,X)),fr(i,g,T,!H);return}}NE(i,r,g,o,c,m,T,A,D)}function G2(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],g=m.getSnapshot;m=m.value;try{if(!Pn(g(),m))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function fr(i,r,o,c){r&=~tg,r&=~xa,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var m=r;0<m;){var g=31-Ae(m),T=1<<g;c[g]=-1,m&=~T}o!==0&&ia(i,o,r)}function bf(){return(Yt&6)===0?(Fu(0),!1):!0}function rg(){if(Pt!==null){if(Wt===0)var i=Pt.return;else i=Pt,fs=va=null,Ep(i),Lo=null,Su=0,i=Pt;for(;i!==null;)eE(i.alternate,i),i=i.return;Pt=null}}function Qo(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,hD(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),As=0,rg(),ae=i,Pt=o=cs(i.current,null),Lt=r,Wt=0,Un=null,lr=!1,Ho=ci(i,r),Jp=!1,Go=zn=tg=xa=ur=Te=0,xn=Bu=null,eg=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var m=31-Ae(c),g=1<<m;r|=i[m],c&=~g}return bs=r,Fh(),o}function wE(i,r){Ct=null,W.H=Nu,r===ko||r===$h?(r=j0(),Wt=3):r===up?(r=j0(),Wt=4):Wt=r===Lp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,Pt===null&&(Te=1,hf(i,$n(r,i.current)))}function IE(){var i=kn.current;return i===null?!0:(Lt&4194048)===Lt?ti===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?i===ti:!1}function RE(){var i=W.H;return W.H=Nu,i===null?Nu:i}function xE(){var i=W.A;return W.A=q2,i}function Af(){Te=4,lr||(Lt&4194048)!==Lt&&kn.current!==null||(Ho=!0),(ur&134217727)===0&&(xa&134217727)===0||ae===null||fr(ae,Lt,zn,!1)}function ag(i,r,o){var c=Yt;Yt|=2;var m=RE(),g=xE();(ae!==i||Lt!==r)&&(Ef=null,Qo(i,r)),r=!1;var T=Te;t:do try{if(Wt!==0&&Pt!==null){var A=Pt,D=Un;switch(Wt){case 8:rg(),T=6;break t;case 3:case 2:case 9:case 6:kn.current===null&&(r=!0);var H=Wt;if(Wt=0,Un=null,Yo(i,A,D,H),o&&Ho){T=0;break t}break;default:H=Wt,Wt=0,Un=null,Yo(i,A,D,H)}}K2(),T=Te;break}catch(J){wE(i,J)}while(!0);return r&&i.shellSuspendCounter++,fs=va=null,Yt=c,W.H=m,W.A=g,Pt===null&&(ae=null,Lt=0,Fh()),T}function K2(){for(;Pt!==null;)CE(Pt)}function Q2(i,r){var o=Yt;Yt|=2;var c=RE(),m=xE();ae!==i||Lt!==r?(Ef=null,Tf=pn()+500,Qo(i,r)):Ho=ci(i,r);t:do try{if(Wt!==0&&Pt!==null){r=Pt;var g=Un;e:switch(Wt){case 1:Wt=0,Un=null,Yo(i,r,g,1);break;case 2:case 9:if(z0(g)){Wt=0,Un=null,DE(r);break}r=function(){Wt!==2&&Wt!==9||ae!==i||(Wt=7),Qi(i)},g.then(r,r);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:z0(g)?(Wt=0,Un=null,DE(r)):(Wt=0,Un=null,Yo(i,r,g,7));break;case 5:var T=null;switch(Pt.tag){case 26:T=Pt.memoizedState;case 5:case 27:var A=Pt;if(T?pb(T):A.stateNode.complete){Wt=0,Un=null;var D=A.sibling;if(D!==null)Pt=D;else{var H=A.return;H!==null?(Pt=H,Sf(H)):Pt=null}break e}}Wt=0,Un=null,Yo(i,r,g,5);break;case 6:Wt=0,Un=null,Yo(i,r,g,6);break;case 8:rg(),Te=6;break t;default:throw Error(s(462))}}Y2();break}catch(J){wE(i,J)}while(!0);return fs=va=null,W.H=c,W.A=m,Yt=o,Pt!==null?0:(ae=null,Lt=0,Fh(),Te)}function Y2(){for(;Pt!==null&&!km();)CE(Pt)}function CE(i){var r=JT(i.alternate,i,bs);i.memoizedProps=i.pendingProps,r===null?Sf(i):Pt=r}function DE(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=QT(o,r,r.pendingProps,r.type,void 0,Lt);break;case 11:r=QT(o,r,r.pendingProps,r.type.render,r.ref,Lt);break;case 5:Ep(r);default:eE(o,r),r=Pt=x0(r,bs),r=JT(o,r,bs)}i.memoizedProps=i.pendingProps,r===null?Sf(i):Pt=r}function Yo(i,r,o,c){fs=va=null,Ep(r),Lo=null,Su=0;var m=r.return;try{if(k2(i,m,r,o,Lt)){Te=1,hf(i,$n(o,i.current)),Pt=null;return}}catch(g){if(m!==null)throw Pt=m,g;Te=1,hf(i,$n(o,i.current)),Pt=null;return}r.flags&32768?(Ft||c===1?i=!0:Ho||(Lt&536870912)!==0?i=!1:(lr=i=!0,(c===2||c===9||c===3||c===6)&&(c=kn.current,c!==null&&c.tag===13&&(c.flags|=16384))),VE(r,i)):Sf(r)}function Sf(i){var r=i;do{if((r.flags&32768)!==0){VE(r,lr);return}i=r.return;var o=z2(r.alternate,r,bs);if(o!==null){Pt=o;return}if(r=r.sibling,r!==null){Pt=r;return}Pt=r=i}while(r!==null);Te===0&&(Te=5)}function VE(i,r){do{var o=B2(i.alternate,i);if(o!==null){o.flags&=32767,Pt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){Pt=i;return}Pt=i=o}while(i!==null);Te=6,Pt=null}function NE(i,r,o,c,m,g,T,A,D){i.cancelPendingCommit=null;do wf();while(qe!==0);if((Yt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(g=r.lanes|r.childLanes,g|=Ym,zm(i,o,g,T,A,D),i===ae&&(Pt=ae=null,Lt=0),Ko=r,hr=i,As=o,ng=g,ig=m,EE=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Z2(Fs,function(){return LE(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,m=at.p,at.p=2,T=Yt,Yt|=4;try{j2(i,r,o)}finally{Yt=T,at.p=m,W.T=c}}qe=1,ME(),PE(),OE()}}function ME(){if(qe===1){qe=0;var i=hr,r=Ko,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var c=at.p;at.p=2;var m=Yt;Yt|=4;try{dE(r,i);var g=_g,T=v0(i.containerInfo),A=g.focusedElem,D=g.selectionRange;if(T!==A&&A&&A.ownerDocument&&_0(A.ownerDocument.documentElement,A)){if(D!==null&&qm(A)){var H=D.start,J=D.end;if(J===void 0&&(J=H),"selectionStart"in A)A.selectionStart=H,A.selectionEnd=Math.min(J,A.value.length);else{var nt=A.ownerDocument||document,K=nt&&nt.defaultView||window;if(K.getSelection){var X=K.getSelection(),pt=A.textContent.length,Et=Math.min(D.start,pt),re=D.end===void 0?Et:Math.min(D.end,pt);!X.extend&&Et>re&&(T=re,re=Et,Et=T);var U=y0(A,Et),P=y0(A,re);if(U&&P&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==P.node||X.focusOffset!==P.offset)){var q=nt.createRange();q.setStart(U.node,U.offset),X.removeAllRanges(),Et>re?(X.addRange(q),X.extend(P.node,P.offset)):(q.setEnd(P.node,P.offset),X.addRange(q))}}}}for(nt=[],X=A;X=X.parentNode;)X.nodeType===1&&nt.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<nt.length;A++){var et=nt[A];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Lf=!!yg,_g=yg=null}finally{Yt=m,at.p=c,W.T=o}}i.current=r,qe=2}}function PE(){if(qe===2){qe=0;var i=hr,r=Ko,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var c=at.p;at.p=2;var m=Yt;Yt|=4;try{lE(i,r.alternate,r)}finally{Yt=m,at.p=c,W.T=o}}qe=3}}function OE(){if(qe===4||qe===3){qe=0,mh();var i=hr,r=Ko,o=As,c=EE;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qe=5:(qe=0,Ko=hr=null,kE(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(cr=null),as(o),r=r.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(ui,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=W.T,m=at.p,at.p=2,W.T=null;try{for(var g=i.onRecoverableError,T=0;T<c.length;T++){var A=c[T];g(A.value,{componentStack:A.stack})}}finally{W.T=r,at.p=m}}(As&3)!==0&&wf(),Qi(i),m=i.pendingLanes,(o&261930)!==0&&(m&42)!==0?i===sg?ju++:(ju=0,sg=i):ju=0,Fu(0)}}function kE(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,bu(r)))}function wf(){return ME(),PE(),OE(),LE()}function LE(){if(qe!==5)return!1;var i=hr,r=ng;ng=0;var o=as(As),c=W.T,m=at.p;try{at.p=32>o?32:o,W.T=null,o=ig,ig=null;var g=hr,T=As;if(qe=0,Ko=hr=null,As=0,(Yt&6)!==0)throw Error(s(331));var A=Yt;if(Yt|=4,_E(g.current),pE(g,g.current,T,o),Yt=A,Fu(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(ui,g)}catch{}return!0}finally{at.p=m,W.T=c,kE(i,r)}}function UE(i,r,o){r=$n(o,r),r=kp(i.stateNode,r,2),i=sr(i,r,2),i!==null&&(na(i,2),Qi(i))}function Zt(i,r,o){if(i.tag===3)UE(i,i,o);else for(;r!==null;){if(r.tag===3){UE(r,i,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(cr===null||!cr.has(c))){i=$n(o,i),o=zT(2),c=sr(r,o,2),c!==null&&(BT(o,c,r,i),na(c,2),Qi(c));break}}r=r.return}}function og(i,r,o){var c=i.pingCache;if(c===null){c=i.pingCache=new H2;var m=new Set;c.set(r,m)}else m=c.get(r),m===void 0&&(m=new Set,c.set(r,m));m.has(o)||(Jp=!0,m.add(o),i=X2.bind(null,i,r,o),r.then(i,i))}function X2(i,r,o){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ae===i&&(Lt&o)===o&&(Te===4||Te===3&&(Lt&62914560)===Lt&&300>pn()-vf?(Yt&2)===0&&Qo(i,0):tg|=o,Go===Lt&&(Go=0)),Qi(i)}function zE(i,r){r===0&&(r=Th()),i=ga(i,r),i!==null&&(na(i,r),Qi(i))}function $2(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),zE(i,o)}function W2(i,r){var o=0;switch(i.tag){case 31:case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),zE(i,o)}function Z2(i,r){return Fe(i,r)}var If=null,Xo=null,lg=!1,Rf=!1,ug=!1,dr=0;function Qi(i){i!==Xo&&i.next===null&&(Xo===null?If=Xo=i:Xo=Xo.next=i),Rf=!0,lg||(lg=!0,tD())}function Fu(i,r){if(!ug&&Rf){ug=!0;do for(var o=!1,c=If;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var T=c.suspendedLanes,A=c.pingedLanes;g=(1<<31-Ae(42|i)+1)-1,g&=m&~(T&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,qE(c,g))}else g=Lt,g=Ci(c,c===ae?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||ci(c,g)||(o=!0,qE(c,g));c=c.next}while(o);ug=!1}}function J2(){BE()}function BE(){Rf=lg=!1;var i=0;dr!==0&&cD()&&(i=dr);for(var r=pn(),o=null,c=If;c!==null;){var m=c.next,g=jE(c,r);g===0?(c.next=null,o===null?If=m:o.next=m,m===null&&(Xo=o)):(o=c,(i!==0||(g&3)!==0)&&(Rf=!0)),c=m}qe!==0&&qe!==5||Fu(i),dr!==0&&(dr=0)}function jE(i,r){for(var o=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-Ae(g),A=1<<T,D=m[T];D===-1?((A&o)===0||(A&c)!==0)&&(m[T]=Um(A,r)):D<=r&&(i.expiredLanes|=A),g&=~A}if(r=ae,o=Lt,o=Ci(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,o===0||i===r&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&js(c),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||ci(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(c!==null&&js(c),as(o)){case 2:case 8:o=Zl;break;case 32:o=Fs;break;case 268435456:o=ph;break;default:o=Fs}return c=FE.bind(null,i),o=Fe(o,c),i.callbackPriority=r,i.callbackNode=o,r}return c!==null&&c!==null&&js(c),i.callbackPriority=2,i.callbackNode=null,2}function FE(i,r){if(qe!==0&&qe!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(wf()&&i.callbackNode!==o)return null;var c=Lt;return c=Ci(i,i===ae?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(AE(i,c,r),jE(i,pn()),i.callbackNode!=null&&i.callbackNode===o?FE.bind(null,i):null)}function qE(i,r){if(wf())return null;AE(i,r,!0)}function tD(){fD(function(){(Yt&6)!==0?Fe(Wl,J2):BE()})}function cg(){if(dr===0){var i=Po;i===0&&(i=Ri,Ri<<=1,(Ri&261888)===0&&(Ri=256)),dr=i}return dr}function HE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:vo(""+i)}function GE(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function eD(i,r,o,c,m){if(r==="submit"&&o&&o.stateNode===m){var g=HE((m[Qe]||null).action),T=c.submitter;T&&(r=(r=T[Qe]||null)?HE(r.formAction):T.getAttribute("formAction"),r!==null&&(g=r,T=null));var A=new Bi("action","action",null,c,m);i.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(dr!==0){var D=T?GE(m,T):new FormData(m);Dp(o,{pending:!0,data:D,method:m.method,action:g},null,D)}}else typeof g=="function"&&(A.preventDefault(),D=T?GE(m,T):new FormData(m),Dp(o,{pending:!0,data:D,method:m.method,action:g},g,D))},currentTarget:m}]})}}for(var hg=0;hg<Qm.length;hg++){var fg=Qm[hg],nD=fg.toLowerCase(),iD=fg[0].toUpperCase()+fg.slice(1);_i(nD,"on"+iD)}_i(b0,"onAnimationEnd"),_i(A0,"onAnimationIteration"),_i(S0,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(v2,"onTransitionRun"),_i(T2,"onTransitionStart"),_i(E2,"onTransitionCancel"),_i(w0,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qu));function KE(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var c=i[o],m=c.event;c=c.listeners;t:{var g=void 0;if(r)for(var T=c.length-1;0<=T;T--){var A=c[T],D=A.instance,H=A.currentTarget;if(A=A.listener,D!==g&&m.isPropagationStopped())break t;g=A,m.currentTarget=H;try{g(m)}catch(J){jh(J)}m.currentTarget=null,g=D}else for(T=0;T<c.length;T++){if(A=c[T],D=A.instance,H=A.currentTarget,A=A.listener,D!==g&&m.isPropagationStopped())break t;g=A,m.currentTarget=H;try{g(m)}catch(J){jh(J)}m.currentTarget=null,g=D}}}}function Ot(i,r){var o=r[mo];o===void 0&&(o=r[mo]=new Set);var c=i+"__bubble";o.has(c)||(QE(r,i,2,!1),o.add(c))}function dg(i,r,o){var c=0;r&&(c|=4),QE(o,i,c,r)}var xf="_reactListening"+Math.random().toString(36).slice(2);function mg(i){if(!i[xf]){i[xf]=!0,eu.forEach(function(o){o!=="selectionchange"&&(sD.has(o)||dg(o,!1,i),dg(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[xf]||(r[xf]=!0,dg("selectionchange",!1,r))}}function QE(i,r,o,c){switch(bb(r)){case 2:var m=ND;break;case 8:m=MD;break;default:m=Cg}o=m.bind(null,r,o,i),m=void 0,!la||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(r,o,{capture:!0,passive:m}):i.addEventListener(r,o,!0):m!==void 0?i.addEventListener(r,o,{passive:m}):i.addEventListener(r,o,!1)}function pg(i,r,o,c,m){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)t:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var A=c.stateNode.containerInfo;if(A===m)break;if(T===4)for(T=c.return;T!==null;){var D=T.tag;if((D===3||D===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;A!==null;){if(T=Mi(A),T===null)return;if(D=T.tag,D===5||D===6||D===26||D===27){c=g=T;continue t}A=A.parentNode}}c=c.return}Ys(function(){var H=g,J=Kn(o),nt=[];t:{var K=I0.get(i);if(K!==void 0){var X=Bi,pt=i;switch(i){case"keypress":if(ca(o)===0)break t;case"keydown":case"keyup":X=Uh;break;case"focusin":pt="focus",X=fa;break;case"focusout":pt="blur",X=fa;break;case"beforeblur":case"afterblur":X=fa;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ch;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=_;break;case b0:case A0:case S0:X=Vh;break;case w0:X=S;break;case"scroll":case"scrollend":X=du;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=Nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=us;break;case"toggle":case"beforetoggle":X=xt}var Et=(r&4)!==0,re=!Et&&(i==="scroll"||i==="scrollend"),U=Et?K!==null?K+"Capture":null:K;Et=[];for(var P=H,q;P!==null;){var et=P;if(q=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||q===null||U===null||(et=mi(P,U),et!=null&&Et.push(Hu(P,et,q))),re)break;P=P.return}0<Et.length&&(K=new X(K,pt,null,o,J),nt.push({event:K,listeners:Et}))}}if((r&7)===0){t:{if(K=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",K&&o!==cu&&(pt=o.relatedTarget||o.fromElement)&&(Mi(pt)||pt[Vi]))break t;if((X||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,X?(pt=o.relatedTarget||o.toElement,X=H,pt=pt?Mi(pt):null,pt!==null&&(re=l(pt),Et=pt.tag,pt!==re||Et!==5&&Et!==27&&Et!==6)&&(pt=null)):(X=null,pt=H),X!==pt)){if(Et=mu,et="onMouseLeave",U="onMouseEnter",P="mouse",(i==="pointerout"||i==="pointerover")&&(Et=us,et="onPointerLeave",U="onPointerEnter",P="pointer"),re=X==null?K:Nn(X),q=pt==null?K:Nn(pt),K=new Et(et,P+"leave",X,o,J),K.target=re,K.relatedTarget=q,et=null,Mi(J)===H&&(Et=new Et(U,P+"enter",pt,o,J),Et.target=q,Et.relatedTarget=re,et=Et),re=et,X&&pt)e:{for(Et=rD,U=X,P=pt,q=0,et=U;et;et=Et(et))q++;et=0;for(var vt=P;vt;vt=Et(vt))et++;for(;0<q-et;)U=Et(U),q--;for(;0<et-q;)P=Et(P),et--;for(;q--;){if(U===P||P!==null&&U===P.alternate){Et=U;break e}U=Et(U),P=Et(P)}Et=null}else Et=null;X!==null&&YE(nt,K,X,Et,!1),pt!==null&&re!==null&&YE(nt,re,pt,Et,!0)}}t:{if(K=H?Nn(H):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var Gt=h0;else if(u0(K))if(f0)Gt=g2;else{Gt=m2;var yt=d2}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&_o(H.elementType)&&(Gt=h0):Gt=p2;if(Gt&&(Gt=Gt(i,H))){c0(nt,Gt,o,J);break t}yt&&yt(i,K,H),i==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&ou(K,"number",K.value)}switch(yt=H?Nn(H):window,i){case"focusin":(u0(yt)||yt.contentEditable==="true")&&(Io=yt,Hm=H,vu=null);break;case"focusout":vu=Hm=Io=null;break;case"mousedown":Gm=!0;break;case"contextmenu":case"mouseup":case"dragend":Gm=!1,T0(nt,o,J);break;case"selectionchange":if(_2)break;case"keydown":case"keyup":T0(nt,o,J)}var Nt;if(Qt)t:{switch(i){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else wo?da(i,o)&&(Ut="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ut="onCompositionStart");Ut&&(qi&&o.locale!=="ko"&&(wo||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&wo&&(Nt=fu()):(zi=J,hu="value"in zi?zi.value:zi.textContent,wo=!0)),yt=Cf(H,Ut),0<yt.length&&(Ut=new Fi(Ut,i,null,o,J),nt.push({event:Ut,listeners:yt}),Nt?Ut.data=Nt:(Nt=So(o),Nt!==null&&(Ut.data=Nt)))),(Nt=Yn?u2(i,o):c2(i,o))&&(Ut=Cf(H,"onBeforeInput"),0<Ut.length&&(yt=new Fi("onBeforeInput","beforeinput",null,o,J),nt.push({event:yt,listeners:Ut}),yt.data=Nt)),eD(nt,i,H,o,J)}KE(nt,r)})}function Hu(i,r,o){return{instance:i,listener:r,currentTarget:o}}function Cf(i,r){for(var o=r+"Capture",c=[];i!==null;){var m=i,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=mi(i,o),m!=null&&c.unshift(Hu(i,m,g)),m=mi(i,r),m!=null&&c.push(Hu(i,m,g))),i.tag===3)return c;i=i.return}return[]}function rD(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function YE(i,r,o,c,m){for(var g=r._reactName,T=[];o!==null&&o!==c;){var A=o,D=A.alternate,H=A.stateNode;if(A=A.tag,D!==null&&D===c)break;A!==5&&A!==26&&A!==27||H===null||(D=H,m?(H=mi(o,g),H!=null&&T.unshift(Hu(o,H,D))):m||(H=mi(o,g),H!=null&&T.push(Hu(o,H,D)))),o=o.return}T.length!==0&&i.push({event:r,listeners:T})}var aD=/\r\n?/g,oD=/\u0000|\uFFFD/g;function XE(i){return(typeof i=="string"?i:""+i).replace(aD,`
`).replace(oD,"")}function $E(i,r){return r=XE(r),XE(i)===r}function se(i,r,o,c,m,g){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Sn(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Sn(i,""+c);break;case"className":Mn(i,"class",c);break;case"tabIndex":Mn(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(i,o,c);break;case"style":uu(i,c,g);break;case"data":if(r!=="object"){Mn(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=vo(""+c),i.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&se(i,r,"name",m.name,m,null),se(i,r,"formEncType",m.formEncType,m,null),se(i,r,"formMethod",m.formMethod,m,null),se(i,r,"formTarget",m.formTarget,m,null)):(se(i,r,"encType",m.encType,m,null),se(i,r,"method",m.method,m,null),se(i,r,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=vo(""+c),i.setAttribute(o,c);break;case"onClick":c!=null&&(i.onclick=di);break;case"onScroll":c!=null&&Ot("scroll",i);break;case"onScrollEnd":c!=null&&Ot("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}o=vo(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""+c):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":c===!0?i.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,c):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(o,c):i.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(o):i.setAttribute(o,c);break;case"popover":Ot("beforetoggle",i),Ot("toggle",i),go(i,"popover",c);break;case"xlinkActuate":Ve(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ve(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ve(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ve(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ve(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ve(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ve(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ve(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ve(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":go(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=xh.get(o)||o,go(i,o,c))}}function gg(i,r,o,c,m,g){switch(o){case"style":uu(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof c=="string"?Sn(i,c):(typeof c=="number"||typeof c=="bigint")&&Sn(i,""+c);break;case"onScroll":c!=null&&Ot("scroll",i);break;case"onScrollEnd":c!=null&&Ot("scrollend",i);break;case"onClick":c!=null&&(i.onclick=di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nu.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),r=o.slice(2,m?o.length-7:void 0),g=i[Qe]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(r,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,c,m);break t}o in i?i[o]=c:c===!0?i.setAttribute(o,""):go(i,o,c)}}}function nn(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",i),Ot("load",i);var c=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:se(i,r,g,T,o,null)}}m&&se(i,r,"srcSet",o.srcSet,o,null),c&&se(i,r,"src",o.src,o,null);return;case"input":Ot("invalid",i);var A=g=T=m=null,D=null,H=null;for(c in o)if(o.hasOwnProperty(c)){var J=o[c];if(J!=null)switch(c){case"name":m=J;break;case"type":T=J;break;case"checked":D=J;break;case"defaultChecked":H=J;break;case"value":g=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:se(i,r,c,J,o,null)}}wh(i,g,A,D,H,T,m,!1);return;case"select":Ot("invalid",i),c=T=g=null;for(m in o)if(o.hasOwnProperty(m)&&(A=o[m],A!=null))switch(m){case"value":g=A;break;case"defaultValue":T=A;break;case"multiple":c=A;default:se(i,r,m,A,o,null)}r=g,o=T,i.multiple=!!c,r!=null?Hs(i,!!c,r,!1):o!=null&&Hs(i,!!c,o,!0);return;case"textarea":Ot("invalid",i),g=m=c=null;for(T in o)if(o.hasOwnProperty(T)&&(A=o[T],A!=null))switch(T){case"value":c=A;break;case"defaultValue":m=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:se(i,r,T,A,o,null)}Gs(i,c,m,g);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:se(i,r,D,c,o,null)}return;case"dialog":Ot("beforetoggle",i),Ot("toggle",i),Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":Ot("load",i);break;case"video":case"audio":for(c=0;c<qu.length;c++)Ot(qu[c],i);break;case"image":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"embed":case"source":case"link":Ot("error",i),Ot("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(c=o[H],c!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:se(i,r,H,c,o,null)}return;default:if(_o(r)){for(J in o)o.hasOwnProperty(J)&&(c=o[J],c!==void 0&&gg(i,r,J,c,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(c=o[A],c!=null&&se(i,r,A,c,o,null))}function lD(i,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,A=null,D=null,H=null,J=null;for(X in o){var nt=o[X];if(o.hasOwnProperty(X)&&nt!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=nt;default:c.hasOwnProperty(X)||se(i,r,X,null,c,nt)}}for(var K in c){var X=c[K];if(nt=o[K],c.hasOwnProperty(K)&&(X!=null||nt!=null))switch(K){case"type":g=X;break;case"name":m=X;break;case"checked":H=X;break;case"defaultChecked":J=X;break;case"value":T=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:X!==nt&&se(i,r,K,X,c,nt)}}yo(i,T,A,D,H,J,g,m);return;case"select":X=T=A=K=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":X=D;default:c.hasOwnProperty(g)||se(i,r,g,null,c,D)}for(m in c)if(g=c[m],D=o[m],c.hasOwnProperty(m)&&(g!=null||D!=null))switch(m){case"value":K=g;break;case"defaultValue":A=g;break;case"multiple":T=g;default:g!==D&&se(i,r,m,g,c,D)}r=A,o=T,c=X,K!=null?Hs(i,!!o,K,!1):!!c!=!!o&&(r!=null?Hs(i,!!o,r,!0):Hs(i,!!o,o?[]:"",!1));return;case"textarea":X=K=null;for(A in o)if(m=o[A],o.hasOwnProperty(A)&&m!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:se(i,r,A,null,c,m)}for(T in c)if(m=c[T],g=o[T],c.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":K=m;break;case"defaultValue":X=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==g&&se(i,r,T,m,c,g)}Ih(i,K,X);return;case"option":for(var pt in o)if(K=o[pt],o.hasOwnProperty(pt)&&K!=null&&!c.hasOwnProperty(pt))switch(pt){case"selected":i.selected=!1;break;default:se(i,r,pt,null,c,K)}for(D in c)if(K=c[D],X=o[D],c.hasOwnProperty(D)&&K!==X&&(K!=null||X!=null))switch(D){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:se(i,r,D,K,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in o)K=o[Et],o.hasOwnProperty(Et)&&K!=null&&!c.hasOwnProperty(Et)&&se(i,r,Et,null,c,K);for(H in c)if(K=c[H],X=o[H],c.hasOwnProperty(H)&&K!==X&&(K!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:se(i,r,H,K,c,X)}return;default:if(_o(r)){for(var re in o)K=o[re],o.hasOwnProperty(re)&&K!==void 0&&!c.hasOwnProperty(re)&&gg(i,r,re,void 0,c,K);for(J in c)K=c[J],X=o[J],!c.hasOwnProperty(J)||K===X||K===void 0&&X===void 0||gg(i,r,J,K,c,X);return}}for(var U in o)K=o[U],o.hasOwnProperty(U)&&K!=null&&!c.hasOwnProperty(U)&&se(i,r,U,null,c,K);for(nt in c)K=c[nt],X=o[nt],!c.hasOwnProperty(nt)||K===X||K==null&&X==null||se(i,r,nt,K,c,X)}function WE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uD(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],g=m.transferSize,T=m.initiatorType,A=m.duration;if(g&&A&&WE(T)){for(T=0,A=m.responseEnd,c+=1;c<o.length;c++){var D=o[c],H=D.startTime;if(H>A)break;var J=D.transferSize,nt=D.initiatorType;J&&WE(nt)&&(D=D.responseEnd,T+=J*(D<A?1:(A-H)/(D-H)))}if(--c,r+=8*(g+T)/(m.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var yg=null,_g=null;function Df(i){return i.nodeType===9?i:i.ownerDocument}function ZE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JE(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function vg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Tg=null;function cD(){var i=window.event;return i&&i.type==="popstate"?i===Tg?!1:(Tg=i,!0):(Tg=null,!1)}var tb=typeof setTimeout=="function"?setTimeout:void 0,hD=typeof clearTimeout=="function"?clearTimeout:void 0,eb=typeof Promise=="function"?Promise:void 0,fD=typeof queueMicrotask=="function"?queueMicrotask:typeof eb<"u"?function(i){return eb.resolve(null).then(i).catch(dD)}:tb;function dD(i){setTimeout(function(){throw i})}function mr(i){return i==="head"}function nb(i,r){var o=r,c=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){i.removeChild(m),Jo(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Gu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Gu(o);for(var g=o.firstChild;g;){var T=g.nextSibling,A=g.nodeName;g[Ni]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=T}}else o==="body"&&Gu(i.ownerDocument.body);o=m}while(o);Jo(r)}function ib(i,r){var o=i;i=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=c}while(o)}function Eg(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Eg(o),po(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function mD(i,r,o,c){for(;i.nodeType===1;){var m=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ni])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=ei(i.nextSibling),i===null)break}return null}function pD(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=ei(i.nextSibling),i===null))return null;return i}function sb(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ei(i.nextSibling),i===null))return null;return i}function bg(i){return i.data==="$?"||i.data==="$~"}function Ag(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function gD(i,r){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function ei(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Sg=null;function rb(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(r===0)return ei(i.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}i=i.nextSibling}return null}function ab(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return i;r--}else o!=="/$"&&o!=="/&"||r++}i=i.previousSibling}return null}function ob(i,r,o){switch(r=Df(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Gu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);po(i)}var ni=new Map,lb=new Set;function Vf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ss=at.d;at.d={f:yD,r:_D,D:vD,C:TD,L:ED,m:bD,X:SD,S:AD,M:wD};function yD(){var i=Ss.f(),r=bf();return i||r}function _D(i){var r=Gn(i);r!==null&&r.tag===5&&r.type==="form"?wT(r):Ss.r(i)}var $o=typeof document>"u"?null:document;function ub(i,r,o){var c=$o;if(c&&typeof r=="string"&&r){var m=An(r);m='link[rel="'+i+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),lb.has(m)||(lb.add(m),i={rel:i,crossOrigin:o,href:r},c.querySelector(m)===null&&(r=c.createElement("link"),nn(r,"link",i),De(r),c.head.appendChild(r)))}}function vD(i){Ss.D(i),ub("dns-prefetch",i,null)}function TD(i,r){Ss.C(i,r),ub("preconnect",i,r)}function ED(i,r,o){Ss.L(i,r,o);var c=$o;if(c&&i&&r){var m='link[rel="preload"][as="'+An(r)+'"]';r==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+An(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+An(o.imageSizes)+'"]')):m+='[href="'+An(i)+'"]';var g=m;switch(r){case"style":g=Wo(i);break;case"script":g=Zo(i)}ni.has(g)||(i=v({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),ni.set(g,i),c.querySelector(m)!==null||r==="style"&&c.querySelector(Ku(g))||r==="script"&&c.querySelector(Qu(g))||(r=c.createElement("link"),nn(r,"link",i),De(r),c.head.appendChild(r)))}}function bD(i,r){Ss.m(i,r);var o=$o;if(o&&i){var c=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+An(c)+'"][href="'+An(i)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Zo(i)}if(!ni.has(g)&&(i=v({rel:"modulepreload",href:i},r),ni.set(g,i),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Qu(g)))return}c=o.createElement("link"),nn(c,"link",i),De(c),o.head.appendChild(c)}}}function AD(i,r,o){Ss.S(i,r,o);var c=$o;if(c&&i){var m=Pi(c).hoistableStyles,g=Wo(i);r=r||"default";var T=m.get(g);if(!T){var A={loading:0,preload:null};if(T=c.querySelector(Ku(g)))A.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":r},o),(o=ni.get(g))&&wg(i,o);var D=T=c.createElement("link");De(D),nn(D,"link",i),D._p=new Promise(function(H,J){D.onload=H,D.onerror=J}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Nf(T,r,c)}T={type:"stylesheet",instance:T,count:1,state:A},m.set(g,T)}}}function SD(i,r){Ss.X(i,r);var o=$o;if(o&&i){var c=Pi(o).hoistableScripts,m=Zo(i),g=c.get(m);g||(g=o.querySelector(Qu(m)),g||(i=v({src:i,async:!0},r),(r=ni.get(m))&&Ig(i,r),g=o.createElement("script"),De(g),nn(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function wD(i,r){Ss.M(i,r);var o=$o;if(o&&i){var c=Pi(o).hoistableScripts,m=Zo(i),g=c.get(m);g||(g=o.querySelector(Qu(m)),g||(i=v({src:i,async:!0,type:"module"},r),(r=ni.get(m))&&Ig(i,r),g=o.createElement("script"),De(g),nn(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function cb(i,r,o,c){var m=(m=Vt.current)?Vf(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Wo(o.href),o=Pi(m).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Wo(o.href);var g=Pi(m).hoistableStyles,T=g.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=m.querySelector(Ku(i)))&&!g._p&&(T.instance=g,T.state.loading=5),ni.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ni.set(i,o),g||ID(m,i,o,T.state))),r&&c===null)throw Error(s(528,""));return T}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Zo(o),o=Pi(m).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Wo(i){return'href="'+An(i)+'"'}function Ku(i){return'link[rel="stylesheet"]['+i+"]"}function hb(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function ID(i,r,o,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),nn(r,"link",o),De(r),i.head.appendChild(r))}function Zo(i){return'[src="'+An(i)+'"]'}function Qu(i){return"script[async]"+i}function fb(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+An(o.href)+'"]');if(c)return r.instance=c,De(c),c;var m=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),De(c),nn(c,"style",m),Nf(c,o.precedence,i),r.instance=c;case"stylesheet":m=Wo(o.href);var g=i.querySelector(Ku(m));if(g)return r.state.loading|=4,r.instance=g,De(g),g;c=hb(o),(m=ni.get(m))&&wg(c,m),g=(i.ownerDocument||i).createElement("link"),De(g);var T=g;return T._p=new Promise(function(A,D){T.onload=A,T.onerror=D}),nn(g,"link",c),r.state.loading|=4,Nf(g,o.precedence,i),r.instance=g;case"script":return g=Zo(o.src),(m=i.querySelector(Qu(g)))?(r.instance=m,De(m),m):(c=o,(m=ni.get(g))&&(c=v({},o),Ig(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),De(m),nn(m,"link",c),i.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Nf(c,o.precedence,i));return r.instance}function Nf(i,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,T=0;T<c.length;T++){var A=c[T];if(A.dataset.precedence===r)g=A;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function wg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Ig(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Mf=null;function db(i,r,o){if(Mf===null){var c=new Map,m=Mf=new Map;m.set(o,c)}else m=Mf,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(i))return c;for(c.set(i,null),o=o.getElementsByTagName(i),m=0;m<o.length;m++){var g=o[m];if(!(g[Ni]||g[Ce]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(r)||"";T=i+T;var A=c.get(T);A?A.push(g):c.set(T,[g])}}return c}function mb(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function RD(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function pb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function xD(i,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Wo(c.href),g=r.querySelector(Ku(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Pf.bind(i),r.then(i,i)),o.state.loading|=4,o.instance=g,De(g);return}g=r.ownerDocument||r,c=hb(c),(m=ni.get(m))&&wg(c,m),g=g.createElement("link"),De(g);var T=g;T._p=new Promise(function(A,D){T.onload=A,T.onerror=D}),nn(g,"link",c),o.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Pf.bind(i),r.addEventListener("load",o),r.addEventListener("error",o))}}var Rg=0;function CD(i,r){return i.stylesheets&&i.count===0&&kf(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var c=setTimeout(function(){if(i.stylesheets&&kf(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+r);0<i.imgBytes&&Rg===0&&(Rg=62500*uD());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&kf(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>Rg?50:800)+r);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function Pf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Of=null;function kf(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Of=new Map,r.forEach(DD,i),Of=null,Pf.call(i))}function DD(i,r){if(!(r.state.loading&4)){var o=Of.get(i);if(o)var c=o.get(null);else{o=new Map,Of.set(i,o);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),c=T)}c&&o.set(null,c)}m=r.instance,T=m.getAttribute("data-precedence"),g=o.get(T)||c,g===c&&o.set(null,m),o.set(T,m),this.count++,c=Pf.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),r.state.loading|=4}}var Yu={$$typeof:G,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function VD(i,r,o,c,m,g,T,A,D){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function gb(i,r,o,c,m,g,T,A,D,H,J,nt){return i=new VD(i,r,o,T,D,H,J,nt,A),r=1,g===!0&&(r|=24),g=On(3,null,null,r),i.current=g,g.stateNode=i,r=ap(),r.refCount++,i.pooledCache=r,r.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:r},cp(g),i}function yb(i){return i?(i=Co,i):Co}function _b(i,r,o,c,m,g){m=yb(m),c.context===null?c.context=m:c.pendingContext=m,c=ir(r),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=sr(i,c,r),o!==null&&(Cn(o,i,r),Iu(o,i,r))}function vb(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function xg(i,r){vb(i,r),(i=i.alternate)&&vb(i,r)}function Tb(i){if(i.tag===13||i.tag===31){var r=ga(i,67108864);r!==null&&Cn(r,i,67108864),xg(i,67108864)}}function Eb(i){if(i.tag===13||i.tag===31){var r=Bn();r=sa(r);var o=ga(i,r);o!==null&&Cn(o,i,r),xg(i,r)}}var Lf=!0;function ND(i,r,o,c){var m=W.T;W.T=null;var g=at.p;try{at.p=2,Cg(i,r,o,c)}finally{at.p=g,W.T=m}}function MD(i,r,o,c){var m=W.T;W.T=null;var g=at.p;try{at.p=8,Cg(i,r,o,c)}finally{at.p=g,W.T=m}}function Cg(i,r,o,c){if(Lf){var m=Dg(c);if(m===null)pg(i,r,c,Uf,o),Ab(i,c);else if(OD(m,i,r,o,c))c.stopPropagation();else if(Ab(i,c),r&4&&-1<PD.indexOf(i)){for(;m!==null;){var g=Gn(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=xi(g.pendingLanes);if(T!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var D=1<<31-Ae(T);A.entanglements[1]|=D,T&=~D}Qi(g),(Yt&6)===0&&(Tf=pn()+500,Fu(0))}}break;case 31:case 13:A=ga(g,2),A!==null&&Cn(A,g,2),bf(),xg(g,2)}if(g=Dg(c),g===null&&pg(i,r,c,Uf,o),g===m)break;m=g}m!==null&&c.stopPropagation()}else pg(i,r,c,null,o)}}function Dg(i){return i=Kn(i),Vg(i)}var Uf=null;function Vg(i){if(Uf=null,i=Mi(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=u(r),i!==null)return i;i=null}else if(o===31){if(i=h(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Uf=i,null}function bb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ta()){case Wl:return 2;case Zl:return 8;case Fs:case Lm:return 32;case ph:return 268435456;default:return 32}default:return 32}}var Ng=!1,pr=null,gr=null,yr=null,Xu=new Map,$u=new Map,_r=[],PD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ab(i,r){switch(i){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Xu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(r.pointerId)}}function Wu(i,r,o,c,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},r!==null&&(r=Gn(r),r!==null&&Tb(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),i)}function OD(i,r,o,c,m){switch(r){case"focusin":return pr=Wu(pr,i,r,o,c,m),!0;case"dragenter":return gr=Wu(gr,i,r,o,c,m),!0;case"mouseover":return yr=Wu(yr,i,r,o,c,m),!0;case"pointerover":var g=m.pointerId;return Xu.set(g,Wu(Xu.get(g)||null,i,r,o,c,m)),!0;case"gotpointercapture":return g=m.pointerId,$u.set(g,Wu($u.get(g)||null,i,r,o,c,m)),!0}return!1}function Sb(i){var r=Mi(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){i.blockedOn=r,hi(i.priority,function(){Eb(o)});return}}else if(r===31){if(r=h(o),r!==null){i.blockedOn=r,hi(i.priority,function(){Eb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zf(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=Dg(i.nativeEvent);if(o===null){o=i.nativeEvent;var c=new o.constructor(o.type,o);cu=c,o.target.dispatchEvent(c),cu=null}else return r=Gn(o),r!==null&&Tb(r),i.blockedOn=o,!1;r.shift()}return!0}function wb(i,r,o){zf(i)&&o.delete(r)}function kD(){Ng=!1,pr!==null&&zf(pr)&&(pr=null),gr!==null&&zf(gr)&&(gr=null),yr!==null&&zf(yr)&&(yr=null),Xu.forEach(wb),$u.forEach(wb)}function Bf(i,r){i.blockedOn===r&&(i.blockedOn=null,Ng||(Ng=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kD)))}var jf=null;function Ib(i){jf!==i&&(jf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){jf===i&&(jf=null);for(var r=0;r<i.length;r+=3){var o=i[r],c=i[r+1],m=i[r+2];if(typeof c!="function"){if(Vg(c||o)===null)continue;break}var g=Gn(o);g!==null&&(i.splice(r,3),r-=3,Dp(g,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function Jo(i){function r(D){return Bf(D,i)}pr!==null&&Bf(pr,i),gr!==null&&Bf(gr,i),yr!==null&&Bf(yr,i),Xu.forEach(r),$u.forEach(r);for(var o=0;o<_r.length;o++){var c=_r[o];c.blockedOn===i&&(c.blockedOn=null)}for(;0<_r.length&&(o=_r[0],o.blockedOn===null);)Sb(o),o.blockedOn===null&&_r.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],T=m[Qe]||null;if(typeof g=="function")T||Ib(o);else if(T){var A=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[Qe]||null)A=T.formAction;else if(Vg(m)!==null)continue}else A=T.action;typeof A=="function"?o[c+1]=A:(o.splice(c,3),c-=3),Ib(o)}}}function Rb(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function Mg(i){this._internalRoot=i}Ff.prototype.render=Mg.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,c=Bn();_b(o,c,i,r,null,null)},Ff.prototype.unmount=Mg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;_b(i.current,2,null,i,null,null),bf(),r[Vi]=null}};function Ff(i){this._internalRoot=i}Ff.prototype.unstable_scheduleHydration=function(i){if(i){var r=Eh();i={blockedOn:null,target:i,priority:r};for(var o=0;o<_r.length&&r!==0&&r<_r[o].priority;o++);_r.splice(o,0,i),o===0&&Sb(i)}};var xb=t.version;if(xb!=="19.2.3")throw Error(s(527,xb,"19.2.3"));at.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var LD={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qf.isDisabled&&qf.supportsFiber)try{ui=qf.inject(LD),We=qf}catch{}}return Ju.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,c="",m=OT,g=kT,T=LT;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=gb(i,1,!1,null,null,o,c,null,m,g,T,Rb),i[Vi]=r.current,mg(i),new Mg(r)},Ju.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var c=!1,m="",g=OT,T=kT,A=LT,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),r=gb(i,1,!0,r,o??null,c,m,D,g,T,A,Rb),r.context=yb(null),o=r.current,c=Bn(),c=sa(c),m=ir(c),m.callback=null,sr(o,m,c),o=c,r.current.lanes=o,na(r,o),Qi(r),i[Vi]=r.current,mg(i),new Ff(r)},Ju.version="19.2.3",Ju}var Ub;function YD(){if(Ub)return kg.exports;Ub=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),kg.exports=QD(),kg.exports}var XD=YD();const $D=rw(XD),WD=()=>{};var zb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},ZD=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const a=n[e++];if(a<128)t[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[e++];t[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[e++],u=n[e++],h=n[e++],d=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;t[s++]=String.fromCharCode(55296+(d>>10)),t[s++]=String.fromCharCode(56320+(d&1023))}else{const l=n[e++],u=n[e++];t[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return t.join("")},ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,d=a+2<n.length,p=d?n[a+2]:0,y=l>>2,v=(l&3)<<4|h>>4;let b=(h&15)<<2|p>>6,w=p&63;d||(w=64,u||(b=64)),s.push(e[y],e[v],e[b],e[w])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(aw(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):ZD(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=e[n.charAt(a++)],h=a<n.length?e[n.charAt(a)]:0;++a;const p=a<n.length?e[n.charAt(a)]:64;++a;const v=a<n.length?e[n.charAt(a)]:64;if(++a,l==null||h==null||p==null||v==null)throw new JD;const b=l<<2|h>>4;if(s.push(b),p!==64){const w=h<<4&240|p>>2;if(s.push(w),v!==64){const N=p<<6&192|v;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class JD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tV=function(n){const t=aw(n);return ow.encodeByteArray(t,!0)},wd=function(n){return tV(n).replace(/\./g,"")},lw=function(n){try{return ow.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=()=>uw().__FIREBASE_DEFAULTS__,nV=()=>{if(typeof process>"u"||typeof zb>"u")return;const n=zb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&lw(n[1]);return t&&JSON.parse(t)},nm=()=>{try{return WD()||eV()||nV()||iV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cw=n=>{var t,e;return(e=(t=nm())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},sV=n=>{const t=cw(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},hw=()=>{var n;return(n=nm())==null?void 0:n.config},fw=n=>{var t;return(t=nm())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function w_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[wd(JSON.stringify(e)),wd(JSON.stringify(u)),""].join(".")}const fc={};function oV(){const n={prod:[],emulator:[]};for(const t of Object.keys(fc))fc[t]?n.emulator.push(t):n.prod.push(t);return n}function lV(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Bb=!1;function dw(n,t){if(typeof window>"u"||typeof document>"u"||!ao(window.location.host)||fc[n]===t||fc[n]||Bb)return;fc[n]=t;function e(b){return`__firebase__banner__${b}`}const s="__firebase__banner",l=oV().prod.length>0;function u(){const b=document.getElementById(s);b&&b.remove()}function h(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Bb=!0,u()},b}function y(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=lV(s),w=e("text"),N=document.getElementById(w)||document.createElement("span"),k=e("learnmore"),z=document.getElementById(k)||document.createElement("a"),Q=e("preprendIcon"),$=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const G=b.element;h(G),y(z,k);const st=p();d($,Q),G.append($,N,z,st),document.body.appendChild(G)}l?(N.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function mw(){var t;const n=(t=nm())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hV(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function fV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dV(){const n=Ge();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pw(){return!mw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gw(){return!mw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function yw(){try{return typeof indexedDB=="object"}catch{return!1}}function mV(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)==null?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="FirebaseError";class Us extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=pV,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xc.prototype.create)}}class Xc{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],u=l?gV(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Us(a,h,s)}}function gV(n,t){return n.replace(yV,(e,s)=>{const a=t[s];return a!=null?String(a):`<${s}?>`})}const yV=/\{\$([^}]+)}/g;function _V(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function zr(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const a of e){if(!s.includes(a))return!1;const l=n[a],u=t[a];if(jb(l)&&jb(u)){if(!zr(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!e.includes(a))return!1;return!0}function jb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){const t=[];for(const[e,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function vV(n,t){const e=new TV(n,t);return e.subscribe.bind(e)}class TV{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,s){let a;if(t===void 0&&e===void 0&&s===void 0)throw new Error("Missing Observer.");EV(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:s},a.next===void 0&&(a.next=Bg),a.error===void 0&&(a.error=Bg),a.complete===void 0&&(a.complete=Bg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EV(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Bg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n){return n&&n._delegate?n._delegate:n}class $a{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new rV;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(SV(t))try{this.getOrInitializeService({instanceIdentifier:Va})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(t=Va){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Va){return this.instances.has(t)}getOptions(t=Va){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(t,e){const s=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(s)??new Set;a.add(t),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&t(l,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const a of s)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:AV(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Va){return this.component?this.component.multipleInstances?t:Va:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AV(n){return n===Va?void 0:n}function SV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new bV(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(zt||(zt={}));const IV={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},RV=zt.INFO,xV={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},CV=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),a=xV[t];if(a)console[a](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class I_{constructor(t){this.name=t,this._logLevel=RV,this._logHandler=CV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in zt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?IV[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...t),this._logHandler(this,zt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...t),this._logHandler(this,zt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...t),this._logHandler(this,zt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...t),this._logHandler(this,zt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...t),this._logHandler(this,zt.ERROR,...t)}}const DV=(n,t)=>t.some(e=>n instanceof e);let Fb,qb;function VV(){return Fb||(Fb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NV(){return qb||(qb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _w=new WeakMap,yy=new WeakMap,vw=new WeakMap,jg=new WeakMap,R_=new WeakMap;function MV(n){const t=new Promise((e,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{e(Nr(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&_w.set(e,n)}).catch(()=>{}),R_.set(t,n),t}function PV(n){if(yy.has(n))return;const t=new Promise((e,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{e(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});yy.set(n,t)}let _y={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return yy.get(n);if(t==="objectStoreNames")return n.objectStoreNames||vw.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Nr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function OV(n){_y=n(_y)}function kV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(Fg(this),t,...e);return vw.set(s,t.sort?t.sort():[t]),Nr(s)}:NV().includes(n)?function(...t){return n.apply(Fg(this),t),Nr(_w.get(this))}:function(...t){return Nr(n.apply(Fg(this),t))}}function LV(n){return typeof n=="function"?kV(n):(n instanceof IDBTransaction&&PV(n),DV(n,VV())?new Proxy(n,_y):n)}function Nr(n){if(n instanceof IDBRequest)return MV(n);if(jg.has(n))return jg.get(n);const t=LV(n);return t!==n&&(jg.set(n,t),R_.set(t,n)),t}const Fg=n=>R_.get(n);function UV(n,t,{blocked:e,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,t),h=Nr(u);return s&&u.addEventListener("upgradeneeded",d=>{s(Nr(u.result),d.oldVersion,d.newVersion,Nr(u.transaction),d)}),e&&u.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const zV=["get","getKey","getAll","getAllKeys","count"],BV=["put","add","delete","clear"],qg=new Map;function Hb(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(qg.get(t))return qg.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,a=BV.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(a||zV.includes(e)))return;const l=async function(u,...h){const d=this.transaction(u,a?"readwrite":"readonly");let p=d.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[e](...h),a&&d.done]))[0]};return qg.set(t,l),l}OV(n=>({...n,get:(t,e,s)=>Hb(t,e)||n.get(t,e,s),has:(t,e)=>!!Hb(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(FV(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function FV(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const vy="@firebase/app",Gb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new I_("@firebase/app"),qV="@firebase/app-compat",HV="@firebase/analytics-compat",GV="@firebase/analytics",KV="@firebase/app-check-compat",QV="@firebase/app-check",YV="@firebase/auth",XV="@firebase/auth-compat",$V="@firebase/database",WV="@firebase/data-connect",ZV="@firebase/database-compat",JV="@firebase/functions",tN="@firebase/functions-compat",eN="@firebase/installations",nN="@firebase/installations-compat",iN="@firebase/messaging",sN="@firebase/messaging-compat",rN="@firebase/performance",aN="@firebase/performance-compat",oN="@firebase/remote-config",lN="@firebase/remote-config-compat",uN="@firebase/storage",cN="@firebase/storage-compat",hN="@firebase/firestore",fN="@firebase/ai",dN="@firebase/firestore-compat",mN="firebase",pN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="[DEFAULT]",gN={[vy]:"fire-core",[qV]:"fire-core-compat",[GV]:"fire-analytics",[HV]:"fire-analytics-compat",[QV]:"fire-app-check",[KV]:"fire-app-check-compat",[YV]:"fire-auth",[XV]:"fire-auth-compat",[$V]:"fire-rtdb",[WV]:"fire-data-connect",[ZV]:"fire-rtdb-compat",[JV]:"fire-fn",[tN]:"fire-fn-compat",[eN]:"fire-iid",[nN]:"fire-iid-compat",[iN]:"fire-fcm",[sN]:"fire-fcm-compat",[rN]:"fire-perf",[aN]:"fire-perf-compat",[oN]:"fire-rc",[lN]:"fire-rc-compat",[uN]:"fire-gcs",[cN]:"fire-gcs-compat",[hN]:"fire-fst",[dN]:"fire-fst-compat",[fN]:"fire-vertex","fire-js":"fire-js",[mN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Map,yN=new Map,Ey=new Map;function Kb(n,t){try{n.container.addComponent(t)}catch(e){Ds.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function bl(n){const t=n.name;if(Ey.has(t))return Ds.debug(`There were multiple attempts to register component ${t}.`),!1;Ey.set(t,n);for(const e of Id.values())Kb(e,n);for(const e of yN.values())Kb(e,n);return!0}function im(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Si(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Xc("app","Firebase",_N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(t,e,s){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=pN;function Tw(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s={name:Ty,automaticDataCollectionEnabled:!0,...t},a=s.name;if(typeof a!="string"||!a)throw Mr.create("bad-app-name",{appName:String(a)});if(e||(e=hw()),!e)throw Mr.create("no-options");const l=Id.get(a);if(l){if(zr(e,l.options)&&zr(s,l.config))return l;throw Mr.create("duplicate-app",{appName:a})}const u=new wV(a);for(const d of Ey.values())u.addComponent(d);const h=new vN(e,s,u);return Id.set(a,h),h}function Ew(n=Ty){const t=Id.get(n);if(!t&&n===Ty&&hw())return Tw();if(!t)throw Mr.create("no-app",{appName:n});return t}function Pr(n,t,e){let s=gN[n]??n;e&&(s+=`-${e}`);const a=s.match(/\s|\//),l=t.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${t}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ds.warn(u.join(" "));return}bl(new $a(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="firebase-heartbeat-database",EN=1,Rc="firebase-heartbeat-store";let Hg=null;function bw(){return Hg||(Hg=UV(TN,EN,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Rc)}catch(e){console.warn(e)}}}}).catch(n=>{throw Mr.create("idb-open",{originalErrorMessage:n.message})})),Hg}async function bN(n){try{const e=(await bw()).transaction(Rc),s=await e.objectStore(Rc).get(Aw(n));return await e.done,s}catch(t){if(t instanceof Us)Ds.warn(t.message);else{const e=Mr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ds.warn(e.message)}}}async function Qb(n,t){try{const s=(await bw()).transaction(Rc,"readwrite");await s.objectStore(Rc).put(t,Aw(n)),await s.done}catch(e){if(e instanceof Us)Ds.warn(e.message);else{const s=Mr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(s.message)}}}function Aw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=1024,SN=30;class wN{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new RN(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Yb();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>SN){const u=xN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ds.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yb(),{heartbeatsToSend:s,unsentEntries:a}=IN(this._heartbeatsCache.heartbeats),l=wd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ds.warn(e),""}}}function Yb(){return new Date().toISOString().substring(0,10)}function IN(n,t=AN){const e=[];let s=n.slice();for(const a of n){const l=e.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Xb(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Xb(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class RN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yw()?mV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await bN(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Qb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Qb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Xb(n){return wd(JSON.stringify({version:2,heartbeats:n})).length}function xN(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let s=1;s<n.length;s++)n[s].date<e&&(e=n[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){bl(new $a("platform-logger",t=>new jV(t),"PRIVATE")),bl(new $a("heartbeat",t=>new wN(t),"PRIVATE")),Pr(vy,Gb,n),Pr(vy,Gb,"esm2020"),Pr("fire-js","")}CN("");var $b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Or,Sw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,I){function C(){}C.prototype=I.prototype,R.F=I.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(M,V,B){for(var x=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)x[jt-2]=arguments[jt];return I.prototype[V].apply(M,x)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,e),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,I,C){C||(C=0);const M=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)M[V]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(V=0;V<16;++V)M[V]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=R.g[0],C=R.g[1],V=R.g[2];let B=R.g[3],x;x=I+(B^C&(V^B))+M[0]+3614090360&4294967295,I=C+(x<<7&4294967295|x>>>25),x=B+(V^I&(C^V))+M[1]+3905402710&4294967295,B=I+(x<<12&4294967295|x>>>20),x=V+(C^B&(I^C))+M[2]+606105819&4294967295,V=B+(x<<17&4294967295|x>>>15),x=C+(I^V&(B^I))+M[3]+3250441966&4294967295,C=V+(x<<22&4294967295|x>>>10),x=I+(B^C&(V^B))+M[4]+4118548399&4294967295,I=C+(x<<7&4294967295|x>>>25),x=B+(V^I&(C^V))+M[5]+1200080426&4294967295,B=I+(x<<12&4294967295|x>>>20),x=V+(C^B&(I^C))+M[6]+2821735955&4294967295,V=B+(x<<17&4294967295|x>>>15),x=C+(I^V&(B^I))+M[7]+4249261313&4294967295,C=V+(x<<22&4294967295|x>>>10),x=I+(B^C&(V^B))+M[8]+1770035416&4294967295,I=C+(x<<7&4294967295|x>>>25),x=B+(V^I&(C^V))+M[9]+2336552879&4294967295,B=I+(x<<12&4294967295|x>>>20),x=V+(C^B&(I^C))+M[10]+4294925233&4294967295,V=B+(x<<17&4294967295|x>>>15),x=C+(I^V&(B^I))+M[11]+2304563134&4294967295,C=V+(x<<22&4294967295|x>>>10),x=I+(B^C&(V^B))+M[12]+1804603682&4294967295,I=C+(x<<7&4294967295|x>>>25),x=B+(V^I&(C^V))+M[13]+4254626195&4294967295,B=I+(x<<12&4294967295|x>>>20),x=V+(C^B&(I^C))+M[14]+2792965006&4294967295,V=B+(x<<17&4294967295|x>>>15),x=C+(I^V&(B^I))+M[15]+1236535329&4294967295,C=V+(x<<22&4294967295|x>>>10),x=I+(V^B&(C^V))+M[1]+4129170786&4294967295,I=C+(x<<5&4294967295|x>>>27),x=B+(C^V&(I^C))+M[6]+3225465664&4294967295,B=I+(x<<9&4294967295|x>>>23),x=V+(I^C&(B^I))+M[11]+643717713&4294967295,V=B+(x<<14&4294967295|x>>>18),x=C+(B^I&(V^B))+M[0]+3921069994&4294967295,C=V+(x<<20&4294967295|x>>>12),x=I+(V^B&(C^V))+M[5]+3593408605&4294967295,I=C+(x<<5&4294967295|x>>>27),x=B+(C^V&(I^C))+M[10]+38016083&4294967295,B=I+(x<<9&4294967295|x>>>23),x=V+(I^C&(B^I))+M[15]+3634488961&4294967295,V=B+(x<<14&4294967295|x>>>18),x=C+(B^I&(V^B))+M[4]+3889429448&4294967295,C=V+(x<<20&4294967295|x>>>12),x=I+(V^B&(C^V))+M[9]+568446438&4294967295,I=C+(x<<5&4294967295|x>>>27),x=B+(C^V&(I^C))+M[14]+3275163606&4294967295,B=I+(x<<9&4294967295|x>>>23),x=V+(I^C&(B^I))+M[3]+4107603335&4294967295,V=B+(x<<14&4294967295|x>>>18),x=C+(B^I&(V^B))+M[8]+1163531501&4294967295,C=V+(x<<20&4294967295|x>>>12),x=I+(V^B&(C^V))+M[13]+2850285829&4294967295,I=C+(x<<5&4294967295|x>>>27),x=B+(C^V&(I^C))+M[2]+4243563512&4294967295,B=I+(x<<9&4294967295|x>>>23),x=V+(I^C&(B^I))+M[7]+1735328473&4294967295,V=B+(x<<14&4294967295|x>>>18),x=C+(B^I&(V^B))+M[12]+2368359562&4294967295,C=V+(x<<20&4294967295|x>>>12),x=I+(C^V^B)+M[5]+4294588738&4294967295,I=C+(x<<4&4294967295|x>>>28),x=B+(I^C^V)+M[8]+2272392833&4294967295,B=I+(x<<11&4294967295|x>>>21),x=V+(B^I^C)+M[11]+1839030562&4294967295,V=B+(x<<16&4294967295|x>>>16),x=C+(V^B^I)+M[14]+4259657740&4294967295,C=V+(x<<23&4294967295|x>>>9),x=I+(C^V^B)+M[1]+2763975236&4294967295,I=C+(x<<4&4294967295|x>>>28),x=B+(I^C^V)+M[4]+1272893353&4294967295,B=I+(x<<11&4294967295|x>>>21),x=V+(B^I^C)+M[7]+4139469664&4294967295,V=B+(x<<16&4294967295|x>>>16),x=C+(V^B^I)+M[10]+3200236656&4294967295,C=V+(x<<23&4294967295|x>>>9),x=I+(C^V^B)+M[13]+681279174&4294967295,I=C+(x<<4&4294967295|x>>>28),x=B+(I^C^V)+M[0]+3936430074&4294967295,B=I+(x<<11&4294967295|x>>>21),x=V+(B^I^C)+M[3]+3572445317&4294967295,V=B+(x<<16&4294967295|x>>>16),x=C+(V^B^I)+M[6]+76029189&4294967295,C=V+(x<<23&4294967295|x>>>9),x=I+(C^V^B)+M[9]+3654602809&4294967295,I=C+(x<<4&4294967295|x>>>28),x=B+(I^C^V)+M[12]+3873151461&4294967295,B=I+(x<<11&4294967295|x>>>21),x=V+(B^I^C)+M[15]+530742520&4294967295,V=B+(x<<16&4294967295|x>>>16),x=C+(V^B^I)+M[2]+3299628645&4294967295,C=V+(x<<23&4294967295|x>>>9),x=I+(V^(C|~B))+M[0]+4096336452&4294967295,I=C+(x<<6&4294967295|x>>>26),x=B+(C^(I|~V))+M[7]+1126891415&4294967295,B=I+(x<<10&4294967295|x>>>22),x=V+(I^(B|~C))+M[14]+2878612391&4294967295,V=B+(x<<15&4294967295|x>>>17),x=C+(B^(V|~I))+M[5]+4237533241&4294967295,C=V+(x<<21&4294967295|x>>>11),x=I+(V^(C|~B))+M[12]+1700485571&4294967295,I=C+(x<<6&4294967295|x>>>26),x=B+(C^(I|~V))+M[3]+2399980690&4294967295,B=I+(x<<10&4294967295|x>>>22),x=V+(I^(B|~C))+M[10]+4293915773&4294967295,V=B+(x<<15&4294967295|x>>>17),x=C+(B^(V|~I))+M[1]+2240044497&4294967295,C=V+(x<<21&4294967295|x>>>11),x=I+(V^(C|~B))+M[8]+1873313359&4294967295,I=C+(x<<6&4294967295|x>>>26),x=B+(C^(I|~V))+M[15]+4264355552&4294967295,B=I+(x<<10&4294967295|x>>>22),x=V+(I^(B|~C))+M[6]+2734768916&4294967295,V=B+(x<<15&4294967295|x>>>17),x=C+(B^(V|~I))+M[13]+1309151649&4294967295,C=V+(x<<21&4294967295|x>>>11),x=I+(V^(C|~B))+M[4]+4149444226&4294967295,I=C+(x<<6&4294967295|x>>>26),x=B+(C^(I|~V))+M[11]+3174756917&4294967295,B=I+(x<<10&4294967295|x>>>22),x=V+(I^(B|~C))+M[2]+718787259&4294967295,V=B+(x<<15&4294967295|x>>>17),x=C+(B^(V|~I))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(V+(x<<21&4294967295|x>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+B&4294967295}s.prototype.v=function(R,I){I===void 0&&(I=R.length);const C=I-this.blockSize,M=this.C;let V=this.h,B=0;for(;B<I;){if(V==0)for(;B<=C;)a(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<I;)if(M[V++]=R.charCodeAt(B++),V==this.blockSize){a(this,M),V=0;break}}else for(;B<I;)if(M[V++]=R[B++],V==this.blockSize){a(this,M),V=0;break}}this.h=V,this.o+=I},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)R[I++]=this.g[C]>>>M&255;return R};function l(R,I){var C=h;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=I(R)}function u(R,I){this.h=I;const C=[];let M=!0;for(let V=R.length-1;V>=0;V--){const B=R[V]|0;M&&B==I||(C[V]=B,M=!1)}this.g=C}var h={};function d(R){return-128<=R&&R<128?l(R,function(I){return new u([I|0],I<0?-1:0)}):new u([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return v;if(R<0)return z(p(-R));const I=[];let C=1;for(let M=0;R>=C;M++)I[M]=R/C|0,C*=4294967296;return new u(I,0)}function y(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return z(y(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(I,8));let M=v;for(let B=0;B<R.length;B+=8){var V=Math.min(8,R.length-B);const x=parseInt(R.substring(B,B+V),I);V<8?(V=p(Math.pow(I,V)),M=M.j(V).add(p(x))):(M=M.j(C),M=M.add(p(x)))}return M}var v=d(0),b=d(1),w=d(16777216);n=u.prototype,n.m=function(){if(k(this))return-z(this).m();let R=0,I=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);R+=(M>=0?M:4294967296+M)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(k(this))return"-"+z(this).toString(R);const I=p(Math.pow(R,6));var C=this;let M="";for(;;){const V=st(C,I).g;C=Q(C,V.j(I));let B=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=V,N(C))return B+M;for(;B.length<6;)B="0"+B;M=B+M}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function k(R){return R.h==-1}n.l=function(R){return R=Q(this,R),k(R)?-1:N(R)?0:1};function z(R){const I=R.g.length,C=[];for(let M=0;M<I;M++)C[M]=~R.g[M];return new u(C,~R.h).add(b)}n.abs=function(){return k(this)?z(this):this},n.add=function(R){const I=Math.max(this.g.length,R.g.length),C=[];let M=0;for(let V=0;V<=I;V++){let B=M+(this.i(V)&65535)+(R.i(V)&65535),x=(B>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);M=x>>>16,B&=65535,x&=65535,C[V]=x<<16|B}return new u(C,C[C.length-1]&-2147483648?-1:0)};function Q(R,I){return R.add(z(I))}n.j=function(R){if(N(this)||N(R))return v;if(k(this))return k(R)?z(this).j(z(R)):z(z(this).j(R));if(k(R))return z(this.j(z(R)));if(this.l(w)<0&&R.l(w)<0)return p(this.m()*R.m());const I=this.g.length+R.g.length,C=[];for(var M=0;M<2*I;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<R.g.length;V++){const B=this.i(M)>>>16,x=this.i(M)&65535,jt=R.i(V)>>>16,oe=R.i(V)&65535;C[2*M+2*V]+=x*oe,$(C,2*M+2*V),C[2*M+2*V+1]+=B*oe,$(C,2*M+2*V+1),C[2*M+2*V+1]+=x*jt,$(C,2*M+2*V+1),C[2*M+2*V+2]+=B*jt,$(C,2*M+2*V+2)}for(R=0;R<I;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=I;R<2*I;R++)C[R]=0;return new u(C,0)};function $(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function G(R,I){this.g=R,this.h=I}function st(R,I){if(N(I))throw Error("division by zero");if(N(R))return new G(v,v);if(k(R))return I=st(z(R),I),new G(z(I.g),z(I.h));if(k(I))return I=st(R,z(I)),new G(z(I.g),I.h);if(R.g.length>30){if(k(R)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var C=b,M=I;M.l(R)<=0;)C=rt(C),M=rt(M);var V=lt(C,1),B=lt(M,1);for(M=lt(M,2),C=lt(C,2);!N(M);){var x=B.add(M);x.l(R)<=0&&(V=V.add(C),B=x),M=lt(M,1),C=lt(C,1)}return I=Q(R,V.j(I)),new G(V,I)}for(V=v;R.l(I)>=0;){for(C=Math.max(1,Math.floor(R.m()/I.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),B=p(C),x=B.j(I);k(x)||x.l(R)>0;)C-=M,B=p(C),x=B.j(I);N(B)&&(B=b),V=V.add(B),R=Q(R,x)}return new G(V,R)}n.B=function(R){return st(this,R).h},n.and=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let M=0;M<I;M++)C[M]=this.i(M)&R.i(M);return new u(C,this.h&R.h)},n.or=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let M=0;M<I;M++)C[M]=this.i(M)|R.i(M);return new u(C,this.h|R.h)},n.xor=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let M=0;M<I;M++)C[M]=this.i(M)^R.i(M);return new u(C,this.h^R.h)};function rt(R){const I=R.g.length+1,C=[];for(let M=0;M<I;M++)C[M]=R.i(M)<<1|R.i(M-1)>>>31;return new u(C,R.h)}function lt(R,I){const C=I>>5;I%=32;const M=R.g.length-C,V=[];for(let B=0;B<M;B++)V[B]=I>0?R.i(B+C)>>>I|R.i(B+C+1)<<32-I:R.i(B+C);return new u(V,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Sw=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Or=u}).apply(typeof $b<"u"?$b:typeof self<"u"?self:typeof window<"u"?window:{});var Hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ww,ac,Iw,sd,by,Rw,xw,Cw;(function(){var n,t=Object.defineProperty;function e(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hf=="object"&&Hf];for(var _=0;_<f.length;++_){var E=f[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=e(this);function a(f,_){if(_)t:{var E=s;f=f.split(".");for(var S=0;S<f.length-1;S++){var F=f[S];if(!(F in E))break t;E=E[F]}f=f[f.length-1],S=E[f],_=_(S),_!=S&&_!=null&&t(E,f,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(_){var E=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&E.push([S,_[S]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function d(f,_,E){return f.call.apply(f.bind,arguments)}function p(f,_,E){return p=d,p.apply(null,arguments)}function y(f,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),f.apply(this,S)}}function v(f,_){function E(){}E.prototype=_.prototype,f.Z=_.prototype,f.prototype=new E,f.prototype.constructor=f,f.Ob=function(S,F,Y){for(var ut=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)ut[xt-2]=arguments[xt];return _.prototype[F].apply(S,ut)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function w(f){const _=f.length;if(_>0){const E=Array(_);for(let S=0;S<_;S++)E[S]=f[S];return E}return[]}function N(f,_){for(let S=1;S<arguments.length;S++){const F=arguments[S];var E=typeof F;if(E=E!="object"?E:F?Array.isArray(F)?"array":E:"null",E=="array"||E=="object"&&typeof F.length=="number"){E=f.length||0;const Y=F.length||0;f.length=E+Y;for(let ut=0;ut<Y;ut++)f[E+ut]=F[ut]}else f.push(F)}}class k{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function z(f){u.setTimeout(()=>{throw f},0)}function Q(){var f=R;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class ${constructor(){this.h=this.g=null}add(_,E){const S=G.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var G=new k(()=>new st,f=>f.reset());class st{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,lt=!1,R=new $,I=()=>{const f=Promise.resolve(void 0);rt=()=>{f.then(C)}};function C(){for(var f;f=Q();){try{f.h.call(f.g)}catch(E){z(E)}var _=G;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}lt=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};u.addEventListener("test",E,_),u.removeEventListener("test",E,_)}catch{}return f})();function x(f){return/^[\s\xa0]*$/.test(f)}function jt(f,_){V.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}v(jt,V),jt.prototype.init=function(f,_){const E=this.type=f.type,S=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(E=="mouseover"?_=f.fromElement:E=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&jt.Z.h.call(this)},jt.prototype.h=function(){jt.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),W=0;function at(f,_,E,S,F){this.listener=f,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=F,this.key=++W,this.da=this.fa=!1}function mt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Dt(f,_,E){for(const S in f)_.call(E,f[S],S,f)}function kt(f,_){for(const E in f)_.call(void 0,f[E],E,f)}function O(f){const _={};for(const E in f)_[E]=f[E];return _}const it="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(f,_){let E,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(E in S)f[E]=S[E];for(let Y=0;Y<it.length;Y++)E=it[Y],Object.prototype.hasOwnProperty.call(S,E)&&(f[E]=S[E])}}function dt(f){this.src=f,this.g={},this.h=0}dt.prototype.add=function(f,_,E,S,F){const Y=f.toString();f=this.g[Y],f||(f=this.g[Y]=[],this.h++);const ut=Vt(f,_,S,F);return ut>-1?(_=f[ut],E||(_.fa=!1)):(_=new at(_,this.src,Y,!!S,F),_.fa=E,f.push(_)),_};function St(f,_){const E=_.type;if(E in f.g){var S=f.g[E],F=Array.prototype.indexOf.call(S,_,void 0),Y;(Y=F>=0)&&Array.prototype.splice.call(S,F,1),Y&&(mt(_),f.g[E].length==0&&(delete f.g[E],f.h--))}}function Vt(f,_,E,S){for(let F=0;F<f.length;++F){const Y=f[F];if(!Y.da&&Y.listener==_&&Y.capture==!!E&&Y.ha==S)return F}return-1}var qt="closure_lm_"+(Math.random()*1e6|0),je={};function ce(f,_,E,S,F){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)ce(f,_[Y],E,S,F);return null}return E=$l(E),f&&f[oe]?f.J(_,E,h(S)?!!S.capture:!1,F):Zr(f,_,E,!1,S,F)}function Zr(f,_,E,S,F,Y){if(!_)throw Error("Invalid event type");const ut=h(F)?!!F.capture:!!F;let xt=Jr(f);if(xt||(f[qt]=xt=new dt(f)),E=xt.add(_,E,S,ut,Y),E.proxy)return E;if(S=uo(),E.proxy=S,S.src=f,S.listener=E,f.addEventListener)B||(F=ut),F===void 0&&(F=!1),f.addEventListener(_.toString(),S,F);else if(f.attachEvent)f.attachEvent(Ii(_.toString()),S);else if(f.addListener&&f.removeListener)f.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function uo(){function f(E){return _.call(f.src,f.listener,E)}const _=Yl;return f}function co(f,_,E,S,F){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)co(f,_[Y],E,S,F);else S=h(S)?!!S.capture:!!S,E=$l(E),f&&f[oe]?(f=f.i,Y=String(_).toString(),Y in f.g&&(_=f.g[Y],E=Vt(_,E,S,F),E>-1&&(mt(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete f.g[Y],f.h--)))):f&&(f=Jr(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Vt(_,E,S,F)),(E=f>-1?_[f]:null)&&ho(E))}function ho(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[oe])St(_.i,f);else{var E=f.type,S=f.proxy;_.removeEventListener?_.removeEventListener(E,S,f.capture):_.detachEvent?_.detachEvent(Ii(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=Jr(_))?(St(E,f),E.h==0&&(E.src=null,_[qt]=null)):mt(f)}}}function Ii(f){return f in je?je[f]:je[f]="on"+f}function Yl(f,_){if(f.da)f=!0;else{_=new jt(_,this);const E=f.listener,S=f.ha||f.src;f.fa&&ho(f),f=E.call(S,_)}return f}function Jr(f){return f=f[qt],f instanceof dt?f:null}var Xl="__closure_events_fn_"+(Math.random()*1e9>>>0);function $l(f){return typeof f=="function"?f:(f[Xl]||(f[Xl]=function(_){return f.handleEvent(_)}),f[Xl])}function Re(){M.call(this),this.i=new dt(this),this.M=this,this.G=null}v(Re,M),Re.prototype[oe]=!0,Re.prototype.removeEventListener=function(f,_,E,S){co(this,f,_,E,S)};function Fe(f,_){var E,S=f.G;if(S)for(E=[];S;S=S.G)E.push(S);if(f=f.M,S=_.type||_,typeof _=="string")_=new V(_,f);else if(_ instanceof V)_.target=_.target||f;else{var F=_;_=new V(S,f),ft(_,F)}F=!0;let Y,ut;if(E)for(ut=E.length-1;ut>=0;ut--)Y=_.g=E[ut],F=js(Y,S,!0,_)&&F;if(Y=_.g=f,F=js(Y,S,!0,_)&&F,F=js(Y,S,!1,_)&&F,E)for(ut=0;ut<E.length;ut++)Y=_.g=E[ut],F=js(Y,S,!1,_)&&F}Re.prototype.N=function(){if(Re.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const E=f.g[_];for(let S=0;S<E.length;S++)mt(E[S]);delete f.g[_],f.h--}}this.G=null},Re.prototype.J=function(f,_,E,S){return this.i.add(String(f),_,!1,E,S)},Re.prototype.K=function(f,_,E,S){return this.i.add(String(f),_,!0,E,S)};function js(f,_,E,S){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let F=!0;for(let Y=0;Y<_.length;++Y){const ut=_[Y];if(ut&&!ut.da&&ut.capture==E){const xt=ut.listener,Se=ut.ha||ut.src;ut.fa&&St(f.i,ut),F=xt.call(Se,S)!==!1&&F}}return F&&!S.defaultPrevented}function km(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(f,_||0)}function mh(f){f.g=km(()=>{f.g=null,f.i&&(f.i=!1,mh(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class pn extends M{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:mh(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ta(f){M.call(this),this.h=f,this.g={}}v(ta,M);var Wl=[];function Zl(f){Dt(f.g,function(_,E){this.g.hasOwnProperty(E)&&ho(_)},f),f.g={}}ta.prototype.N=function(){ta.Z.N.call(this),Zl(this)},ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fs=u.JSON.stringify,Lm=u.JSON.parse,ph=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function gh(){}function yh(){}var ui={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function We(){V.call(this,"d")}v(We,V);function Hn(){V.call(this,"c")}v(Hn,V);var Ae={},_h=null;function fo(){return _h=_h||new Re}Ae.Ia="serverreachability";function vh(f){V.call(this,Ae.Ia,f)}v(vh,V);function Ri(f){const _=fo();Fe(_,new vh(_))}Ae.STAT_EVENT="statevent";function ea(f,_){V.call(this,Ae.STAT_EVENT,f),this.stat=_}v(ea,V);function xe(f){const _=fo();Fe(_,new ea(_,f))}Ae.Ja="timingevent";function xi(f,_){V.call(this,Ae.Ja,f),this.size=_}v(xi,V);function Ci(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},_)}function ci(){this.g=!0}ci.prototype.ua=function(){this.g=!1};function Um(f,_,E,S,F,Y){f.info(function(){if(f.g)if(Y){var ut="",xt=Y.split("&");for(let Qt=0;Qt<xt.length;Qt++){var Se=xt[Qt].split("=");if(Se.length>1){const he=Se[0];Se=Se[1];const Yn=he.split("_");ut=Yn.length>=2&&Yn[1]=="type"?ut+(he+"="+Se+"&"):ut+(he+"=redacted&")}}}else ut=null;else ut=Y;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+_+`
`+E+`
`+ut})}function Th(f,_,E,S,F,Y,ut){f.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+_+`
`+E+`
`+Y+" "+ut})}function Di(f,_,E,S){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+zm(f,E)+(S?" "+S:"")})}function na(f,_){f.info(function(){return"TIMEOUT: "+_})}ci.prototype.info=function(){};function zm(f,_){if(!f.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(f=0;f<Y.length;f++)if(Array.isArray(Y[f])){var E=Y[f];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ut=1;ut<S.length;ut++)S[ut]=""}}}}return Fs(Y)}catch{return _}}var ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tu;function sa(){}v(sa,gh),sa.prototype.g=function(){return new XMLHttpRequest},tu=new sa;function as(f){return encodeURIComponent(String(f))}function Eh(f){var _=1;f=f.split(":");const E=[];for(;_>0&&f.length;)E.push(f.shift()),_--;return f.length&&E.push(f.join(":")),E}function hi(f,_,E,S){this.j=f,this.i=_,this.l=E,this.S=S||1,this.V=new ta(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}var Ce={},Qe={};function Vi(f,_,E){f.M=1,f.A=ra(Ve(_)),f.u=E,f.R=!0,mo(f,null)}function mo(f,_){f.F=Date.now(),Ni(f),f.B=Ve(f.A);var E=f.B,S=f.S;Array.isArray(S)||(S=[String(S)]),_o(E.i,"t",S),f.C=0,E=f.j.L,f.h=new fi,f.g=kh(f.j,E?_:null,!f.u),f.P>0&&(f.O=new pn(p(f.Y,f,f.g),f.P)),_=f.V,E=f.g,S=f.ba;var F="readystatechange";Array.isArray(F)||(F&&(Wl[0]=F.toString()),F=Wl);for(let Y=0;Y<F.length;Y++){const ut=ce(E,F[Y],S||_.handleEvent,!1,_.h||_);if(!ut)break;_.g[ut.key]=ut}_=f.J?O(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),Ri(),Um(f.i,f.v,f.B,f.l,f.S,f.u)}hi.prototype.ba=function(f){f=f.target;const _=this.O;_&&pi(f)==3?_.j():this.Y(f)},hi.prototype.Y=function(f){try{if(f==this.g)t:{const xt=pi(this.g),Se=this.g.ya(),Qt=this.g.ca();if(!(xt<3)&&(xt!=3||this.g&&(this.h.h||this.g.la()||Ze(this.g)))){this.K||xt!=4||Se==7||(Se==8||Qt<=0?Ri(3):Ri(2)),Mi(this);var _=this.g.ca();this.X=_;var E=Bm(this);if(this.o=_==200,Th(this.i,this.v,this.B,this.l,this.S,xt,_),this.o){if(this.U&&!this.L){e:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(S)){var Y=S;break e}}Y=null}if(f=Y)Di(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pi(this,f);else{this.o=!1,this.m=3,xe(12),Nn(this),Gn(this);break t}}if(this.R){f=!0;let he;for(;!this.K&&this.C<E.length;)if(he=Ah(this,E),he==Qe){xt==4&&(this.m=4,xe(14),f=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(he==Ce){this.m=4,xe(15),Di(this.i,this.l,E,"[Invalid Chunk]"),f=!1;break}else Di(this.i,this.l,he,null),Pi(this,he);if(bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||E.length!=0||this.h.h||(this.m=1,xe(16),f=!1),this.o=this.o&&f,!f)Di(this.i,this.l,E,"[Invalid Chunked Response]"),Nn(this),Gn(this);else if(E.length>0&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.aa&&!ut.P&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),pu(ut),ut.P=!0,xe(11))}}else Di(this.i,this.l,E,null),Pi(this,E);xt==4&&Nn(this),this.o&&!this.K&&(xt==4?Nh(this.j,this):(this.o=!1,Ni(this)))}else ls(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,xe(12)):(this.m=0,xe(13)),Nn(this),Gn(this)}}}catch{}finally{}};function Bm(f){if(!bh(f))return f.g.la();const _=Ze(f.g);if(_==="")return"";let E="";const S=_.length,F=pi(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Nn(f),Gn(f),"";f.h.i=new u.TextDecoder}for(let Y=0;Y<S;Y++)f.h.h=!0,E+=f.h.i.decode(_[Y],{stream:!(F&&Y==S-1)});return _.length=0,f.h.g+=E,f.C=0,f.h.g}function bh(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Ah(f,_){var E=f.C,S=_.indexOf(`
`,E);return S==-1?Qe:(E=Number(_.substring(E,S)),isNaN(E)?Ce:(S+=1,S+E>_.length?Qe:(_=_.slice(S,S+E),f.C=S+E,_)))}hi.prototype.cancel=function(){this.K=!0,Nn(this)};function Ni(f){f.T=Date.now()+f.H,po(f,f.H)}function po(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Ci(p(f.aa,f),_)}function Mi(f){f.D&&(u.clearTimeout(f.D),f.D=null)}hi.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(na(this.i,this.B),this.M!=2&&(Ri(),xe(17)),Nn(this),this.m=2,Gn(this)):po(this,this.T-f)};function Gn(f){f.j.I==0||f.K||Nh(f.j,f)}function Nn(f){Mi(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,Zl(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function Pi(f,_){try{var E=f.j;if(E.I!=0&&(E.g==f||ki(E.h,f))){if(!f.L&&ki(E.h,f)&&E.I==3){try{var S=E.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<f.F)Ao(E),$s(E);else break t;fa(E),xe(18)}}else E.xa=F[1],0<E.xa-E.K&&F[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ci(p(E.Va,E),6e3));Oi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Fi(E,11)}else if((f.L||E.g==f)&&Ao(E),!x(_))for(F=E.Ba.g.parse(_),_=0;_<F.length;_++){let Qt=F[_];const he=Qt[0];if(!(he<=E.K))if(E.K=he,Qt=Qt[1],E.I==2)if(Qt[0]=="c"){E.M=Qt[1],E.ba=Qt[2];const Yn=Qt[3];Yn!=null&&(E.ka=Yn,E.j.info("VER="+E.ka));const qi=Qt[4];qi!=null&&(E.za=qi,E.j.info("SVER="+E.za));const gi=Qt[5];gi!=null&&typeof gi=="number"&&gi>0&&(S=1.5*gi,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const yi=f.g;if(yi){const da=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var Y=S.h;Y.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(iu(Y,Y.h),Y.h=null))}if(S.G){const So=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(S.wa=So,$t(S.J,S.G,So))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-f.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var ut=f;if(S.na=Oh(S,S.L?S.ba:null,S.W),ut.L){su(S.h,ut);var xt=ut,Se=S.O;Se&&(xt.H=Se),xt.D&&(Mi(xt),Ni(xt)),S.g=ut}else Dh(S);E.i.length>0&&ji(E)}else Qt[0]!="stop"&&Qt[0]!="close"||Fi(E,7);else E.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Fi(E,7):du(E):Qt[0]!="noop"&&E.l&&E.l.qa(Qt),E.A=0)}}Ri(4)}catch{}}var De=class{constructor(f,_){this.g=f,this.map=_}};function eu(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nu(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Oi(f){return f.h?1:f.g?f.g.size:0}function ki(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function iu(f,_){f.g?f.g.add(_):f.h=_}function su(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}eu.prototype.cancel=function(){if(this.i=ru(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ru(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const E of f.g.values())_=_.concat(E.G);return _}return w(f.i)}var Sh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function go(f,_){if(f){f=f.split("&");for(let E=0;E<f.length;E++){const S=f[E].indexOf("=");let F,Y=null;S>=0?(F=f[E].substring(0,S),Y=f[E].substring(S+1)):F=f[E],_(F,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Mn(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof Mn?(this.l=f.l,Ye(this,f.j),this.o=f.o,this.g=f.g,qs(this,f.u),this.h=f.h,au(this,xh(f.i)),this.m=f.m):f&&(_=String(f).match(Sh))?(this.l=!1,Ye(this,_[1]||"",!0),this.o=Li(_[2]||""),this.g=Li(_[3]||"",!0),qs(this,_[4]),this.h=Li(_[5]||"",!0),au(this,_[6]||"",!0),this.m=Li(_[7]||"")):(this.l=!1,this.i=new Gs(null,this.l))}Mn.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(aa(_,yo,!0),":");var E=this.g;return(E||_=="file")&&(f.push("//"),(_=this.o)&&f.push(aa(_,yo,!0),"@"),f.push(as(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&f.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(aa(E,E.charAt(0)=="/"?ou:wh,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",aa(E,Ih)),f.join("")},Mn.prototype.resolve=function(f){const _=Ve(this);let E=!!f.j;E?Ye(_,f.j):E=!!f.o,E?_.o=f.o:E=!!f.g,E?_.g=f.g:E=f.u!=null;var S=f.h;if(E)qs(_,f.u);else if(E=!!f.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=_.h.lastIndexOf("/");F!=-1&&(S=_.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const Y=[];for(let ut=0;ut<F.length;){const xt=F[ut++];xt=="."?S&&ut==F.length&&Y.push(""):xt==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),S&&ut==F.length&&Y.push("")):(Y.push(xt),S=!0)}S=Y.join("/")}else S=F}return E?_.h=S:E=f.i.toString()!=="",E?au(_,xh(f.i)):E=!!f.m,E&&(_.m=f.m),_};function Ve(f){return new Mn(f)}function Ye(f,_,E){f.j=E?Li(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function qs(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function au(f,_,E){_ instanceof Gs?(f.i=_,vo(f.i,f.l)):(E||(_=aa(_,Hs)),f.i=new Gs(_,f.l))}function $t(f,_,E){f.i.set(_,E)}function ra(f){return $t(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Li(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function aa(f,_,E){return typeof f=="string"?(f=encodeURI(f).replace(_,An),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function An(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var yo=/[#\/\?@]/g,wh=/[#\?:]/g,ou=/[#\?]/g,Hs=/[#\?@]/g,Ih=/#/g;function Gs(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Sn(f){f.g||(f.g=new Map,f.h=0,f.i&&go(f.i,function(_,E){f.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Gs.prototype,n.add=function(f,_){Sn(this),this.i=null,f=Ks(this,f);let E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(_),this.h+=1,this};function Rh(f,_){Sn(f),_=Ks(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function lu(f,_){return Sn(f),_=Ks(f,_),f.g.has(_)}n.forEach=function(f,_){Sn(this),this.g.forEach(function(E,S){E.forEach(function(F){f.call(_,F,S,this)},this)},this)};function uu(f,_){Sn(f);let E=[];if(typeof _=="string")lu(f,_)&&(E=E.concat(f.g.get(Ks(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)E=E.concat(f[_]);return E}n.set=function(f,_){return Sn(this),this.i=null,f=Ks(this,f),lu(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=uu(this,f),f.length>0?String(f[0]):_):_};function _o(f,_,E){Rh(f,_),E.length>0&&(f.i=null,f.g.set(Ks(f,_),w(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var E=_[S];const F=as(E);E=uu(this,E);for(let Y=0;Y<E.length;Y++){let ut=F;E[Y]!==""&&(ut+="="+as(E[Y])),f.push(ut)}}return this.i=f.join("&")};function xh(f){const _=new Gs;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function Ks(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function vo(f,_){_&&!f.j&&(Sn(f),f.i=null,f.g.forEach(function(E,S){const F=S.toLowerCase();S!=F&&(Rh(this,S),_o(this,F,E))},f)),f.j=_}function di(f,_){const E=new ci;if(u.Image){const S=new Image;S.onload=y(Kn,E,"TestLoadImage: loaded",!0,_,S),S.onerror=y(Kn,E,"TestLoadImage: error",!1,_,S),S.onabort=y(Kn,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=y(Kn,E,"TestLoadImage: timeout",!1,_,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=f}else _(!1)}function cu(f,_){const E=new ci,S=new AbortController,F=setTimeout(()=>{S.abort(),Kn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:S.signal}).then(Y=>{clearTimeout(F),Y.ok?Kn(E,"TestPingServer: ok",!0,_):Kn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Kn(E,"TestPingServer: error",!1,_)})}function Kn(f,_,E,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(E)}catch{}}function Qs(){this.g=new ph}function Ui(f){this.i=f.Sb||null,this.h=f.ab||!1}v(Ui,gh),Ui.prototype.g=function(){return new oa(this.i,this.h)};function oa(f,_){Re.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(oa,Re),n=oa.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,mi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ys(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;To(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function To(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Ys(this):mi(this),this.readyState==3&&To(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Ys(this))},n.Na=function(f){this.g&&(this.response=f,Ys(this))},n.ga=function(){this.g&&Ys(this)};function Ys(f){f.readyState=4,f.l=null,f.j=null,f.B=null,mi(f)}n.setRequestHeader=function(f,_){this.A.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=_.next();return f.join(`\r
`)};function mi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Qn(f){let _="";return Dt(f,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function la(f,_,E){t:{for(S in E){var S=!1;break t}S=!0}S||(E=Qn(E),typeof f=="string"?E!=null&&as(E):$t(f,_,E))}function ne(f){Re.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ne,Re);var zi=/^https?$/i,hu=["POST","PUT"];n=ne.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tu.g(),this.g.onreadystatechange=b(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(Y){ua(this,Y);return}if(f=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)E.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())E.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),F=u.FormData&&f instanceof u.FormData,!(Array.prototype.indexOf.call(hu,_,void 0)>=0)||S||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ut]of E)this.g.setRequestHeader(Y,ut);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(Y){ua(this,Y)}};function ua(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,fu(f),os(f)}function fu(f){f.A||(f.A=!0,Fe(f,"complete"),Fe(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Fe(this,"complete"),Fe(this,"abort"),os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),ne.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ca(this):this.Xa())},n.Xa=function(){ca(this)};function ca(f){if(f.h&&typeof l<"u"){if(f.v&&pi(f)==4)setTimeout(f.Ca.bind(f),0);else if(Fe(f,"readystatechange"),pi(f)==4){f.h=!1;try{const Y=f.ca();t:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var E;if(!(E=_)){var S;if(S=Y===0){let ut=String(f.D).match(Sh)[1]||null;!ut&&u.self&&u.self.location&&(ut=u.self.location.protocol.slice(0,-1)),S=!zi.test(ut?ut.toLowerCase():"")}E=S}if(E)Fe(f,"complete"),Fe(f,"success");else{f.o=6;try{var F=pi(f)>2?f.g.statusText:""}catch{F=""}f.l=F+" ["+f.ca()+"]",fu(f)}}finally{os(f)}}}}function os(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const E=f.g;f.g=null,_||Fe(f,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function pi(f){return f.g?f.g.readyState:0}n.ca=function(){try{return pi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Lm(_)}};function Ze(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(f){const _={};f=(f.g&&pi(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<f.length;S++){if(x(f[S]))continue;var E=Eh(f[S]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=_[F]||[];_[F]=Y,Y.push(E)}kt(_,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(f,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||_}function Xs(f){this.za=0,this.i=[],this.j=new ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,f),this.Za=Bi("retryDelaySeedMs",1e4,f),this.Ta=Bi("forwardChannelMaxRetries",2,f),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new eu(f&&f.concurrentRequestLimit),this.Ba=new Qs,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Xs.prototype,n.ka=8,n.I=1,n.connect=function(f,_,E,S){xe(0),this.W=f,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=Oh(this,null,this.W),ji(this)};function du(f){if(Eo(f),f.I==3){var _=f.V++,E=Ve(f.J);if($t(E,"SID",f.M),$t(E,"RID",_),$t(E,"TYPE","terminate"),ha(f,E),_=new hi(f,f.j,_),_.M=2,_.A=ra(Ve(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=_.A,E=!0),E||(_.g=kh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ni(_)}Ph(f)}function $s(f){f.g&&(pu(f),f.g.cancel(),f.g=null)}function Eo(f){$s(f),f.v&&(u.clearTimeout(f.v),f.v=null),Ao(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&u.clearTimeout(f.m),f.m=null)}function ji(f){if(!nu(f.h)&&!f.m){f.m=!0;var _=f.Ea;rt||I(),lt||(rt(),lt=!0),R.add(_,f),f.D=0}}function bo(f,_){return Oi(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Ci(p(f.Ea,f,_),Mh(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const F=new hi(this,this.j,f);let Y=this.o;if(this.U&&(Y?(Y=O(Y),ft(Y,this.U)):Y=this.U),this.u!==null||this.R||(F.J=Y,Y=null),this.S)t:{for(var _=0,E=0;E<this.i.length;E++){e:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=E;break t}if(_===4096||E===this.i.length-1){_=E+1;break t}}_=1e3}else _=1e3;_=Ch(this,F,_),E=Ve(this.J),$t(E,"RID",f),$t(E,"CVER",22),this.G&&$t(E,"X-HTTP-Session-Id",this.G),ha(this,E),Y&&(this.R?_="headers="+as(Qn(Y))+"&"+_:this.u&&la(E,this.u,Y)),iu(this.h,F),this.Ra&&$t(E,"TYPE","init"),this.S?($t(E,"$req",_),$t(E,"SID","null"),F.U=!0,Vi(F,E,null)):Vi(F,E,_),this.I=2}}else this.I==3&&(f?mu(this,f):this.i.length==0||nu(this.h)||mu(this))};function mu(f,_){var E;_?E=_.l:E=f.V++;const S=Ve(f.J);$t(S,"SID",f.M),$t(S,"RID",E),$t(S,"AID",f.K),ha(f,S),f.u&&f.o&&la(S,f.u,f.o),E=new hi(f,f.j,E,f.D+1),f.u===null&&(E.J=f.o),_&&(f.i=_.G.concat(f.i)),_=Ch(f,E,1e3),E.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),iu(f.h,E),Vi(E,S,_)}function ha(f,_){f.H&&Dt(f.H,function(E,S){$t(_,S,E)}),f.l&&Dt({},function(E,S){$t(_,S,E)})}function Ch(f,_,E){E=Math.min(f.i.length,E);const S=f.l?p(f.l.Ka,f.l,f):null;t:{var F=f.i;let xt=-1;for(;;){const Se=["count="+E];xt==-1?E>0?(xt=F[0].g,Se.push("ofs="+xt)):xt=0:Se.push("ofs="+xt);let Qt=!0;for(let he=0;he<E;he++){var Y=F[he].g;const Yn=F[he].map;if(Y-=xt,Y<0)xt=Math.max(0,F[he].g-100),Qt=!1;else try{Y="req"+Y+"_"||"";try{var ut=Yn instanceof Map?Yn:Object.entries(Yn);for(const[qi,gi]of ut){let yi=gi;h(gi)&&(yi=Fs(gi)),Se.push(Y+qi+"="+encodeURIComponent(yi))}}catch(qi){throw Se.push(Y+"type="+encodeURIComponent("_badmap")),qi}}catch{S&&S(Yn)}}if(Qt){ut=Se.join("&");break t}}ut=void 0}return f=f.i.splice(0,E),_.G=f,ut}function Dh(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;rt||I(),lt||(rt(),lt=!0),R.add(_,f),f.A=0}}function fa(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Ci(p(f.Da,f),Mh(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Vh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Ci(p(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xe(10),$s(this),Vh(this))};function pu(f){f.B!=null&&(u.clearTimeout(f.B),f.B=null)}function Vh(f){f.g=new hi(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=Ve(f.na);$t(_,"RID","rpc"),$t(_,"SID",f.M),$t(_,"AID",f.K),$t(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&$t(_,"TO",f.ia),$t(_,"TYPE","xmlhttp"),ha(f,_),f.u&&f.o&&la(_,f.u,f.o),f.O&&(f.g.H=f.O);var E=f.g;f=f.ba,E.M=1,E.A=ra(Ve(_)),E.u=null,E.R=!0,mo(E,f)}n.Va=function(){this.C!=null&&(this.C=null,$s(this),fa(this),xe(19))};function Ao(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function Nh(f,_){var E=null;if(f.g==_){Ao(f),pu(f),f.g=null;var S=2}else if(ki(f.h,_))E=_.G,su(f.h,_),S=1;else return;if(f.I!=0){if(_.o)if(S==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var F=f.D;S=fo(),Fe(S,new xi(S,E)),ji(f)}else Dh(f);else if(F=_.m,F==3||F==0&&_.X>0||!(S==1&&bo(f,_)||S==2&&fa(f)))switch(E&&E.length>0&&(_=f.h,_.i=_.i.concat(E)),F){case 1:Fi(f,5);break;case 4:Fi(f,10);break;case 3:Fi(f,6);break;default:Fi(f,2)}}}function Mh(f,_){let E=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(E*=2),E*_}function Fi(f,_){if(f.j.info("Error code "+_),_==2){var E=p(f.bb,f),S=f.Ua;const F=!S;S=new Mn(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ye(S,"https"),ra(S),F?di(S.toString(),E):cu(S.toString(),E)}else xe(2);f.I=0,f.l&&f.l.pa(_),Ph(f),Eo(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Ph(f){if(f.I=0,f.ja=[],f.l){const _=ru(f.h);(_.length!=0||f.i.length!=0)&&(N(f.ja,_),N(f.ja,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.oa()}}function Oh(f,_,E){var S=E instanceof Mn?Ve(E):new Mn(E);if(S.g!="")_&&(S.g=_+"."+S.g),qs(S,S.u);else{var F=u.location;S=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;const Y=new Mn(null);S&&Ye(Y,S),_&&(Y.g=_),F&&qs(Y,F),E&&(Y.h=E),S=Y}return E=f.G,_=f.wa,E&&_&&$t(S,E,_),$t(S,"VER",f.ka),ha(f,S),S}function kh(f,_,E){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new ne(new Ui({ab:E})):new ne(f.ma),_.Fa(f.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lh(){}n=Lh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ws(){}Ws.prototype.g=function(f,_){return new gn(f,_)};function gn(f,_){Re.call(this),this.g=new Xs(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!x(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new us(this)}v(gn,Re),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){du(this.g)},gn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.v&&(E={},E.__data__=Fs(f),f=E);_.i.push(new De(_.Ya++,f)),_.I==3&&ji(_)},gn.prototype.N=function(){this.g.l=null,delete this.j,du(this.g),delete this.g,gn.Z.N.call(this)};function Uh(f){We.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){t:{for(const E in _){f=E;break t}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}v(Uh,We);function zh(){Hn.call(this),this.status=1}v(zh,Hn);function us(f){this.g=f}v(us,Lh),us.prototype.ra=function(){Fe(this.g,"a")},us.prototype.qa=function(f){Fe(this.g,new Uh(f))},us.prototype.pa=function(f){Fe(this.g,new zh)},us.prototype.oa=function(){Fe(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Cw=function(){return new Ws},xw=function(){return fo()},Rw=Ae,by={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,sd=ia,Jl.COMPLETE="complete",Iw=Jl,yh.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",Re.prototype.listen=Re.prototype.J,ac=yh,ne.prototype.listenOnce=ne.prototype.K,ne.prototype.getLastError=ne.prototype.Ha,ne.prototype.getLastErrorCode=ne.prototype.ya,ne.prototype.getStatus=ne.prototype.ca,ne.prototype.getResponseJson=ne.prototype.La,ne.prototype.getResponseText=ne.prototype.la,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Fa,ww=ne}).apply(typeof Hf<"u"?Hf:typeof self<"u"?self:typeof window<"u"?window:{});const Wb="@firebase/firestore",Zb="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new I_("@firebase/firestore");function al(){return Wa.logLevel}function ot(n,...t){if(Wa.logLevel<=zt.DEBUG){const e=t.map(x_);Wa.debug(`Firestore (${Bl}): ${n}`,...e)}}function _n(n,...t){if(Wa.logLevel<=zt.ERROR){const e=t.map(x_);Wa.error(`Firestore (${Bl}): ${n}`,...e)}}function Al(n,...t){if(Wa.logLevel<=zt.WARN){const e=t.map(x_);Wa.warn(`Firestore (${Bl}): ${n}`,...e)}}function x_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(n,t,e){let s="Unexpected state";typeof t=="string"?s=t:e=t,Dw(n,s,e)}function Dw(n,t,e){let s=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{s+=" CONTEXT: "+JSON.stringify(e)}catch{s+=" CONTEXT: "+e}throw _n(s),new Error(s)}function _t(n,t,e,s){let a="Unexpected state";typeof e=="string"?a=e:s=e,n||Dw(t,a,s)}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Us{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class DN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(rn.UNAUTHENTICATED)))}shutdown(){}}class VN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class NN{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){_t(this.o===void 0,42304);let s=this.i;const a=d=>this.i!==s?(s=this.i,e(d)):Promise.resolve();let l=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cs,t.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const d=l;t.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},h=d=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cs)}}),0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((s=>this.i!==t?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(_t(typeof s.accessToken=="string",31837,{l:s}),new Vw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string",2055,{h:t}),new rn(t)}}class MN{constructor(t,e,s){this.P=t,this.T=e,this.I=s,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class PN{constructor(t,e,s){this.P=t,this.T=e,this.I=s}getToken(){return Promise.resolve(new MN(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Jb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ON{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){_t(this.o===void 0,3512);const s=l=>{l.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ot("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>s(l)))};const a=l=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Jb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(_t(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Jb(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=kN(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<e&&(s+=t.charAt(a[l]%62))}return s}}function wt(n,t){return n<t?-1:n>t?1:0}function Ay(n,t){const e=Math.min(n.length,t.length);for(let s=0;s<e;s++){const a=n.charAt(s),l=t.charAt(s);if(a!==l)return Gg(a)===Gg(l)?wt(a,l):Gg(a)?1:-1}return wt(n.length,t.length)}const LN=55296,UN=57343;function Gg(n){const t=n.charCodeAt(0);return t>=LN&&t<=UN}function Sl(n,t,e){return n.length===t.length&&n.every(((s,a)=>e(s,t[a])))}function Nw(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="__name__";class Yi{constructor(t,e,s){e===void 0?e=0:e>t.length&&gt(637,{offset:e,range:t.length}),s===void 0?s=t.length-e:s>t.length-e&&gt(1746,{length:s,range:t.length-e}),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Yi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Yi?t.forEach((s=>{e.push(s)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let a=0;a<s;a++){const l=Yi.compareSegments(t.get(a),e.get(a));if(l!==0)return l}return wt(t.length,e.length)}static compareSegments(t,e){const s=Yi.isNumericId(t),a=Yi.isNumericId(e);return s&&!a?-1:!s&&a?1:s&&a?Yi.extractNumericId(t).compare(Yi.extractNumericId(e)):Ay(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Or.fromString(t.substring(4,t.length-2))}}class Xt extends Yi{construct(t,e,s){return new Xt(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new ct(tt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter((a=>a.length>0)))}return new Xt(e)}static emptyPath(){return new Xt([])}}const zN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ye extends Yi{construct(t,e,s){return new ye(t,e,s)}static isValidIdentifier(t){return zN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ye.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tA}static keyField(){return new ye([tA])}static fromServerFormat(t){const e=[];let s="",a=0;const l=()=>{if(s.length===0)throw new ct(tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let u=!1;for(;a<t.length;){const h=t[a];if(h==="\\"){if(a+1===t.length)throw new ct(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ct(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=d,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new ct(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ye(e)}static emptyPath(){return new ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(Xt.fromString(t))}static fromName(t){return new ht(Xt.fromString(t).popFirst(5))}static empty(){return new ht(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Xt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Xt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new Xt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n,t,e){if(!e)throw new ct(tt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function BN(n,t,e,s){if(t===!0&&s===!0)throw new ct(tt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function eA(n){if(!ht.isDocumentKey(n))throw new ct(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nA(n){if(ht.isDocumentKey(n))throw new ct(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Pw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":gt(12329,{type:typeof n})}function Zi(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ct(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=sm(n);throw new ct(tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,t){const e={typeString:n};return t&&(e.value=t),e}function Wc(n,t){if(!Pw(n))throw new ct(tt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const s in t)if(t[s]){const a=t[s].typeString,l="value"in t[s]?{value:t[s].value}:void 0;if(!(s in n)){e=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){e=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){e=`Expected '${s}' field to equal '${l.value}'`;break}}if(e)throw new ct(tt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=-62135596800,sA=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*sA);return new Jt(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ct(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ct(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<iA)throw new ct(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sA}_compareTo(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Wc(t,Jt._jsonSchema))return new Jt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-iA;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Ue("string",Jt._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(t){return new Tt(t)}static min(){return new Tt(new Jt(0,0))}static max(){return new Tt(new Jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=-1;class Rd{constructor(t,e,s,a){this.indexId=t,this.collectionGroup=e,this.fields=s,this.indexState=a}}function Sy(n){return n.fields.find((t=>t.kind===2))}function Na(n){return n.fields.filter((t=>t.kind!==2))}Rd.UNKNOWN_ID=-1;class rd{constructor(t,e){this.fieldPath=t,this.kind=e}}class Cc{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Cc(0,qn.min())}}function jN(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Tt.fromTimestamp(s===1e9?new Jt(e+1,0):new Jt(e,s));return new qn(a,ht.empty(),t)}function Ow(n){return new qn(n.readTime,n.key,xc)}class qn{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new qn(Tt.min(),ht.empty(),xc)}static max(){return new qn(Tt.max(),ht.empty(),xc)}}function D_(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=ht.comparator(n.documentKey,t.documentKey),e!==0?e:wt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(n){if(n.code!==tt.FAILED_PRECONDITION||n.message!==kw)throw n;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new j(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(s,a)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof j?e:j.resolve(e)}catch(e){return j.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):j.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):j.reject(e)}static resolve(t){return new j(((e,s)=>{e(t)}))}static reject(t){return new j(((e,s)=>{s(t)}))}static waitFor(t){return new j(((e,s)=>{let a=0,l=0,u=!1;t.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&e()}),(d=>s(d)))})),u=!0,l===a&&e()}))}static or(t){let e=j.resolve(!1);for(const s of t)e=e.next((a=>a?j.resolve(a):s()));return e}static forEach(t,e){const s=[];return t.forEach(((a,l)=>{s.push(e.call(this,a,l))})),this.waitFor(s)}static mapArray(t,e){return new j(((s,a)=>{const l=t.length,u=new Array(l);let h=0;for(let d=0;d<l;d++){const p=d;e(t[p]).next((y=>{u[p]=y,++h,h===l&&s(u)}),(y=>a(y)))}}))}static doWhile(t,e){return new j(((s,a)=>{const l=()=>{t()===!0?e().next((()=>{l()}),a):s()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="SimpleDb";class rm{static open(t,e,s,a){try{return new rm(e,t.transaction(a,s))}catch(l){throw new dc(e,l)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Cs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new dc(t,e.error)):this.S.resolve()},this.transaction.onerror=s=>{const a=V_(s.target.error);this.S.reject(new dc(t,a))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(ot(jn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new qN(e)}}class kr{static delete(t){return ot(jn,"Removing database:",t),Oa(uw().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!yw())return!1;if(kr.F())return!0;const t=Ge(),e=kr.M(t),s=0<e&&e<10,a=Uw(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||s||l)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(t,e,s){this.name=t,this.version=e,this.N=s,this.B=null,kr.M(Ge())===12.2&&_n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(ot(jn,"Opening database:",this.name),this.db=await new Promise(((e,s)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;e(u)},a.onblocked=()=>{s(new dc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?s(new ct(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?s(new ct(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):s(new dc(t,u))},a.onupgradeneeded=l=>{ot(jn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{ot(jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,s,a){const l=e==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(t);const h=rm.open(this.db,t,l?"readonly":"readwrite",s),d=a(h).next((p=>(h.C(),p))).catch((p=>(h.abort(p),j.reject(p)))).toPromise();return d.catch((()=>{})),await h.D,d}catch(h){const d=h,p=d.name!=="FirebaseError"&&u<3;if(ot(jn,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Uw(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class FN{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return Oa(this.U.delete())}}class dc extends ct{constructor(t,e){super(tt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Qr(n){return n.name==="IndexedDbTransactionError"}class qN{constructor(t){this.store=t}put(t,e){let s;return e!==void 0?(ot(jn,"PUT",this.store.name,t,e),s=this.store.put(e,t)):(ot(jn,"PUT",this.store.name,"<auto-key>",t),s=this.store.put(t)),Oa(s)}add(t){return ot(jn,"ADD",this.store.name,t,t),Oa(this.store.add(t))}get(t){return Oa(this.store.get(t)).next((e=>(e===void 0&&(e=null),ot(jn,"GET",this.store.name,t,e),e)))}delete(t){return ot(jn,"DELETE",this.store.name,t),Oa(this.store.delete(t))}count(){return ot(jn,"COUNT",this.store.name),Oa(this.store.count())}J(t,e){const s=this.options(t,e),a=s.index?this.store.index(s.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(s.range);return new j(((u,h)=>{l.onerror=d=>{h(d.target.error)},l.onsuccess=d=>{u(d.target.result)}}))}{const l=this.cursor(s),u=[];return this.H(l,((h,d)=>{u.push(d)})).next((()=>u))}}Y(t,e){const s=this.store.getAll(t,e===null?void 0:e);return new j(((a,l)=>{s.onerror=u=>{l(u.target.error)},s.onsuccess=u=>{a(u.target.result)}}))}Z(t,e){ot(jn,"DELETE ALL",this.store.name);const s=this.options(t,e);s.X=!1;const a=this.cursor(s);return this.H(a,((l,u,h)=>h.delete()))}ee(t,e){let s;e?s=t:(s={},e=t);const a=this.cursor(s);return this.H(a,e)}te(t){const e=this.cursor({});return new j(((s,a)=>{e.onerror=l=>{const u=V_(l.target.error);a(u)},e.onsuccess=l=>{const u=l.target.result;u?t(u.primaryKey,u.value).next((h=>{h?u.continue():s()})):s()}}))}H(t,e){const s=[];return new j(((a,l)=>{t.onerror=u=>{l(u.target.error)},t.onsuccess=u=>{const h=u.target.result;if(!h)return void a();const d=new FN(h),p=e(h.primaryKey,h.value,d);if(p instanceof j){const y=p.catch((v=>(d.done(),j.reject(v))));s.push(y)}d.isDone?a():d.G===null?h.continue():h.continue(d.G)}})).next((()=>j.waitFor(s)))}options(t,e){let s;return t!==void 0&&(typeof t=="string"?s=t:e=t),{index:s,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const s=this.store.index(t.index);return t.X?s.openKeyCursor(t.range,e):s.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Oa(n){return new j(((t,e)=>{n.onsuccess=s=>{const a=s.target.result;t(a)},n.onerror=s=>{const a=V_(s.target.error);e(a)}}))}let rA=!1;function V_(n){const t=kr.M(Ge());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const s=new ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rA||(rA=!0,setTimeout((()=>{throw s}),0)),s}}return n}const mc="IndexBackfiller";class HN{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){ot(mc,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();ot(mc,`Documents written: ${e}`)}catch(e){Qr(e)?ot(mc,"Ignoring IndexedDB error during index backfill: ",e):await oo(e)}await this.re(6e4)}))}}class GN{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const s=new Set;let a=e,l=!0;return j.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((u=>{if(u!==null&&!s.has(u))return ot(mc,`Processing collection: ${u}`),this.oe(t,u,a).next((h=>{a-=h,s.add(u)}));l=!1})))).next((()=>e-a))}oe(t,e,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((a=>this.localStore.localDocuments.getNextDocuments(t,e,a,s).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(t,u).next((()=>this._e(a,l))).next((h=>(ot(mc,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(t,e,h)))).next((()=>u.size))}))))}_e(t,e){let s=t;return e.changes.forEach(((a,l)=>{const u=Ow(l);D_(u,s)>0&&(s=u)})),new qn(s.readTime,s.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>e.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ri.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=-1;function am(n){return n==null}function Dc(n){return n===0&&1/n==-1/0}function KN(n){return typeof n=="number"&&Number.isInteger(n)&&!Dc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="";function mn(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=aA(t)),t=QN(n.get(e),t);return aA(t)}function QN(n,t){let e=t;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":e+="";break;case xd:e+="";break;default:e+=l}}return e}function aA(n){return n+xd+""}function Xi(n){const t=n.length;if(_t(t>=2,64408,{path:n}),t===2)return _t(n.charAt(0)===xd&&n.charAt(1)==="",56145,{path:n}),Xt.emptyPath();const e=t-2,s=[];let a="";for(let l=0;l<t;){const u=n.indexOf(xd,l);switch((u<0||u>e)&&gt(50515,{path:n}),n.charAt(u+1)){case"":const h=n.substring(l,u);let d;a.length===0?d=h:(a+=h,d=a,a=""),s.push(d);break;case"":a+=n.substring(l,u),a+="\0";break;case"":a+=n.substring(l,u+1);break;default:gt(61167,{path:n})}l=u+2}return new Xt(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="remoteDocuments",Zc="owner",tl="owner",Vc="mutationQueues",YN="userId",Ai="mutations",oA="batchId",Ba="userMutationsIndex",lA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(n,t){return[n,mn(t)]}function zw(n,t,e){return[n,mn(t),e]}const XN={},wl="documentMutations",Cd="remoteDocumentsV14",$N=["prefixPath","collectionGroup","readTime","documentId"],od="documentKeyIndex",WN=["prefixPath","collectionGroup","documentId"],Bw="collectionGroupIndex",ZN=["collectionGroup","readTime","prefixPath","documentId"],Nc="remoteDocumentGlobal",wy="remoteDocumentGlobalKey",Il="targets",jw="queryTargetsIndex",JN=["canonicalId","targetId"],Rl="targetDocuments",tM=["targetId","path"],N_="documentTargetsIndex",eM=["path","targetId"],Dd="targetGlobalKey",Ha="targetGlobal",Mc="collectionParents",nM=["collectionId","parent"],xl="clientMetadata",iM="clientId",om="bundles",sM="bundleId",lm="namedQueries",rM="name",M_="indexConfiguration",aM="indexId",Iy="collectionGroupIndex",oM="collectionGroup",pc="indexState",lM=["indexId","uid"],Fw="sequenceNumberIndex",uM=["uid","sequenceNumber"],gc="indexEntries",cM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qw="documentKeyIndex",hM=["indexId","uid","orderedDocumentKey"],um="documentOverlays",fM=["userId","collectionPath","documentId"],Ry="collectionPathOverlayIndex",dM=["userId","collectionPath","largestBatchId"],Hw="collectionGroupOverlayIndex",mM=["userId","collectionGroup","largestBatchId"],P_="globals",pM="name",Gw=[Vc,Ai,wl,Ma,Il,Zc,Ha,Rl,xl,Nc,Mc,om,lm],gM=[...Gw,um],Kw=[Vc,Ai,wl,Cd,Il,Zc,Ha,Rl,xl,Nc,Mc,om,lm,um],Qw=Kw,O_=[...Qw,M_,pc,gc],yM=O_,Yw=[...O_,P_],_M=Yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy extends Lw{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Ke(n,t){const e=It(n);return kr.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Yr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Xw(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,e){this.comparator=t,this.root=e||an.EMPTY}insert(t,e){return new pe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new pe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(t,s.key);if(a===0)return e+s.left.size;a<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,s)=>(t(e,s),!1)))}toString(){const t=[];return this.inorderTraversal(((e,s)=>(t.push(`${e}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gf(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gf(this.root,t,this.comparator,!0)}}class Gf{constructor(t,e,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?s(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,e,s,a,l){this.key=t,this.value=e,this.color=s??an.RED,this.left=a??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,a,l){return new an(t??this.key,e??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let a=this;const l=s(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,s),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return an.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw gt(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(t,e,s,a,l){return this}insert(t,e,s){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.comparator=t,this.data=new pe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,s)=>(t(e),!1)))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new cA(this.data.getIterator())}getIteratorFrom(t){return new cA(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((s=>{e=e.add(s)})),e}isEqual(t){if(!(t instanceof ee)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ee(this.comparator);return e.data=t,e}}class cA{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function el(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.fields=t,t.sort(ye.comparator)}static empty(){return new Dn([])}unionWith(t){let e=new ee(ye.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new Dn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Sl(this.fields,t.fields,((e,s)=>e.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new $w("Invalid base64 string: "+l):l}})(t);return new Be(e)}static fromUint8Array(t){const e=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(t);return new Be(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const s=new Uint8Array(e.length);for(let a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const vM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(n){if(_t(!!n,39018),typeof n=="string"){let t=0;const e=vM.exec(n);if(_t(!!e,46558,{timestamp:n}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(n.seconds),nanos:de(n.nanos)}}function de(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ns(n){return typeof n=="string"?Be.fromBase64String(n):Be.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="server_timestamp",Zw="__type__",Jw="__previous_value__",tI="__local_write_time__";function k_(n){var e,s;return((s=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[Zw])==null?void 0:s.stringValue)===Ww}function cm(n){const t=n.mapValue.fields[Jw];return k_(t)?cm(t):t}function Pc(n){const t=Vs(n.mapValue.fields[tI].timestampValue);return new Jt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(t,e,s,a,l,u,h,d,p,y){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const Oc="(default)";class Za{constructor(t,e){this.projectId=t,this.database=e||Oc}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===Oc}isEqual(t){return t instanceof Za&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="__type__",eI="__max__",Vr={mapValue:{fields:{__type__:{stringValue:eI}}}},U_="__vector__",Cl="value",ld={nullValue:"NULL_VALUE"};function Br(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?k_(n)?4:nI(n)?9007199254740991:hm(n)?10:11:gt(28295,{value:n})}function rs(n,t){if(n===t)return!0;const e=Br(n);if(e!==Br(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Pc(n).isEqual(Pc(t));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Vs(a.timestampValue),h=Vs(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(a,l){return Ns(a.bytesValue).isEqual(Ns(l.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(a,l){return de(a.geoPointValue.latitude)===de(l.geoPointValue.latitude)&&de(a.geoPointValue.longitude)===de(l.geoPointValue.longitude)})(n,t);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return de(a.integerValue)===de(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=de(a.doubleValue),h=de(l.doubleValue);return u===h?Dc(u)===Dc(h):isNaN(u)&&isNaN(h)}return!1})(n,t);case 9:return Sl(n.arrayValue.values||[],t.arrayValue.values||[],rs);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(uA(u)!==uA(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!rs(u[d],h[d])))return!1;return!0})(n,t);default:return gt(52216,{left:n})}}function kc(n,t){return(n.values||[]).find((e=>rs(e,t)))!==void 0}function jr(n,t){if(n===t)return 0;const e=Br(n),s=Br(t);if(e!==s)return wt(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return wt(n.booleanValue,t.booleanValue);case 2:return(function(l,u){const h=de(l.integerValue||l.doubleValue),d=de(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,t);case 3:return hA(n.timestampValue,t.timestampValue);case 4:return hA(Pc(n),Pc(t));case 5:return Ay(n.stringValue,t.stringValue);case 6:return(function(l,u){const h=Ns(l),d=Ns(u);return h.compareTo(d)})(n.bytesValue,t.bytesValue);case 7:return(function(l,u){const h=l.split("/"),d=u.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=wt(h[p],d[p]);if(y!==0)return y}return wt(h.length,d.length)})(n.referenceValue,t.referenceValue);case 8:return(function(l,u){const h=wt(de(l.latitude),de(u.latitude));return h!==0?h:wt(de(l.longitude),de(u.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return fA(n.arrayValue,t.arrayValue);case 10:return(function(l,u){var b,w,N,k;const h=l.fields||{},d=u.fields||{},p=(b=h[Cl])==null?void 0:b.arrayValue,y=(w=d[Cl])==null?void 0:w.arrayValue,v=wt(((N=p==null?void 0:p.values)==null?void 0:N.length)||0,((k=y==null?void 0:y.values)==null?void 0:k.length)||0);return v!==0?v:fA(p,y)})(n.mapValue,t.mapValue);case 11:return(function(l,u){if(l===Vr.mapValue&&u===Vr.mapValue)return 0;if(l===Vr.mapValue)return 1;if(u===Vr.mapValue)return-1;const h=l.fields||{},d=Object.keys(h),p=u.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const b=Ay(d[v],y[v]);if(b!==0)return b;const w=jr(h[d[v]],p[y[v]]);if(w!==0)return w}return wt(d.length,y.length)})(n.mapValue,t.mapValue);default:throw gt(23264,{he:e})}}function hA(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return wt(n,t);const e=Vs(n),s=Vs(t),a=wt(e.seconds,s.seconds);return a!==0?a:wt(e.nanos,s.nanos)}function fA(n,t){const e=n.values||[],s=t.values||[];for(let a=0;a<e.length&&a<s.length;++a){const l=jr(e[a],s[a]);if(l)return l}return wt(e.length,s.length)}function Dl(n){return Cy(n)}function Cy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const s=Vs(e);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Ns(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return ht.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let s="[",a=!0;for(const l of e.values||[])a?a=!1:s+=",",s+=Cy(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(e){const s=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Cy(e.fields[u])}`;return a+"}"})(n.mapValue):gt(61005,{value:n})}function ud(n){switch(Br(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=cm(n);return t?16+ud(t):16;case 5:return 2*n.stringValue.length;case 6:return Ns(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+ud(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Yr(s.fields,((l,u)=>{a+=l.length+ud(u)})),a})(n.mapValue);default:throw gt(13486,{value:n})}}function Lc(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Dy(n){return!!n&&"integerValue"in n}function Uc(n){return!!n&&"arrayValue"in n}function dA(n){return!!n&&"nullValue"in n}function mA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cd(n){return!!n&&"mapValue"in n}function hm(n){var e,s;return((s=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[L_])==null?void 0:s.stringValue)===U_}function yc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Yr(n.mapValue.fields,((e,s)=>t.mapValue.fields[e]=yc(s))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=yc(n.arrayValue.values[e]);return t}return{...n}}function nI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eI}const iI={mapValue:{fields:{[L_]:{stringValue:U_},[Cl]:{arrayValue:{}}}}};function EM(n){return"nullValue"in n?ld:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lc(Za.empty(),ht.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?hm(n)?iI:{mapValue:{}}:gt(35942,{value:n})}function bM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lc(Za.empty(),ht.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?iI:"mapValue"in n?hm(n)?{mapValue:{}}:Vr:gt(61959,{value:n})}function pA(n,t){const e=jr(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function gA(n,t){const e=jr(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.value=t}static empty(){return new fn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!cd(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=yc(e)}setAll(t){let e=ye.emptyPath(),s={},a=[];t.forEach(((u,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,s,a),s={},a=[],e=h.popLast()}u?s[h.lastSegment()]=yc(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(e);this.applyChanges(l,s,a)}delete(t){const e=this.field(t.popLast());cd(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return rs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let a=e.mapValue.fields[t.get(s)];cd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,s){Yr(e,((a,l)=>t[a]=l));for(const a of s)delete t[a]}clone(){return new fn(yc(this.value))}}function sI(n){const t=[];return Yr(n.fields,((e,s)=>{const a=new ye([e]);if(cd(s)){const l=sI(s.mapValue).fields;if(l.length===0)t.push(a);else for(const u of l)t.push(a.child(u))}else t.push(a)})),new Dn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,e,s,a,l,u,h){this.key=t,this.documentType=e,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(t){return new be(t,0,Tt.min(),Tt.min(),Tt.min(),fn.empty(),0)}static newFoundDocument(t,e,s,a){return new be(t,1,e,Tt.min(),s,a,0)}static newNoDocument(t,e){return new be(t,2,e,Tt.min(),Tt.min(),fn.empty(),0)}static newUnknownDocument(t,e){return new be(t,3,e,Tt.min(),Tt.min(),fn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof be&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,e){this.position=t,this.inclusive=e}}function yA(n,t,e){let s=0;for(let a=0;a<n.position.length;a++){const l=t[a],u=n.position[a];if(l.field.isKeyField()?s=ht.comparator(ht.fromName(u.referenceValue),e.key):s=jr(u,e.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function _A(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!rs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,e="asc"){this.field=t,this.dir=e}}function AM(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{}class Bt extends rI{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new SM(t,e,s):e==="array-contains"?new RM(t,s):e==="in"?new hI(t,s):e==="not-in"?new xM(t,s):e==="array-contains-any"?new CM(t,s):new Bt(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new wM(t,s):new IM(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(jr(e,this.value)):e!==null&&Br(this.value)===Br(e)&&this.matchesComparison(jr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class te extends rI{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new te(t,e)}matches(t){return Nl(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nl(n){return n.op==="and"}function Vy(n){return n.op==="or"}function z_(n){return aI(n)&&Nl(n)}function aI(n){for(const t of n.filters)if(t instanceof te)return!1;return!0}function Ny(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+Dl(n.value);if(z_(n))return n.filters.map((t=>Ny(t))).join(",");{const t=n.filters.map((e=>Ny(e))).join(",");return`${n.op}(${t})`}}function oI(n,t){return n instanceof Bt?(function(s,a){return a instanceof Bt&&s.op===a.op&&s.field.isEqual(a.field)&&rs(s.value,a.value)})(n,t):n instanceof te?(function(s,a){return a instanceof te&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&oI(u,a.filters[h])),!0):!1})(n,t):void gt(19439)}function lI(n,t){const e=n.filters.concat(t);return te.create(e,n.op)}function uI(n){return n instanceof Bt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Dl(e.value)}`})(n):n instanceof te?(function(e){return e.op.toString()+" {"+e.getFilters().map(uI).join(" ,")+"}"})(n):"Filter"}class SM extends Bt{constructor(t,e,s){super(t,e,s),this.key=ht.fromName(s.referenceValue)}matches(t){const e=ht.comparator(t.key,this.key);return this.matchesComparison(e)}}class wM extends Bt{constructor(t,e){super(t,"in",e),this.keys=cI("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class IM extends Bt{constructor(t,e){super(t,"not-in",e),this.keys=cI("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function cI(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((s=>ht.fromName(s.referenceValue)))}class RM extends Bt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Uc(e)&&kc(e.arrayValue,this.value)}}class hI extends Bt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&kc(this.value.arrayValue,e)}}class xM extends Bt{constructor(t,e){super(t,"not-in",e)}matches(t){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!kc(this.value.arrayValue,e)}}class CM extends Bt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Uc(e)||!e.arrayValue.values)&&e.arrayValue.values.some((s=>kc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(t,e=null,s=[],a=[],l=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function My(n,t=null,e=[],s=[],a=null,l=null,u=null){return new DM(n,t,e,s,a,l,u)}function Ja(n){const t=It(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((s=>Ny(s))).join(","),e+="|ob:",e+=t.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),am(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((s=>Dl(s))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((s=>Dl(s))).join(",")),t.Te=e}return t.Te}function Jc(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!AM(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!oI(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!_A(n.startAt,t.startAt)&&_A(n.endAt,t.endAt)}function Vd(n){return ht.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Nd(n,t){return n.filters.filter((e=>e instanceof Bt&&e.field.isEqual(t)))}function vA(n,t,e){let s=ld,a=!0;for(const l of Nd(n,t)){let u=ld,h=!0;switch(l.op){case"<":case"<=":u=EM(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,h=!1;break;case"!=":case"not-in":u=ld}pA({value:s,inclusive:a},{value:u,inclusive:h})<0&&(s=u,a=h)}if(e!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const u=e.position[l];pA({value:s,inclusive:a},{value:u,inclusive:e.inclusive})<0&&(s=u,a=e.inclusive);break}}return{value:s,inclusive:a}}function TA(n,t,e){let s=Vr,a=!0;for(const l of Nd(n,t)){let u=Vr,h=!0;switch(l.op){case">=":case">":u=bM(l.value),h=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,h=!1;break;case"!=":case"not-in":u=Vr}gA({value:s,inclusive:a},{value:u,inclusive:h})>0&&(s=u,a=h)}if(e!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const u=e.position[l];gA({value:s,inclusive:a},{value:u,inclusive:e.inclusive})>0&&(s=u,a=e.inclusive);break}}return{value:s,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,e=null,s=[],a=[],l=null,u="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VM(n,t,e,s,a,l,u,h){return new jl(n,t,e,s,a,l,u,h)}function fm(n){return new jl(n)}function EA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fI(n){return n.collectionGroup!==null}function _c(n){const t=It(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const l of t.explicitOrderBy)t.Ie.push(l),e.add(l.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new ee(ye.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(t).forEach((l=>{e.has(l.canonicalString())||l.isKeyField()||t.Ie.push(new zc(l,s))})),e.has(ye.keyField().canonicalString())||t.Ie.push(new zc(ye.keyField(),s))}return t.Ie}function oi(n){const t=It(n);return t.Ee||(t.Ee=NM(t,_c(n))),t.Ee}function NM(n,t){if(n.limitType==="F")return My(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new zc(a.field,l)}));const e=n.endAt?new Vl(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Vl(n.startAt.position,n.startAt.inclusive):null;return My(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function Py(n,t){const e=n.filters.concat([t]);return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Oy(n,t,e){return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function dm(n,t){return Jc(oi(n),oi(t))&&n.limitType===t.limitType}function dI(n){return`${Ja(oi(n))}|lt:${n.limitType}`}function ol(n){return`Query(target=${(function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map((a=>uI(a))).join(", ")}]`),am(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((a=>Dl(a))).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((a=>Dl(a))).join(",")),`Target(${s})`})(oi(n))}; limitType=${n.limitType})`}function th(n,t){return t.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ht.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,t)&&(function(s,a){for(const l of _c(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,t)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,t)&&(function(s,a){return!(s.startAt&&!(function(u,h,d){const p=yA(u,h,d);return u.inclusive?p<=0:p<0})(s.startAt,_c(s),a)||s.endAt&&!(function(u,h,d){const p=yA(u,h,d);return u.inclusive?p>=0:p>0})(s.endAt,_c(s),a))})(n,t)}function MM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mI(n){return(t,e)=>{let s=!1;for(const a of _c(n)){const l=PM(a,t,e);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function PM(n,t,e){const s=n.field.isKeyField()?ht.comparator(t.key,e.key):(function(l,u,h){const d=u.data.field(l),p=h.data.field(l);return d!==null&&p!==null?jr(d,p):gt(42886)})(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return gt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),a=this.inner[s];if(a===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return s.length===1?delete this.inner[e]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Yr(this.inner,((e,s)=>{for(const[a,l]of s)t(a,l)}))}isEmpty(){return Xw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new pe(ht.comparator);function Fn(){return OM}const pI=new pe(ht.comparator);function oc(...n){let t=pI;for(const e of n)t=t.insert(e.key,e);return t}function gI(n){let t=pI;return n.forEach(((e,s)=>t=t.insert(e,s.overlayedDocument))),t}function $i(){return vc()}function yI(){return vc()}function vc(){return new zs((n=>n.toString()),((n,t)=>n.isEqual(t)))}const kM=new pe(ht.comparator),LM=new ee(ht.comparator);function Mt(...n){let t=LM;for(const e of n)t=t.add(e);return t}const UM=new ee(wt);function zM(){return UM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(t)?"-0":t}}function _I(n){return{integerValue:""+n}}function BM(n,t){return KN(t)?_I(t):B_(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this._=void 0}}function jM(n,t,e){return n instanceof Bc?(function(a,l){const u={fields:{[Zw]:{stringValue:Ww},[tI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&k_(l)&&(l=cm(l)),l&&(u.fields[Jw]=l),{mapValue:u}})(e,t):n instanceof Ml?TI(n,t):n instanceof Pl?EI(n,t):(function(a,l){const u=vI(a,l),h=bA(u)+bA(a.Ae);return Dy(u)&&Dy(a.Ae)?_I(h):B_(a.serializer,h)})(n,t)}function FM(n,t,e){return n instanceof Ml?TI(n,t):n instanceof Pl?EI(n,t):e}function vI(n,t){return n instanceof jc?(function(s){return Dy(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(t)?t:{integerValue:0}:null}class Bc extends mm{}class Ml extends mm{constructor(t){super(),this.elements=t}}function TI(n,t){const e=bI(t);for(const s of n.elements)e.some((a=>rs(a,s)))||e.push(s);return{arrayValue:{values:e}}}class Pl extends mm{constructor(t){super(),this.elements=t}}function EI(n,t){let e=bI(t);for(const s of n.elements)e=e.filter((a=>!rs(a,s)));return{arrayValue:{values:e}}}class jc extends mm{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function bA(n){return de(n.integerValue||n.doubleValue)}function bI(n){return Uc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(t,e){this.field=t,this.transform=e}}function HM(n,t){return n.field.isEqual(t.field)&&(function(s,a){return s instanceof Ml&&a instanceof Ml||s instanceof Pl&&a instanceof Pl?Sl(s.elements,a.elements,rs):s instanceof jc&&a instanceof jc?rs(s.Ae,a.Ae):s instanceof Bc&&a instanceof Bc})(n.transform,t.transform)}class GM{constructor(t,e){this.version=t,this.transformResults=e}}class vn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new vn}static exists(t){return new vn(void 0,t)}static updateTime(t){return new vn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hd(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class pm{}function AI(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new gm(n.key,vn.none()):new Fl(n.key,n.data,vn.none());{const e=n.data,s=fn.empty();let a=new ee(ye.comparator);for(let l of t.fields)if(!a.has(l)){let u=e.field(l);u===null&&l.length>1&&(l=l.popLast(),u=e.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Bs(n.key,s,new Dn(a.toArray()),vn.none())}}function KM(n,t,e){n instanceof Fl?(function(a,l,u){const h=a.value.clone(),d=SA(a.fieldTransforms,l,u.transformResults);h.setAll(d),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,t,e):n instanceof Bs?(function(a,l,u){if(!hd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=SA(a.fieldTransforms,l,u.transformResults),d=l.data;d.setAll(SI(a)),d.setAll(h),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,t,e):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,t,e)}function Tc(n,t,e,s){return n instanceof Fl?(function(l,u,h,d){if(!hd(l.precondition,u))return h;const p=l.value.clone(),y=wA(l.fieldTransforms,d,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,t,e,s):n instanceof Bs?(function(l,u,h,d){if(!hd(l.precondition,u))return h;const p=wA(l.fieldTransforms,d,u),y=u.data;return y.setAll(SI(l)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,t,e,s):(function(l,u,h){return hd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,t,e)}function QM(n,t){let e=null;for(const s of n.fieldTransforms){const a=t.data.field(s.field),l=vI(s.transform,a||null);l!=null&&(e===null&&(e=fn.empty()),e.set(s.field,l))}return e||null}function AA(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Sl(s,a,((l,u)=>HM(l,u)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Fl extends pm{constructor(t,e,s,a=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Bs extends pm{constructor(t,e,s,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function SI(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}})),t}function SA(n,t,e){const s=new Map;_t(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let a=0;a<e.length;a++){const l=n[a],u=l.transform,h=t.data.field(l.field);s.set(l.field,FM(u,h,e[a]))}return s}function wA(n,t,e){const s=new Map;for(const a of n){const l=a.transform,u=e.data.field(a.field);s.set(a.field,jM(l,u,t))}return s}class gm extends pm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wI extends pm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(t,e,s,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&KM(l,t,s[a])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=Tc(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=Tc(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=yI();return this.mutations.forEach((a=>{const l=t.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=e.has(a.key)?null:h;const d=AI(u,h);d!==null&&s.set(a.key,d),u.isValidDocument()||u.convertToNoDocument(Tt.min())})),s}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Mt())}isEqual(t){return this.batchId===t.batchId&&Sl(this.mutations,t.mutations,((e,s)=>AA(e,s)))&&Sl(this.baseMutations,t.baseMutations,((e,s)=>AA(e,s)))}}class F_{constructor(t,e,s,a){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=a}static from(t,e,s){_t(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let a=(function(){return kM})();const l=t.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new F_(t,e,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke,Ht;function XM(n){switch(n){case tt.OK:return gt(64938);case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0;default:return gt(15467,{code:n})}}function II(n){if(n===void 0)return _n("GRPC error has no .code"),tt.UNKNOWN;switch(n){case ke.OK:return tt.OK;case ke.CANCELLED:return tt.CANCELLED;case ke.UNKNOWN:return tt.UNKNOWN;case ke.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case ke.INTERNAL:return tt.INTERNAL;case ke.UNAVAILABLE:return tt.UNAVAILABLE;case ke.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case ke.NOT_FOUND:return tt.NOT_FOUND;case ke.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case ke.ABORTED:return tt.ABORTED;case ke.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case ke.DATA_LOSS:return tt.DATA_LOSS;default:return gt(39323,{code:n})}}(Ht=ke||(ke={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=new Or([4294967295,4294967295],0);function IA(n){const t=$M().encode(n),e=new Sw;return e.update(t),new Uint8Array(e.digest())}function RA(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Or([e,s],0),new Or([a,l],0)]}class H_{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new lc(`Invalid padding: ${e}`);if(s<0)throw new lc(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new lc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Or.fromNumber(this.ge)}ye(t,e,s){let a=t.add(e.multiply(Or.fromNumber(s)));return a.compare(WM)===1&&(a=new Or([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=IA(t),[s,a]=RA(e);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(t,e,s){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),u=new H_(l,a,e);return s.forEach((h=>u.insert(h))),u}insert(t){if(this.ge===0)return;const e=IA(t),[s,a]=RA(e);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(t,e,s,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const a=new Map;return a.set(t,eh.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new ym(Tt.min(),a,new pe(wt),Fn(),Mt())}}class eh{constructor(t,e,s,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new eh(s,e,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,e,s,a){this.be=t,this.removedTargetIds=e,this.key=s,this.De=a}}class RI{constructor(t,e){this.targetId=t,this.Ce=e}}class xI{constructor(t,e,s=Be.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=a}}class xA{constructor(){this.ve=0,this.Fe=CA(),this.Me=Be.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Mt(),e=Mt(),s=Mt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:s=s.add(a);break;default:gt(38017,{changeType:l})}})),new eh(this.Me,this.xe,t,e,s)}qe(){this.Oe=!1,this.Fe=CA()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZM{constructor(t){this.Ge=t,this.ze=new Map,this.je=Fn(),this.Je=Kf(),this.He=Kf(),this.Ye=new pe(wt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const s=this.nt(e);switch(t.state){case 0:this.rt(e)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),s.Le(t.resumeToken));break;default:gt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((s,a)=>{this.rt(a)&&e(a)}))}st(t){const e=t.targetId,s=t.Ce.count,a=this.ot(e);if(a){const l=a.target;if(Vd(l))if(s===0){const u=new ht(l.path);this.et(e,u,be.newNoDocument(u,Tt.min()))}else _t(s===1,20013,{expectedCount:s});else{const u=this._t(e);if(u!==s){const h=this.ut(t),d=h?this.ct(h,t,u):1;if(d!==0){this.it(e);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,p)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=e;let u,h;try{u=Ns(s).toUint8Array()}catch(d){if(d instanceof $w)return Al("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new H_(u,a,l)}catch(d){return Al(d instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(t,e,s){return e.Ce.count===s-this.Pt(t,e.targetId)?0:2}Pt(t,e){const s=this.Ge.getRemoteKeysForTarget(e);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;t.mightContain(h)||(this.et(e,l,null),a++)})),a}Tt(t){const e=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&Vd(h.target)){const d=new ht(h.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,be.newNoDocument(d,t))}l.Be&&(e.set(u,l.ke()),l.qe())}}));let s=Mt();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(t)));const a=new ym(t,e,this.Ye,this.je,s);return this.je=Fn(),this.Je=Kf(),this.He=Kf(),this.Ye=new pe(wt),a}Xe(t,e){if(!this.rt(t))return;const s=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,s),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,s){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.Qe(e,1):a.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),s&&(this.je=this.je.insert(e,s))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new xA,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ee(wt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ee(wt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ot("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new xA),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Kf(){return new pe(ht.comparator)}function CA(){return new pe(ht.comparator)}const JM={asc:"ASCENDING",desc:"DESCENDING"},tP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eP={and:"AND",or:"OR"};class nP{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ky(n,t){return n.useProto3Json||am(t)?t:{value:t}}function Ol(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function CI(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function iP(n,t){return Ol(n,t.toTimestamp())}function En(n){return _t(!!n,49232),Tt.fromTimestamp((function(e){const s=Vs(e);return new Jt(s.seconds,s.nanos)})(n))}function G_(n,t){return Ly(n,t).canonicalString()}function Ly(n,t){const e=(function(a){return new Xt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return t===void 0?e:e.child(t)}function DI(n){const t=Xt.fromString(n);return _t(zI(t),10190,{key:t.toString()}),t}function Md(n,t){return G_(n.databaseId,t.path)}function Ga(n,t){const e=DI(t);if(e.get(1)!==n.databaseId.projectId)throw new ct(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ct(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ht(MI(e))}function VI(n,t){return G_(n.databaseId,t)}function NI(n){const t=DI(n);return t.length===4?Xt.emptyPath():MI(t)}function Uy(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MI(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function DA(n,t,e){return{name:Md(n,t),fields:e.value.mapValue.fields}}function sP(n,t,e){const s=Ga(n,t.name),a=En(t.updateTime),l=t.createTime?En(t.createTime):Tt.min(),u=new fn({mapValue:{fields:t.fields}}),h=be.newFoundDocument(s,a,l,u);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function rP(n,t){let e;if("targetChange"in t){t.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:gt(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(_t(y===void 0||typeof y=="string",58123),Be.fromBase64String(y||"")):(_t(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Be.fromUint8Array(y||new Uint8Array))})(n,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&(function(p){const y=p.code===void 0?tt.UNKNOWN:II(p.code);return new ct(y,p.message||"")})(u);e=new xI(s,a,l,h||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const a=Ga(n,s.document.name),l=En(s.document.updateTime),u=s.document.createTime?En(s.document.createTime):Tt.min(),h=new fn({mapValue:{fields:s.document.fields}}),d=be.newFoundDocument(a,l,u,h),p=s.targetIds||[],y=s.removedTargetIds||[];e=new fd(p,y,d.key,d)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const a=Ga(n,s.document),l=s.readTime?En(s.readTime):Tt.min(),u=be.newNoDocument(a,l),h=s.removedTargetIds||[];e=new fd([],h,u.key,u)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const a=Ga(n,s.document),l=s.removedTargetIds||[];e=new fd([],l,a,null)}else{if(!("filter"in t))return gt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new YM(a,l),h=s.targetId;e=new RI(h,u)}}return e}function Pd(n,t){let e;if(t instanceof Fl)e={update:DA(n,t.key,t.value)};else if(t instanceof gm)e={delete:Md(n,t.key)};else if(t instanceof Bs)e={update:DA(n,t.key,t.data),updateMask:hP(t.fieldMask)};else{if(!(t instanceof wI))return gt(16599,{Vt:t.type});e={verify:Md(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof Bc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ml)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Pl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof jc)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw gt(20930,{transform:u.transform})})(0,s)))),t.precondition.isNone||(e.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:iP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:gt(27497)})(n,t.precondition)),e}function zy(n,t){const e=t.currentDocument?(function(l){return l.updateTime!==void 0?vn.updateTime(En(l.updateTime)):l.exists!==void 0?vn.exists(l.exists):vn.none()})(t.currentDocument):vn.none(),s=t.updateTransforms?t.updateTransforms.map((a=>(function(u,h){let d=null;if("setToServerValue"in h)_t(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new Bc;else if("appendMissingElements"in h){const y=h.appendMissingElements.values||[];d=new Ml(y)}else if("removeAllFromArray"in h){const y=h.removeAllFromArray.values||[];d=new Pl(y)}else"increment"in h?d=new jc(u,h.increment):gt(16584,{proto:h});const p=ye.fromServerFormat(h.fieldPath);return new qM(p,d)})(n,a))):[];if(t.update){t.update.name;const a=Ga(n,t.update.name),l=new fn({mapValue:{fields:t.update.fields}});if(t.updateMask){const u=(function(d){const p=d.fieldPaths||[];return new Dn(p.map((y=>ye.fromServerFormat(y))))})(t.updateMask);return new Bs(a,l,u,e,s)}return new Fl(a,l,e,s)}if(t.delete){const a=Ga(n,t.delete);return new gm(a,e)}if(t.verify){const a=Ga(n,t.verify);return new wI(a,e)}return gt(1463,{proto:t})}function aP(n,t){return n&&n.length>0?(_t(t!==void 0,14353),n.map((e=>(function(a,l){let u=a.updateTime?En(a.updateTime):En(l);return u.isEqual(Tt.min())&&(u=En(l)),new GM(u,a.transformResults||[])})(e,t)))):[]}function PI(n,t){return{documents:[VI(n,t.path)]}}function OI(n,t){const e={structuredQuery:{}},s=t.path;let a;t.collectionGroup!==null?(a=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=VI(n,a);const l=(function(p){if(p.length!==0)return UI(te.create(p,"and"))})(t.filters);l&&(e.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((y=>(function(b){return{field:ll(b.field),direction:lP(b.dir)}})(y)))})(t.orderBy);u&&(e.structuredQuery.orderBy=u);const h=ky(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:e,parent:a}}function kI(n){let t=NI(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let a=null;if(s>0){_t(s===1,65062);const y=e.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];e.where&&(l=(function(v){const b=LI(v);return b instanceof te&&z_(b)?b.getFilters():[b]})(e.where));let u=[];e.orderBy&&(u=(function(v){return v.map((b=>(function(N){return new zc(ul(N.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(b)))})(e.orderBy));let h=null;e.limit&&(h=(function(v){let b;return b=typeof v=="object"?v.value:v,am(b)?null:b})(e.limit));let d=null;e.startAt&&(d=(function(v){const b=!!v.before,w=v.values||[];return new Vl(w,b)})(e.startAt));let p=null;return e.endAt&&(p=(function(v){const b=!v.before,w=v.values||[];return new Vl(w,b)})(e.endAt)),VM(t,a,u,l,h,"F",d,p)}function oP(n,t){const e=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:a})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function LI(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=ul(e.unaryFilter.field);return Bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=ul(e.unaryFilter.field);return Bt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ul(e.unaryFilter.field);return Bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ul(e.unaryFilter.field);return Bt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Bt.create(ul(e.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return te.create(e.compositeFilter.filters.map((s=>LI(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(e.compositeFilter.op))})(n):gt(30097,{filter:n})}function lP(n){return JM[n]}function uP(n){return tP[n]}function cP(n){return eP[n]}function ll(n){return{fieldPath:n.canonicalString()}}function ul(n){return ye.fromServerFormat(n.fieldPath)}function UI(n){return n instanceof Bt?(function(e){if(e.op==="=="){if(mA(e.value))return{unaryFilter:{field:ll(e.field),op:"IS_NAN"}};if(dA(e.value))return{unaryFilter:{field:ll(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(mA(e.value))return{unaryFilter:{field:ll(e.field),op:"IS_NOT_NAN"}};if(dA(e.value))return{unaryFilter:{field:ll(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(e.field),op:uP(e.op),value:e.value}}})(n):n instanceof te?(function(e){const s=e.getFilters().map((a=>UI(a)));return s.length===1?s[0]:{compositeFilter:{op:cP(e.op),filters:s}}})(n):gt(54877,{filter:n})}function hP(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function zI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(t,e,s,a,l=Tt.min(),u=Tt.min(),h=Be.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new Is(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.yt=t}}function fP(n,t){let e;if(t.document)e=sP(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const s=ht.fromSegments(t.noDocument.path),a=eo(t.noDocument.readTime);e=be.newNoDocument(s,a),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return gt(56709);{const s=ht.fromSegments(t.unknownDocument.path),a=eo(t.unknownDocument.version);e=be.newUnknownDocument(s,a)}}return t.readTime&&e.setReadTime((function(a){const l=new Jt(a[0],a[1]);return Tt.fromTimestamp(l)})(t.readTime)),e}function VA(n,t){const e=t.key,s={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Od(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())s.document=(function(l,u){return{name:Md(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Ol(l,u.version.toTimestamp()),createTime:Ol(l,u.createTime.toTimestamp())}})(n.yt,t);else if(t.isNoDocument())s.noDocument={path:e.path.toArray(),readTime:to(t.version)};else{if(!t.isUnknownDocument())return gt(57904,{document:t});s.unknownDocument={path:e.path.toArray(),version:to(t.version)}}return s}function Od(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function to(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function eo(n){const t=new Jt(n.seconds,n.nanoseconds);return Tt.fromTimestamp(t)}function ka(n,t){const e=(t.baseMutations||[]).map((l=>zy(n.yt,l)));for(let l=0;l<t.mutations.length-1;++l){const u=t.mutations[l];if(l+1<t.mutations.length&&t.mutations[l+1].transform!==void 0){const h=t.mutations[l+1];u.updateTransforms=h.transform.fieldTransforms,t.mutations.splice(l+1,1),++l}}const s=t.mutations.map((l=>zy(n.yt,l))),a=Jt.fromMillis(t.localWriteTimeMs);return new j_(t.batchId,a,e,s)}function uc(n){const t=eo(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?eo(n.lastLimboFreeSnapshotVersion):Tt.min();let s;return s=(function(l){return l.documents!==void 0})(n.query)?(function(l){const u=l.documents.length;return _t(u===1,1966,{count:u}),oi(fm(NI(l.documents[0])))})(n.query):(function(l){return oi(kI(l))})(n.query),new Is(s,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Be.fromBase64String(n.resumeToken))}function jI(n,t){const e=to(t.snapshotVersion),s=to(t.lastLimboFreeSnapshotVersion);let a;a=Vd(t.target)?PI(n.yt,t.target):OI(n.yt,t.target).ft;const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ja(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function FI(n){const t=kI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Oy(t,t.limit,"L"):t}function Kg(n,t){return new q_(t.largestBatchId,zy(n.yt,t.overlayMutation))}function NA(n,t){const e=t.path.lastSegment();return[n,mn(t.path.popLast()),e]}function MA(n,t,e,s){return{indexId:n,uid:t,sequenceNumber:e,readTime:to(s.readTime),documentKey:mn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{getBundleMetadata(t,e){return PA(t).get(e).next((s=>{if(s)return(function(l){return{id:l.bundleId,createTime:eo(l.createTime),version:l.version}})(s)}))}saveBundleMetadata(t,e){return PA(t).put((function(a){return{bundleId:a.id,createTime:to(En(a.createTime)),version:a.version}})(e))}getNamedQuery(t,e){return OA(t).get(e).next((s=>{if(s)return(function(l){return{name:l.name,query:FI(l.bundledQuery),readTime:eo(l.readTime)}})(s)}))}saveNamedQuery(t,e){return OA(t).put((function(a){return{name:a.name,readTime:to(En(a.readTime)),bundledQuery:a.bundledQuery}})(e))}}function PA(n){return Ke(n,om)}function OA(n){return Ke(n,lm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const s=e.uid||"";return new _m(t,s)}getOverlay(t,e){return tc(t).get(NA(this.userId,e)).next((s=>s?Kg(this.serializer,s):null))}getOverlays(t,e){const s=$i();return j.forEach(e,(a=>this.getOverlay(t,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(t,e,s){const a=[];return s.forEach(((l,u)=>{const h=new q_(e,u);a.push(this.St(t,h))})),j.waitFor(a)}removeOverlaysForBatchId(t,e,s){const a=new Set;e.forEach((u=>a.add(mn(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,s],[this.userId,u,s+1],!1,!0);l.push(tc(t).Z(Ry,h))})),j.waitFor(l)}getOverlaysForCollection(t,e,s){const a=$i(),l=mn(e),u=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return tc(t).J(Ry,u).next((h=>{for(const d of h){const p=Kg(this.serializer,d);a.set(p.getKey(),p)}return a}))}getOverlaysForCollectionGroup(t,e,s,a){const l=$i();let u;const h=IDBKeyRange.bound([this.userId,e,s],[this.userId,e,Number.POSITIVE_INFINITY],!0);return tc(t).ee({index:Hw,range:h},((d,p,y)=>{const v=Kg(this.serializer,p);l.size()<a||v.largestBatchId===u?(l.set(v.getKey(),v),u=v.largestBatchId):y.done()})).next((()=>l))}St(t,e){return tc(t).put((function(a,l,u){const[h,d,p]=NA(l,u.mutation.key);return{userId:l,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Pd(a.yt,u.mutation)}})(this.serializer,this.userId,e))}}function tc(n){return Ke(n,um)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{bt(t){return Ke(t,P_)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const s=e==null?void 0:e.value;return s?Be.fromUint8Array(s):Be.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(de(t.integerValue));else if("doubleValue"in t){const s=de(t.doubleValue);isNaN(s)?this.Ft(e,13):(this.Ft(e,15),Dc(s)?e.Mt(0):e.Mt(s))}else if("timestampValue"in t){let s=t.timestampValue;this.Ft(e,20),typeof s=="string"&&(s=Vs(s)),e.xt(`${s.seconds||""}`),e.Mt(s.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Ns(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const s=t.geoPointValue;this.Ft(e,45),e.Mt(s.latitude||0),e.Mt(s.longitude||0)}else"mapValue"in t?nI(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):hm(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):gt(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const s=t.fields||{};this.Ft(e,55);for(const a of Object.keys(s))this.Ot(a,e),this.Ct(s[a],e)}kt(t,e){var u,h;const s=t.fields||{};this.Ft(e,53);const a=Cl,l=((h=(u=s[a].arrayValue)==null?void 0:u.values)==null?void 0:h.length)||0;this.Ft(e,15),e.Mt(de(l)),this.Ot(a,e),this.Ct(s[a],e)}Qt(t,e){const s=t.values||[];this.Ft(e,50);for(const a of s)this.Ct(a,e)}Lt(t,e){this.Ft(e,37),ht.fromName(t).path.forEach((s=>{this.Ft(e,60),this.Ut(s,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}La.Kt=new La;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=255;function pP(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function kA(n){const t=64-(function(s){let a=0;for(let l=0;l<8;++l){const u=pP(255&s[l]);if(a+=u,u!==8)break}return a})(n);return Math.ceil(t/8)}class gP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let s=e.next();for(;!s.done;)this.Gt(s.value),s=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let s=e.next();for(;!s.done;)this.Jt(s.value),s=e.next();this.Ht()}Yt(t){for(const e of t){const s=e.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const a=e.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(t){for(const e of t){const s=e.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const a=e.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(t){const e=this.en(t),s=kA(e);this.tn(1+s),this.buffer[this.position++]=255&s;for(let a=e.length-s;a<e.length;++a)this.buffer[this.position++]=255&e[a]}nn(t){const e=this.en(t),s=kA(e);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let a=e.length-s;a<e.length;++a)this.buffer[this.position++]=~(255&e[a])}rn(){this.sn(nl),this.sn(255)}_n(){this.an(nl),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(t),s=!!(128&e[0]);e[0]^=s?255:128;for(let a=1;a<e.length;++a)e[a]^=s?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===nl?(this.sn(nl),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===nl?(this.an(nl),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let s=2*this.buffer.length;s<e&&(s=e);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class yP{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class _P{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class ec{constructor(){this.cn=new gP,this.ln=new yP(this.cn),this.hn=new _P(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t,e,s,a){this.Tn=t,this.In=e,this.En=s,this.dn=a}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,s=new Uint8Array(e);return s.set(this.dn,0),e!==t?s.set([0],this.dn.length):++s[s.length-1],new Ua(this.Tn,this.In,this.En,s)}Rn(t,e,s){return{indexId:this.Tn,uid:t,arrayValue:dd(this.En),directionalValue:dd(this.dn),orderedDocumentKey:dd(e),documentKey:s.path.toArray()}}Vn(t,e,s){const a=this.Rn(t,e,s);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Tr(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=LA(n.En,t.En),e!==0?e:(e=LA(n.dn,t.dn),e!==0?e:ht.comparator(n.In,t.In)))}function LA(n,t){for(let e=0;e<n.length&&e<t.length;++e){const s=n[e]-t[e];if(s!==0)return s}return n.length-t.length}function dd(n){return gw()?(function(e){let s="";for(let a=0;a<e.length;a++)s+=String.fromCharCode(e[a]);return s})(n):n}function UA(n){return typeof n!="string"?n:(function(e){const s=new Uint8Array(e.length);for(let a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return s})(n)}class zA{constructor(t){this.mn=new ee(((e,s)=>ye.comparator(e.field,s.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const s=e;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(t){if(_t(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Sy(t);if(e!==void 0&&!this.wn(e))return!1;const s=Na(t);let a=new Set,l=0,u=0;for(;l<s.length&&this.wn(s[l]);++l)a=a.add(s[l].fieldPath.canonicalString());if(l===s.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!a.has(h.field.canonicalString())){const d=s[l];if(!this.Sn(h,d)||!this.bn(this.fn[u++],d))return!1}++l}for(;l<s.length;++l){const h=s[l];if(u>=this.fn.length||!this.bn(this.fn[u++],h))return!1}return!0}Dn(){if(this.pn)return null;let t=new ee(ye.comparator);const e=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")e.push(new rd(s.field,2));else{if(t.has(s.field))continue;t=t.add(s.field),e.push(new rd(s.field,0))}for(const s of this.fn)s.field.isKeyField()||t.has(s.field)||(t=t.add(s.field),e.push(new rd(s.field,s.dir==="asc"?0:1)));return new Rd(Rd.UNKNOWN_ID,this.collectionId,e,Cc.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const s=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===s}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(n){var e,s;if(_t(n instanceof Bt||n instanceof te,20012),n instanceof Bt){if(n instanceof hI){const a=((s=(e=n.value.arrayValue)==null?void 0:e.values)==null?void 0:s.map((l=>Bt.create(n.field,"==",l))))||[];return te.create(a,"or")}return n}const t=n.filters.map((a=>qI(a)));return te.create(t,n.op)}function vP(n){if(n.getFilters().length===0)return[];const t=Fy(qI(n));return _t(HI(t),7391),By(t)||jy(t)?[t]:t.getFilters()}function By(n){return n instanceof Bt}function jy(n){return n instanceof te&&z_(n)}function HI(n){return By(n)||jy(n)||(function(e){if(e instanceof te&&Vy(e)){for(const s of e.getFilters())if(!By(s)&&!jy(s))return!1;return!0}return!1})(n)}function Fy(n){if(_t(n instanceof Bt||n instanceof te,34018),n instanceof Bt)return n;if(n.filters.length===1)return Fy(n.filters[0]);const t=n.filters.map((s=>Fy(s)));let e=te.create(t,n.op);return e=kd(e),HI(e)?e:(_t(e instanceof te,64498),_t(Nl(e),40251),_t(e.filters.length>1,57927),e.filters.reduce(((s,a)=>K_(s,a))))}function K_(n,t){let e;return _t(n instanceof Bt||n instanceof te,38388),_t(t instanceof Bt||t instanceof te,25473),e=n instanceof Bt?t instanceof Bt?(function(a,l){return te.create([a,l],"and")})(n,t):BA(n,t):t instanceof Bt?BA(t,n):(function(a,l){if(_t(a.filters.length>0&&l.filters.length>0,48005),Nl(a)&&Nl(l))return lI(a,l.getFilters());const u=Vy(a)?a:l,h=Vy(a)?l:a,d=u.filters.map((p=>K_(p,h)));return te.create(d,"or")})(n,t),kd(e)}function BA(n,t){if(Nl(t))return lI(t,n.getFilters());{const e=t.filters.map((s=>K_(n,s)));return te.create(e,"or")}}function kd(n){if(_t(n instanceof Bt||n instanceof te,11850),n instanceof Bt)return n;const t=n.getFilters();if(t.length===1)return kd(t[0]);if(aI(n))return n;const e=t.map((a=>kd(a))),s=[];return e.forEach((a=>{a instanceof Bt?s.push(a):a instanceof te&&(a.op===n.op?s.push(...a.filters):s.push(a))})),s.length===1?s[0]:te.create(s,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.Cn=new Q_}addToCollectionParentIndex(t,e){return this.Cn.add(e),j.resolve()}getCollectionParents(t,e){return j.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return j.resolve()}deleteFieldIndex(t,e){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,e){return j.resolve()}getDocumentsMatchingTarget(t,e){return j.resolve(null)}getIndexType(t,e){return j.resolve(0)}getFieldIndexes(t,e){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,e){return j.resolve(qn.min())}getMinOffsetFromCollectionGroup(t,e){return j.resolve(qn.min())}updateCollectionGroup(t,e,s){return j.resolve()}updateIndexEntries(t,e){return j.resolve()}}class Q_{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),a=this.index[e]||new ee(Xt.comparator),l=!a.has(s);return this.index[e]=a.add(s),l}has(t){const e=t.lastSegment(),s=t.popLast(),a=this.index[e];return a&&a.has(s)}getEntries(t){return(this.index[t]||new ee(Xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="IndexedDbIndexManager",Qf=new Uint8Array(0);class EP{constructor(t,e){this.databaseId=e,this.vn=new Q_,this.Fn=new zs((s=>Ja(s)),((s,a)=>Jc(s,a))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const s=e.lastSegment(),a=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const l={collectionId:s,parent:mn(a)};return FA(t).put(l)}return j.resolve()}getCollectionParents(t,e){const s=[],a=IDBKeyRange.bound([e,""],[Nw(e),""],!1,!0);return FA(t).J(a).next((l=>{for(const u of l){if(u.collectionId!==e)break;s.push(Xi(u.parent))}return s}))}addFieldIndex(t,e){const s=nc(t),a=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(e);delete a.indexId;const l=s.add(a);if(e.indexState){const u=sl(t);return l.next((h=>{u.put(MA(h,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return l.next()}deleteFieldIndex(t,e){const s=nc(t),a=sl(t),l=il(t);return s.delete(e.indexId).next((()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=nc(t),s=il(t),a=sl(t);return e.Z().next((()=>s.Z())).next((()=>a.Z()))}createTargetIndexes(t,e){return j.forEach(this.Mn(e),(s=>this.getIndexType(t,s).next((a=>{if(a===0||a===1){const l=new zA(s).Dn();if(l!=null)return this.addFieldIndex(t,l)}}))))}getDocumentsMatchingTarget(t,e){const s=il(t);let a=!0;const l=new Map;return j.forEach(this.Mn(e),(u=>this.xn(t,u).next((h=>{a&&(a=!!h),l.set(u,h)})))).next((()=>{if(a){let u=Mt();const h=[];return j.forEach(l,((d,p)=>{ot(jA,`Using index ${(function(G){return`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map((st=>`${st.fieldPath}:${st.kind}`)).join(",")}`})(d)} to execute ${Ja(e)}`);const y=(function(G,st){const rt=Sy(st);if(rt===void 0)return null;for(const lt of Nd(G,rt.fieldPath))switch(lt.op){case"array-contains-any":return lt.value.arrayValue.values||[];case"array-contains":return[lt.value]}return null})(p,d),v=(function(G,st){const rt=new Map;for(const lt of Na(st))for(const R of Nd(G,lt.fieldPath))switch(R.op){case"==":case"in":rt.set(lt.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return rt.set(lt.fieldPath.canonicalString(),R.value),Array.from(rt.values())}return null})(p,d),b=(function(G,st){const rt=[];let lt=!0;for(const R of Na(st)){const I=R.kind===0?vA(G,R.fieldPath,G.startAt):TA(G,R.fieldPath,G.startAt);rt.push(I.value),lt&&(lt=I.inclusive)}return new Vl(rt,lt)})(p,d),w=(function(G,st){const rt=[];let lt=!0;for(const R of Na(st)){const I=R.kind===0?TA(G,R.fieldPath,G.endAt):vA(G,R.fieldPath,G.endAt);rt.push(I.value),lt&&(lt=I.inclusive)}return new Vl(rt,lt)})(p,d),N=this.On(d,p,b),k=this.On(d,p,w),z=this.Nn(d,p,v),Q=this.Bn(d.indexId,y,N,b.inclusive,k,w.inclusive,z);return j.forEach(Q,($=>s.Y($,e.limit).next((G=>{G.forEach((st=>{const rt=ht.fromSegments(st.documentKey);u.has(rt)||(u=u.add(rt),h.push(rt))}))}))))})).next((()=>h))}return j.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=vP(te.create(t.filters,"and")).map((s=>My(t.path,t.collectionGroup,t.orderBy,s.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,s,a,l,u,h){const d=(e!=null?e.length:1)*Math.max(s.length,l.length),p=d/(e!=null?e.length:1),y=[];for(let v=0;v<d;++v){const b=e?this.Ln(e[v/p]):Qf,w=this.kn(t,b,s[v%p],a),N=this.qn(t,b,l[v%p],u),k=h.map((z=>this.kn(t,b,z,!0)));y.push(...this.createRange(w,N,k))}return y}kn(t,e,s,a){const l=new Ua(t,ht.empty(),e,s);return a?l:l.An()}qn(t,e,s,a){const l=new Ua(t,ht.empty(),e,s);return a?l.An():l}xn(t,e){const s=new zA(e),a=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,a).next((l=>{let u=null;for(const h of l)s.yn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(t,e){let s=2;const a=this.Mn(e);return j.forEach(a,(l=>this.xn(t,l).next((u=>{u?s!==0&&u.fields.length<(function(d){let p=new ee(ye.comparator),y=!1;for(const v of d.filters)for(const b of v.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?y=!0:p=p.add(b.field));for(const v of d.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(y?1:0)})(l)&&(s=1):s=0})))).next((()=>(function(u){return u.limit!==null})(e)&&a.length>1&&s===2?1:s))}Qn(t,e){const s=new ec;for(const a of Na(t)){const l=e.data.field(a.fieldPath);if(l==null)return null;const u=s.Pn(a.kind);La.Kt.Dt(l,u)}return s.un()}Ln(t){const e=new ec;return La.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const s=new ec;return La.Kt.Dt(Lc(this.databaseId,e),s.Pn((function(l){const u=Na(l);return u.length===0?0:u[u.length-1].kind})(t))),s.un()}Nn(t,e,s){if(s===null)return[];let a=[];a.push(new ec);let l=0;for(const u of Na(t)){const h=s[l++];for(const d of a)if(this.Un(e,u.fieldPath)&&Uc(h))a=this.Kn(a,u,h);else{const p=d.Pn(u.kind);La.Kt.Dt(h,p)}}return this.Wn(a)}On(t,e,s){return this.Nn(t,e,s.position)}Wn(t){const e=[];for(let s=0;s<t.length;++s)e[s]=t[s].un();return e}Kn(t,e,s){const a=[...t],l=[];for(const u of s.arrayValue.values||[])for(const h of a){const d=new ec;d.seed(h.un()),La.Kt.Dt(u,d.Pn(e.kind)),l.push(d)}return l}Un(t,e){return!!t.filters.find((s=>s instanceof Bt&&s.field.isEqual(e)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(t,e){const s=nc(t),a=sl(t);return(e?s.J(Iy,IDBKeyRange.bound(e,e)):s.J()).next((l=>{const u=[];return j.forEach(l,(h=>a.get([h.indexId,this.uid]).next((d=>{u.push((function(y,v){const b=v?new Cc(v.sequenceNumber,new qn(eo(v.readTime),new ht(Xi(v.documentKey)),v.largestBatchId)):Cc.empty(),w=y.fields.map((([N,k])=>new rd(ye.fromServerFormat(N),k)));return new Rd(y.indexId,y.collectionGroup,w,b)})(h,d))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:wt(s.collectionGroup,a.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,s){const a=nc(t),l=sl(t);return this.Gn(t).next((u=>a.J(Iy,IDBKeyRange.bound(e,e)).next((h=>j.forEach(h,(d=>l.put(MA(d.indexId,this.uid,u,s))))))))}updateIndexEntries(t,e){const s=new Map;return j.forEach(e,((a,l)=>{const u=s.get(a.collectionGroup);return(u?j.resolve(u):this.getFieldIndexes(t,a.collectionGroup)).next((h=>(s.set(a.collectionGroup,h),j.forEach(h,(d=>this.zn(t,a,d).next((p=>{const y=this.jn(l,d);return p.isEqual(y)?j.resolve():this.Jn(t,l,d,p,y)})))))))}))}Hn(t,e,s,a){return il(t).put(a.Rn(this.uid,this.$n(s,e.key),e.key))}Yn(t,e,s,a){return il(t).delete(a.Vn(this.uid,this.$n(s,e.key),e.key))}zn(t,e,s){const a=il(t);let l=new ee(Tr);return a.ee({index:qw,range:IDBKeyRange.only([s.indexId,this.uid,dd(this.$n(s,e))])},((u,h)=>{l=l.add(new Ua(s.indexId,e,UA(h.arrayValue),UA(h.directionalValue)))})).next((()=>l))}jn(t,e){let s=new ee(Tr);const a=this.Qn(e,t);if(a==null)return s;const l=Sy(e);if(l!=null){const u=t.data.field(l.fieldPath);if(Uc(u))for(const h of u.arrayValue.values||[])s=s.add(new Ua(e.indexId,t.key,this.Ln(h),a))}else s=s.add(new Ua(e.indexId,t.key,Qf,a));return s}Jn(t,e,s,a,l){ot(jA,"Updating index entries for document '%s'",e.key);const u=[];return(function(d,p,y,v,b){const w=d.getIterator(),N=p.getIterator();let k=el(w),z=el(N);for(;k||z;){let Q=!1,$=!1;if(k&&z){const G=y(k,z);G<0?$=!0:G>0&&(Q=!0)}else k!=null?$=!0:Q=!0;Q?(v(z),z=el(N)):$?(b(k),k=el(w)):(k=el(w),z=el(N))}})(a,l,Tr,(h=>{u.push(this.Hn(t,e,s,h))}),(h=>{u.push(this.Yn(t,e,s,h))})),j.waitFor(u)}Gn(t){let e=1;return sl(t).ee({index:Fw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,a,l)=>{l.done(),e=a.sequenceNumber+1})).next((()=>e))}createRange(t,e,s){s=s.sort(((u,h)=>Tr(u,h))).filter(((u,h,d)=>!h||Tr(u,d[h-1])!==0));const a=[];a.push(t);for(const u of s){const h=Tr(u,t),d=Tr(u,e);if(h===0)a[0]=t.An();else if(h>0&&d<0)a.push(u),a.push(u.An());else if(d>0)break}a.push(e);const l=[];for(let u=0;u<a.length;u+=2){if(this.Zn(a[u],a[u+1]))return[];const h=a[u].Vn(this.uid,Qf,ht.empty()),d=a[u+1].Vn(this.uid,Qf,ht.empty());l.push(IDBKeyRange.bound(h,d))}return l}Zn(t,e){return Tr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(qA)}getMinOffset(t,e){return j.mapArray(this.Mn(e),(s=>this.xn(t,s).next((a=>a||gt(44426))))).next(qA)}}function FA(n){return Ke(n,Mc)}function il(n){return Ke(n,gc)}function nc(n){return Ke(n,M_)}function sl(n){return Ke(n,pc)}function qA(n){_t(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let s=1;s<n.length;s++){const a=n[s].indexState.offset;D_(a,t)<0&&(t=a),e<a.largestBatchId&&(e=a.largestBatchId)}return new qn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GI=41943040;class hn{static withCacheSize(t){return new hn(t,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(n,t,e){const s=n.store(Ai),a=n.store(wl),l=[],u=IDBKeyRange.only(e.batchId);let h=0;const d=s.ee({range:u},((y,v,b)=>(h++,b.delete())));l.push(d.next((()=>{_t(h===1,47070,{batchId:e.batchId})})));const p=[];for(const y of e.mutations){const v=zw(t,y.key.path,e.batchId);l.push(a.delete(v)),p.push(y.key)}return j.waitFor(l).next((()=>p))}function Ld(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw gt(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(GI,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class vm{constructor(t,e,s,a){this.userId=t,this.serializer=e,this.indexManager=s,this.referenceDelegate=a,this.Xn={}}static wt(t,e,s,a){_t(t.uid!=="",64387);const l=t.isAuthenticated()?t.uid:"";return new vm(l,e,s,a)}checkEmpty(t){let e=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Er(t).ee({index:Ba,range:s},((a,l,u)=>{e=!1,u.done()})).next((()=>e))}addMutationBatch(t,e,s,a){const l=cl(t),u=Er(t);return u.add({}).next((h=>{_t(typeof h=="number",49019);const d=new j_(h,e,s,a),p=(function(w,N,k){const z=k.baseMutations.map(($=>Pd(w.yt,$))),Q=k.mutations.map(($=>Pd(w.yt,$)));return{userId:N,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:z,mutations:Q}})(this.serializer,this.userId,d),y=[];let v=new ee(((b,w)=>wt(b.canonicalString(),w.canonicalString())));for(const b of a){const w=zw(this.userId,b.key.path,h);v=v.add(b.key.path.popLast()),y.push(u.put(p)),y.push(l.put(w,XN))}return v.forEach((b=>{y.push(this.indexManager.addToCollectionParentIndex(t,b))})),t.addOnCommittedListener((()=>{this.Xn[h]=d.keys()})),j.waitFor(y).next((()=>d))}))}lookupMutationBatch(t,e){return Er(t).get(e).next((s=>s?(_t(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:e}),ka(this.serializer,s)):null))}er(t,e){return this.Xn[e]?j.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((s=>{if(s){const a=s.keys();return this.Xn[e]=a,a}return null}))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Er(t).ee({index:Ba,range:a},((u,h,d)=>{h.userId===this.userId&&(_t(h.batchId>=s,47524,{tr:s}),l=ka(this.serializer,h)),d.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=qa;return Er(t).ee({index:Ba,range:e,reverse:!0},((a,l,u)=>{s=l.batchId,u.done()})).next((()=>s))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,qa],[this.userId,Number.POSITIVE_INFINITY]);return Er(t).J(Ba,e).next((s=>s.map((a=>ka(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const s=ad(this.userId,e.path),a=IDBKeyRange.lowerBound(s),l=[];return cl(t).ee({range:a},((u,h,d)=>{const[p,y,v]=u,b=Xi(y);if(p===this.userId&&e.path.isEqual(b))return Er(t).get(v).next((w=>{if(!w)throw gt(61480,{nr:u,batchId:v});_t(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:v}),l.push(ka(this.serializer,w))}));d.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new ee(wt);const a=[];return e.forEach((l=>{const u=ad(this.userId,l.path),h=IDBKeyRange.lowerBound(u),d=cl(t).ee({range:h},((p,y,v)=>{const[b,w,N]=p,k=Xi(w);b===this.userId&&l.path.isEqual(k)?s=s.add(N):v.done()}));a.push(d)})),j.waitFor(a).next((()=>this.rr(t,s)))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,a=s.length+1,l=ad(this.userId,s),u=IDBKeyRange.lowerBound(l);let h=new ee(wt);return cl(t).ee({range:u},((d,p,y)=>{const[v,b,w]=d,N=Xi(b);v===this.userId&&s.isPrefixOf(N)?N.length===a&&(h=h.add(w)):y.done()})).next((()=>this.rr(t,h)))}rr(t,e){const s=[],a=[];return e.forEach((l=>{a.push(Er(t).get(l).next((u=>{if(u===null)throw gt(35274,{batchId:l});_t(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),s.push(ka(this.serializer,u))})))})),j.waitFor(a).next((()=>s))}removeMutationBatch(t,e){return KI(t.le,this.userId,e).next((s=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),j.forEach(s,(a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return j.resolve();const s=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return cl(t).ee({range:s},((l,u,h)=>{if(l[0]===this.userId){const d=Xi(l[1]);a.push(d)}else h.done()})).next((()=>{_t(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(t,e){return QI(t,this.userId,e)}_r(t){return YI(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:qa,lastStreamToken:""}))}}function QI(n,t,e){const s=ad(t,e.path),a=s[1],l=IDBKeyRange.lowerBound(s);let u=!1;return cl(n).ee({range:l,X:!0},((h,d,p)=>{const[y,v,b]=h;y===t&&v===a&&(u=!0),p.done()})).next((()=>u))}function Er(n){return Ke(n,Ai)}function cl(n){return Ke(n,wl)}function YI(n){return Ke(n,Vc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new no(0)}static cr(){return new no(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const s=new no(e.highestTargetId);return e.highestTargetId=s.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>Tt.fromTimestamp(new Jt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,s){return this.lr(t).next((a=>(a.highestListenSequenceNumber=e,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.hr(t,a))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((s=>(s.targetCount+=1,this.Tr(e,s),this.hr(t,s))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>rl(t).delete(e.targetId))).next((()=>this.lr(t))).next((s=>(_t(s.targetCount>0,8065),s.targetCount-=1,this.hr(t,s))))}removeTargets(t,e,s){let a=0;const l=[];return rl(t).ee(((u,h)=>{const d=uc(h);d.sequenceNumber<=e&&s.get(d.targetId)===null&&(a++,l.push(this.removeTargetData(t,d)))})).next((()=>j.waitFor(l))).next((()=>a))}forEachTarget(t,e){return rl(t).ee(((s,a)=>{const l=uc(a);e(l)}))}lr(t){return GA(t).get(Dd).next((e=>(_t(e!==null,2888),e)))}hr(t,e){return GA(t).put(Dd,e)}Pr(t,e){return rl(t).put(jI(this.serializer,e))}Tr(t,e){let s=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,s=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,s=!0),s}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const s=Ja(e),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return rl(t).ee({range:a,index:jw},((u,h,d)=>{const p=uc(h);Jc(e,p.target)&&(l=p,d.done())})).next((()=>l))}addMatchingKeys(t,e,s){const a=[],l=wr(t);return e.forEach((u=>{const h=mn(u.path);a.push(l.put({targetId:s,path:h})),a.push(this.referenceDelegate.addReference(t,s,u))})),j.waitFor(a)}removeMatchingKeys(t,e,s){const a=wr(t);return j.forEach(e,(l=>{const u=mn(l.path);return j.waitFor([a.delete([s,u]),this.referenceDelegate.removeReference(t,s,l)])}))}removeMatchingKeysForTargetId(t,e){const s=wr(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(t,e){const s=IDBKeyRange.bound([e],[e+1],!1,!0),a=wr(t);let l=Mt();return a.ee({range:s,X:!0},((u,h,d)=>{const p=Xi(u[1]),y=new ht(p);l=l.add(y)})).next((()=>l))}containsKey(t,e){const s=mn(e.path),a=IDBKeyRange.bound([s],[Nw(s)],!1,!0);let l=0;return wr(t).ee({index:N_,X:!0,range:a},(([u,h],d,p)=>{u!==0&&(l++,p.done())})).next((()=>l>0))}At(t,e){return rl(t).get(e).next((s=>s?uc(s):null))}}function rl(n){return Ke(n,Il)}function GA(n){return Ke(n,Ha)}function wr(n){return Ke(n,Rl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="LruGarbageCollector",XI=1048576;function QA([n,t],[e,s]){const a=wt(n,e);return a===0?wt(t,s):a}class AP{constructor(t){this.Ir=t,this.buffer=new ee(QA),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();QA(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class $I{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ot(KA,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Qr(e)?ot(KA,"Ignoring IndexedDB error during garbage collection: ",e):await oo(e)}await this.Vr(3e5)}))}}class SP{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((s=>Math.floor(e/100*s)))}nthSequenceNumber(t,e){if(e===0)return j.resolve(ri.ce);const s=new AP(e);return this.mr.forEachTarget(t,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(t,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(t,e,s){return this.mr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(HA)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HA):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let s,a,l,u,h,d,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(t,a)))).next((v=>(s=v,h=Date.now(),this.removeTargets(t,s,e)))).next((v=>(l=v,d=Date.now(),this.removeOrphanedDocuments(t,s)))).next((v=>(p=Date.now(),al()<=zt.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function WI(n,t){return new SP(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(t,e){this.db=t,this.garbageCollector=WI(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((s=>e.next((a=>s+a))))}wr(t){let e=0;return this.pr(t,(s=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((s,a)=>e(a)))}addReference(t,e,s){return Yf(t,s)}removeReference(t,e,s){return Yf(t,s)}removeTargets(t,e,s){return this.db.getTargetCache().removeTargets(t,e,s)}markPotentiallyOrphaned(t,e){return Yf(t,e)}br(t,e){return(function(a,l){let u=!1;return YI(a).te((h=>QI(a,h,l).next((d=>(d&&(u=!0),j.resolve(!d)))))).next((()=>u))})(t,e)}removeOrphanedDocuments(t,e){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(t,((u,h)=>{if(h<=e){const d=this.br(t,u).next((p=>{if(!p)return l++,s.getEntry(t,u).next((()=>(s.removeEntry(u,Tt.min()),wr(t).delete((function(v){return[0,mn(v.path)]})(u)))))}));a.push(d)}})).next((()=>j.waitFor(a))).next((()=>s.apply(t))).next((()=>l))}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,s)}updateLimboDocument(t,e){return Yf(t,e)}Sr(t,e){const s=wr(t);let a,l=ri.ce;return s.ee({index:N_},(([u,h],{path:d,sequenceNumber:p})=>{u===0?(l!==ri.ce&&e(new ht(Xi(a)),l),l=p,a=d):l=ri.ce})).next((()=>{l!==ri.ce&&e(new ht(Xi(a)),l)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Yf(n,t){return wr(n).put((function(s,a){return{targetId:0,path:mn(s.path),sequenceNumber:a}})(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.changes=new zs((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,be.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?j.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,s){return Ca(t).put(s)}removeEntry(t,e,s){return Ca(t).delete((function(l,u){const h=l.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Od(u),h[h.length-1]]})(e,s))}updateMetadata(t,e){return this.getMetadata(t).next((s=>(s.byteSize+=e,this.Dr(t,s))))}getEntry(t,e){let s=be.newInvalidDocument(e);return Ca(t).ee({index:od,range:IDBKeyRange.only(ic(e))},((a,l)=>{s=this.Cr(e,l)})).next((()=>s))}vr(t,e){let s={size:0,document:be.newInvalidDocument(e)};return Ca(t).ee({index:od,range:IDBKeyRange.only(ic(e))},((a,l)=>{s={document:this.Cr(e,l),size:Ld(l)}})).next((()=>s))}getEntries(t,e){let s=Fn();return this.Fr(t,e,((a,l)=>{const u=this.Cr(a,l);s=s.insert(a,u)})).next((()=>s))}Mr(t,e){let s=Fn(),a=new pe(ht.comparator);return this.Fr(t,e,((l,u)=>{const h=this.Cr(l,u);s=s.insert(l,h),a=a.insert(l,Ld(u))})).next((()=>({documents:s,Or:a})))}Fr(t,e,s){if(e.isEmpty())return j.resolve();let a=new ee($A);e.forEach((d=>a=a.add(d)));const l=IDBKeyRange.bound(ic(a.first()),ic(a.last())),u=a.getIterator();let h=u.getNext();return Ca(t).ee({index:od,range:l},((d,p,y)=>{const v=ht.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&$A(h,v)<0;)s(h,null),h=u.getNext();h&&h.isEqual(v)&&(s(h,p),h=u.hasNext()?u.getNext():null),h?y.j(ic(h)):y.done()})).next((()=>{for(;h;)s(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(t,e,s,a,l){const u=e.path,h=[u.popLast().toArray(),u.lastSegment(),Od(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ca(t).J(IDBKeyRange.bound(h,d,!0)).next((p=>{l==null||l.incrementDocumentReadCount(p.length);let y=Fn();for(const v of p){const b=this.Cr(ht.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);b.isFoundDocument()&&(th(e,b)||a.has(b.key))&&(y=y.insert(b.key,b))}return y}))}getAllFromCollectionGroup(t,e,s,a){let l=Fn();const u=XA(e,s),h=XA(e,qn.max());return Ca(t).ee({index:Bw,range:IDBKeyRange.bound(u,h,!0)},((d,p,y)=>{const v=this.Cr(ht.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(v.key,v),l.size===a&&y.done()})).next((()=>l))}newChangeBuffer(t){return new RP(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return YA(t).get(wy).next((e=>(_t(!!e,20021),e)))}Dr(t,e){return YA(t).put(wy,e)}Cr(t,e){if(e){const s=fP(this.serializer,e);if(!(s.isNoDocument()&&s.version.isEqual(Tt.min())))return s}return be.newInvalidDocument(t)}}function JI(n){return new IP(n)}class RP extends ZI{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new zs((s=>s.toString()),((s,a)=>s.isEqual(a)))}applyChanges(t){const e=[];let s=0,a=new ee(((l,u)=>wt(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const h=this.Br.get(l);if(e.push(this.Nr.removeEntry(t,l,h.readTime)),u.isValidDocument()){const d=VA(this.Nr.serializer,u);a=a.add(l.path.popLast());const p=Ld(d);s+=p-h.size,e.push(this.Nr.addEntry(t,l,d))}else if(s-=h.size,this.trackRemovals){const d=VA(this.Nr.serializer,u.convertToNoDocument(Tt.min()));e.push(this.Nr.addEntry(t,l,d))}})),a.forEach((l=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,l))})),e.push(this.Nr.updateMetadata(t,s)),j.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((s=>(this.Br.set(e,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:s,Or:a})=>(a.forEach(((l,u)=>{this.Br.set(l,{size:u,readTime:s.get(l).readTime})})),s)))}}function YA(n){return Ke(n,Nc)}function Ca(n){return Ke(n,Cd)}function ic(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function XA(n,t){const e=t.documentKey.path.toArray();return[n,Od(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function $A(n,t){const e=n.path.toArray(),s=t.path.toArray();let a=0;for(let l=0;l<e.length-2&&l<s.length-2;++l)if(a=wt(e[l],s[l]),a)return a;return a=wt(e.length,s.length),a||(a=wt(e[e.length-2],s[s.length-2]),a||wt(e[e.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(t,e,s,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=a}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next((a=>(s=a,this.remoteDocumentCache.getEntry(t,e)))).next((a=>(s!==null&&Tc(s.mutation,a,Dn.empty(),Jt.now()),a)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((s=>this.getLocalViewOfDocuments(t,s,Mt()).next((()=>s))))}getLocalViewOfDocuments(t,e,s=Mt()){const a=$i();return this.populateOverlays(t,a,e).next((()=>this.computeViews(t,e,a,s).next((l=>{let u=oc();return l.forEach(((h,d)=>{u=u.insert(h,d.overlayedDocument)})),u}))))}getOverlayedDocuments(t,e){const s=$i();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,Mt())))}populateOverlays(t,e,s){const a=[];return s.forEach((l=>{e.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(t,a).next((l=>{l.forEach(((u,h)=>{e.set(u,h)}))}))}computeViews(t,e,s,a){let l=Fn();const u=vc(),h=(function(){return vc()})();return e.forEach(((d,p)=>{const y=s.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Bs)?l=l.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Tc(y.mutation,p,y.mutation.getFieldMask(),Jt.now())):u.set(p.key,Dn.empty())})),this.recalculateAndSaveOverlays(t,l).next((d=>(d.forEach(((p,y)=>u.set(p,y))),e.forEach(((p,y)=>h.set(p,new xP(y,u.get(p)??null)))),h)))}recalculateAndSaveOverlays(t,e){const s=vc();let a=new pe(((u,h)=>u-h)),l=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((u=>{for(const h of u)h.keys().forEach((d=>{const p=e.get(d);if(p===null)return;let y=s.get(d)||Dn.empty();y=h.applyToLocalView(p,y),s.set(d,y);const v=(a.get(h.batchId)||Mt()).add(d);a=a.insert(h.batchId,v)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,v=yI();y.forEach((b=>{if(!l.has(b)){const w=AI(e.get(b),s.get(b));w!==null&&v.set(b,w),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(t,p,v))}return j.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,e,s,a){return(function(u){return ht.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):fI(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,a):this.getDocumentsMatchingCollectionQuery(t,e,s,a)}getNextDocuments(t,e,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,a-l.size):j.resolve($i());let h=xc,d=l;return u.next((p=>j.forEach(p,((y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),l.get(y)?j.resolve():this.remoteDocumentCache.getEntry(t,y).next((b=>{d=d.insert(y,b)}))))).next((()=>this.populateOverlays(t,p,l))).next((()=>this.computeViews(t,d,p,Mt()))).next((y=>({batchId:h,changes:gI(y)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ht(e)).next((s=>{let a=oc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(t,e,s,a){const l=e.collectionGroup;let u=oc();return this.indexManager.getCollectionParents(t,l).next((h=>j.forEach(h,(d=>{const p=(function(v,b){return new jl(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(e,d.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,s,a).next((y=>{y.forEach(((v,b)=>{u=u.insert(v,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(t,e,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,l,a)))).next((u=>{l.forEach(((d,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,be.newInvalidDocument(y)))}));let h=oc();return u.forEach(((d,p)=>{const y=l.get(d);y!==void 0&&Tc(y.mutation,p,Dn.empty(),Jt.now()),th(e,p)&&(h=h.insert(d,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return j.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(a){return{id:a.id,version:a.version,createTime:En(a.createTime)}})(e)),j.resolve()}getNamedQuery(t,e){return j.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(a){return{name:a.name,query:FI(a.bundledQuery),readTime:En(a.readTime)}})(e)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.overlays=new pe(ht.comparator),this.qr=new Map}getOverlay(t,e){return j.resolve(this.overlays.get(e))}getOverlays(t,e){const s=$i();return j.forEach(e,(a=>this.getOverlay(t,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(t,e,s){return s.forEach(((a,l)=>{this.St(t,e,l)})),j.resolve()}removeOverlaysForBatchId(t,e,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),j.resolve()}getOverlaysForCollection(t,e,s){const a=$i(),l=e.length+1,u=new ht(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>s&&a.set(d.getKey(),d)}return j.resolve(a)}getOverlaysForCollectionGroup(t,e,s,a){let l=new pe(((p,y)=>p-y));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>s){let y=l.get(p.largestBatchId);y===null&&(y=$i(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=$i(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>h.set(p,y))),!(h.size()>=a)););return j.resolve(h)}St(t,e,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new q_(e,s));let l=this.qr.get(e);l===void 0&&(l=Mt(),this.qr.set(e,l)),this.qr.set(e,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.Qr=new ee($e.$r),this.Ur=new ee($e.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const s=new $e(t,e);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,e){t.forEach((s=>this.addReference(s,e)))}removeReference(t,e){this.Gr(new $e(t,e))}zr(t,e){t.forEach((s=>this.removeReference(s,e)))}jr(t){const e=new ht(new Xt([])),s=new $e(e,t),a=new $e(e,t+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new ht(new Xt([])),s=new $e(e,t),a=new $e(e,t+1);let l=Mt();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(t){const e=new $e(t,0),s=this.Qr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class $e{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return ht.comparator(t.key,e.key)||wt(t.Yr,e.Yr)}static Kr(t,e){return wt(t.Yr,e.Yr)||ht.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ee($e.$r)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new j_(l,e,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new $e(h.key,l)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return j.resolve(u)}lookupMutationBatch(t,e){return j.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,a=this.ei(s),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?qa:this.tr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new $e(e,0),a=new $e(e,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new ee(wt);return e.forEach((a=>{const l=new $e(a,0),u=new $e(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),j.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,a=s.length+1;let l=s;ht.isDocumentKey(l)||(l=l.child(""));const u=new $e(new ht(l),0);let h=new ee(wt);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(h=h.add(d.Yr)),!0)}),u),j.resolve(this.ti(h))}ti(t){const e=[];return t.forEach((s=>{const a=this.Xr(s);a!==null&&e.push(a)})),e}removeMutationBatch(t,e){_t(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return j.forEach(e.mutations,(a=>{const l=new $e(a.key,e.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,e){const s=new $e(e,0),a=this.Zr.firstAfterOrEqual(s);return j.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(t){this.ri=t,this.docs=(function(){return new pe(ht.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return j.resolve(s?s.document.mutableCopy():be.newInvalidDocument(e))}getEntries(t,e){let s=Fn();return e.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():be.newInvalidDocument(a))})),j.resolve(s)}getDocumentsMatchingQuery(t,e,s,a){let l=Fn();const u=e.path,h=new ht(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||D_(Ow(y),s)<=0||(a.has(y.key)||th(e,y))&&(l=l.insert(y.key,y.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(t,e,s,a){gt(9500)}ii(t,e){return j.forEach(this.docs,(s=>e(s)))}newChangeBuffer(t){return new PP(this)}getSize(t){return j.resolve(this.size)}}class PP extends ZI{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?e.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(s)})),j.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(t){this.persistence=t,this.si=new zs((e=>Ja(e)),Jc),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.oi=0,this._i=new Y_,this.targetCount=0,this.ai=no.ur()}forEachTarget(t,e){return this.si.forEach(((s,a)=>e(a))),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.oi&&(this.oi=e),j.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new no(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,j.resolve()}updateTargetData(t,e){return this.Pr(e),j.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,e,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=e&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(t,h.targetId)),a++)})),j.waitFor(l).next((()=>a))}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,e){const s=this.si.get(e)||null;return j.resolve(s)}addMatchingKeys(t,e,s){return this._i.Wr(e,s),j.resolve()}removeMatchingKeys(t,e,s){this._i.zr(e,s);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach((u=>{l.push(a.markPotentiallyOrphaned(t,u))})),j.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),j.resolve()}getMatchingKeysForTargetId(t,e){const s=this._i.Hr(e);return j.resolve(s)}containsKey(t,e){return j.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(t,e){this.ui={},this.overlays={},this.ci=new ri(0),this.li=!1,this.li=!0,this.hi=new VP,this.referenceDelegate=t(this),this.Pi=new OP(this),this.indexManager=new TP,this.remoteDocumentCache=(function(a){return new MP(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BI(e),this.Ii=new CP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new DP,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.ui[t.toKey()];return s||(s=new NP(e,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,s){ot("MemoryPersistence","Starting transaction:",t);const a=new kP(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(t,e){return j.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,e))))}}class kP extends Lw{constructor(t){super(),this.currentSequenceNumber=t}}class Tm{constructor(t){this.persistence=t,this.Ri=new Y_,this.Vi=null}static mi(t){return new Tm(t)}get fi(){if(this.Vi)return this.Vi;throw gt(60996)}addReference(t,e,s){return this.Ri.addReference(s,e),this.fi.delete(s.toString()),j.resolve()}removeReference(t,e,s){return this.Ri.removeReference(s,e),this.fi.add(s.toString()),j.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),j.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(s=>{const a=ht.fromPath(s);return this.gi(t,a).next((l=>{l||e.removeEntry(a,Tt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((s=>{s?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return j.or([()=>j.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Ud{constructor(t,e){this.persistence=t,this.pi=new zs((s=>mn(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=WI(this,e)}static mi(t,e){return new Ud(t,e)}Ei(){}di(t){return j.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>e.next((a=>s+a))))}wr(t){let e=0;return this.pr(t,(s=>{e++})).next((()=>e))}pr(t,e){return j.forEach(this.pi,((s,a)=>this.br(t,s,a).next((l=>l?j.resolve():e(a)))))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(t,(u=>this.br(t,u,e).next((h=>{h||(s++,l.removeEntry(u,Tt.min()))})))).next((()=>l.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),j.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.pi.set(s,t.currentSequenceNumber),j.resolve()}removeReference(t,e,s){return this.pi.set(s,t.currentSequenceNumber),j.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),j.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ud(t.data.value)),e}br(t,e,s){return j.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.pi.get(e);return j.resolve(a!==void 0&&a>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(t){this.serializer=t}k(t,e,s,a){const l=new rm("createOrUpgrade",e);s<1&&a>=1&&((function(d){d.createObjectStore(Zc)})(t),(function(d){d.createObjectStore(Vc,{keyPath:YN}),d.createObjectStore(Ai,{keyPath:oA,autoIncrement:!0}).createIndex(Ba,lA,{unique:!0}),d.createObjectStore(wl)})(t),WA(t),(function(d){d.createObjectStore(Ma)})(t));let u=j.resolve();return s<3&&a>=3&&(s!==0&&((function(d){d.deleteObjectStore(Rl),d.deleteObjectStore(Il),d.deleteObjectStore(Ha)})(t),WA(t)),u=u.next((()=>(function(d){const p=d.store(Ha),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return p.put(Dd,y)})(l)))),s<4&&a>=4&&(s!==0&&(u=u.next((()=>(function(d,p){return p.store(Ai).J().next((v=>{d.deleteObjectStore(Ai),d.createObjectStore(Ai,{keyPath:oA,autoIncrement:!0}).createIndex(Ba,lA,{unique:!0});const b=p.store(Ai),w=v.map((N=>b.put(N)));return j.waitFor(w)}))})(t,l)))),u=u.next((()=>{(function(d){d.createObjectStore(xl,{keyPath:iM})})(t)}))),s<5&&a>=5&&(u=u.next((()=>this.yi(l)))),s<6&&a>=6&&(u=u.next((()=>((function(d){d.createObjectStore(Nc)})(t),this.wi(l))))),s<7&&a>=7&&(u=u.next((()=>this.Si(l)))),s<8&&a>=8&&(u=u.next((()=>this.bi(t,l)))),s<9&&a>=9&&(u=u.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(t)}))),s<10&&a>=10&&(u=u.next((()=>this.Di(l)))),s<11&&a>=11&&(u=u.next((()=>{(function(d){d.createObjectStore(om,{keyPath:sM})})(t),(function(d){d.createObjectStore(lm,{keyPath:rM})})(t)}))),s<12&&a>=12&&(u=u.next((()=>{(function(d){const p=d.createObjectStore(um,{keyPath:fM});p.createIndex(Ry,dM,{unique:!1}),p.createIndex(Hw,mM,{unique:!1})})(t)}))),s<13&&a>=13&&(u=u.next((()=>(function(d){const p=d.createObjectStore(Cd,{keyPath:$N});p.createIndex(od,WN),p.createIndex(Bw,ZN)})(t))).next((()=>this.Ci(t,l))).next((()=>t.deleteObjectStore(Ma)))),s<14&&a>=14&&(u=u.next((()=>this.Fi(t,l)))),s<15&&a>=15&&(u=u.next((()=>(function(d){d.createObjectStore(M_,{keyPath:aM,autoIncrement:!0}).createIndex(Iy,oM,{unique:!1}),d.createObjectStore(pc,{keyPath:lM}).createIndex(Fw,uM,{unique:!1}),d.createObjectStore(gc,{keyPath:cM}).createIndex(qw,hM,{unique:!1})})(t)))),s<16&&a>=16&&(u=u.next((()=>{e.objectStore(pc).clear()})).next((()=>{e.objectStore(gc).clear()}))),s<17&&a>=17&&(u=u.next((()=>{(function(d){d.createObjectStore(P_,{keyPath:pM})})(t)}))),s<18&&a>=18&&gw()&&(u=u.next((()=>{e.objectStore(pc).clear()})).next((()=>{e.objectStore(gc).clear()}))),u}wi(t){let e=0;return t.store(Ma).ee(((s,a)=>{e+=Ld(a)})).next((()=>{const s={byteSize:e};return t.store(Nc).put(wy,s)}))}yi(t){const e=t.store(Vc),s=t.store(Ai);return e.J().next((a=>j.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,qa],[l.userId,l.lastAcknowledgedBatchId]);return s.J(Ba,u).next((h=>j.forEach(h,(d=>{_t(d.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const p=ka(this.serializer,d);return KI(t,l.userId,p).next((()=>{}))}))))}))))}Si(t){const e=t.store(Rl),s=t.store(Ma);return t.store(Ha).get(Dd).next((a=>{const l=[];return s.ee(((u,h)=>{const d=new Xt(u),p=(function(v){return[0,mn(v)]})(d);l.push(e.get(p).next((y=>y?j.resolve():(v=>e.put({targetId:0,path:mn(v),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>j.waitFor(l)))}))}bi(t,e){t.createObjectStore(Mc,{keyPath:nM});const s=e.store(Mc),a=new Q_,l=u=>{if(a.add(u)){const h=u.lastSegment(),d=u.popLast();return s.put({collectionId:h,parent:mn(d)})}};return e.store(Ma).ee({X:!0},((u,h)=>{const d=new Xt(u);return l(d.popLast())})).next((()=>e.store(wl).ee({X:!0},(([u,h,d],p)=>{const y=Xi(h);return l(y.popLast())}))))}Di(t){const e=t.store(Il);return e.ee(((s,a)=>{const l=uc(a),u=jI(this.serializer,l);return e.put(u)}))}Ci(t,e){const s=e.store(Ma),a=[];return s.ee(((l,u)=>{const h=e.store(Cd),d=(function(v){return v.document?new ht(Xt.fromString(v.document.name).popFirst(5)):v.noDocument?ht.fromSegments(v.noDocument.path):v.unknownDocument?ht.fromSegments(v.unknownDocument.path):gt(36783)})(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(h.put(p))})).next((()=>j.waitFor(a)))}Fi(t,e){const s=e.store(Ai),a=JI(this.serializer),l=new X_(Tm.mi,this.serializer.yt);return s.J().next((u=>{const h=new Map;return u.forEach((d=>{let p=h.get(d.userId)??Mt();ka(this.serializer,d).keys().forEach((y=>p=p.add(y))),h.set(d.userId,p)})),j.forEach(h,((d,p)=>{const y=new rn(p),v=_m.wt(this.serializer,y),b=l.getIndexManager(y),w=vm.wt(y,this.serializer,b,l.referenceDelegate);return new tR(a,w,v,b).recalculateAndSaveOverlaysForDocumentKeys(new xy(e,ri.ce),d).next()}))}))}}function WA(n){n.createObjectStore(Rl,{keyPath:tM}).createIndex(N_,eM,{unique:!0}),n.createObjectStore(Il,{keyPath:"targetId"}).createIndex(jw,JN,{unique:!0}),n.createObjectStore(Ha)}const br="IndexedDbPersistence",Qg=18e5,Yg=5e3,Xg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",UP="main";class $_{constructor(t,e,s,a,l,u,h,d,p,y,v=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=s,this.Mi=l,this.window=u,this.document=h,this.xi=p,this.Oi=y,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=b=>Promise.resolve(),!$_.v())throw new ct(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wP(this,a),this.$i=e+UP,this.serializer=new BI(d),this.Ui=new kr(this.$i,this.Ni,new LP(this.serializer)),this.hi=new mP,this.Pi=new bP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=JI(this.serializer),this.Ii=new dP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,y===!1&&_n(br,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ct(tt.FAILED_PRECONDITION,Xg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new ri(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Xf(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(Qr(t))return ot(br,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return ot(br,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return sc(t).get(tl).next((e=>j.resolve(this.es(e))))}ts(t){return Xf(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Qg)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const s=Ke(e,xl);return s.J().next((a=>{const l=this.ss(a,Qg),u=a.filter((h=>l.indexOf(h)===-1));return j.forEach(u,(h=>s.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?j.resolve(!0):sc(t).get(tl).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Yg)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new ct(tt.FAILED_PRECONDITION,Xg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xf(t).J().next((s=>this.ss(s,Yg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,h=this.networkEnabled===a.networkEnabled;if(l||u&&h)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&ot(br,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Zc,xl],(t=>{const e=new xy(t,ri.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((s=>this.rs(s.updateTimeMs,e)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Xf(t).J().next((e=>this.ss(e,Qg).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return vm.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new EP(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return _m.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,s){ot(br,"Starting transaction:",t);const a=e==="readonly"?"readonly":"readwrite",l=(function(d){return d===18?_M:d===17?Yw:d===16?yM:d===15?O_:d===14?Qw:d===13?Kw:d===12?gM:d===11?Gw:void gt(60245)})(this.Ni);let u;return this.Ui.runTransaction(t,a,l,(h=>(u=new xy(h,this.ci?this.ci.next():ri.ce),e==="readwrite-primary"?this.Hi(u).next((d=>!!d||this.Yi(u))).next((d=>{if(!d)throw _n(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ct(tt.FAILED_PRECONDITION,kw);return s(u)})).next((d=>this.Xi(u).next((()=>d)))):this.Is(u).next((()=>s(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Is(t){return sc(t).get(tl).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Yg)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ct(tt.FAILED_PRECONDITION,Xg)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sc(t).put(tl,e)}static v(){return kr.v()}Zi(t){const e=sc(t);return e.get(tl).next((s=>this.es(s)?(ot(br,"Releasing primary lease."),e.delete(tl)):j.resolve()))}rs(t,e){const s=Date.now();return!(t<s-e)&&(!(t>s)||(_n(`Detected an update time that is in the future: ${t} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;pw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const s=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return ot(br,`Client '${t}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return _n(br,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){_n("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function sc(n){return Ke(n,Zc)}function Xf(n){return Ke(n,xl)}function zP(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t,e,s,a){this.targetId=t,this.fromCache=e,this.Es=s,this.ds=a}static As(t,e){let s=Mt(),a=Mt();for(const l of e.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new W_(t,e.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return pw()?8:Uw(Ge())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,s,a){const l={result:null};return this.ys(t,e).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(t,e,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new BP;return this.Ss(t,e,u).next((h=>{if(l.result=h,this.Vs)return this.bs(t,e,u,h.size)}))})).next((()=>l.result))}bs(t,e,s,a){return s.documentReadCount<this.fs?(al()<=zt.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",ol(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(al()<=zt.DEBUG&&ot("QueryEngine","Query:",ol(e),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(al()<=zt.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",ol(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,oi(e))):j.resolve())}ys(t,e){if(EA(e))return j.resolve(null);let s=oi(e);return this.indexManager.getIndexType(t,s).next((a=>a===0?null:(e.limit!==null&&a===1&&(e=Oy(e,null,"F"),s=oi(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next((l=>{const u=Mt(...l);return this.ps.getDocuments(t,u).next((h=>this.indexManager.getMinOffset(t,s).next((d=>{const p=this.Ds(e,h);return this.Cs(e,p,u,d.readTime)?this.ys(t,Oy(e,null,"F")):this.vs(t,p,e,d)}))))})))))}ws(t,e,s,a){return EA(e)||a.isEqual(Tt.min())?j.resolve(null):this.ps.getDocuments(t,s).next((l=>{const u=this.Ds(e,l);return this.Cs(e,u,s,a)?j.resolve(null):(al()<=zt.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ol(e)),this.vs(t,u,e,jN(a,xc)).next((h=>h)))}))}Ds(t,e){let s=new ee(mI(t));return e.forEach(((a,l)=>{th(t,l)&&(s=s.add(l))})),s}Cs(t,e,s,a){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,e,s){return al()<=zt.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",ol(e)),this.ps.getDocumentsMatchingQuery(t,e,qn.min(),s)}vs(t,e,s,a){return this.ps.getDocumentsMatchingQuery(t,s,a).next((l=>(e.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="LocalStore",jP=3e8;class FP{constructor(t,e,s,a){this.persistence=t,this.Fs=e,this.serializer=a,this.Ms=new pe(wt),this.xs=new zs((l=>Ja(l)),Jc),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new tR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function nR(n,t,e,s){return new FP(n,t,e,s)}async function iR(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return e.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,e.Bs(t),e.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let d=Mt();for(const p of a){u.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of l){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return e.localDocuments.getDocuments(s,d).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:h})))}))}))}function qP(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=t.batch.keys(),l=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,p,y){const v=p.batch,b=v.keys();let w=j.resolve();return b.forEach((N=>{w=w.next((()=>y.getEntry(d,N))).next((k=>{const z=p.docVersions.get(N);_t(z!==null,48541),k.version.compareTo(z)<0&&(v.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),y.addEntry(k)))}))})),w.next((()=>h.mutationQueue.removeMutationBatch(d,v)))})(e,s,t,l).next((()=>l.apply(s))).next((()=>e.mutationQueue.performConsistencyCheck(s))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(s,a,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let d=Mt();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d})(t)))).next((()=>e.localDocuments.getDocuments(s,a)))}))}function sR(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function HP(n,t){const e=It(n),s=t.snapshotVersion;let a=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=e.Ns.newChangeBuffer({trackRemovals:!0});a=e.Ms;const h=[];t.targetChanges.forEach(((y,v)=>{const b=a.get(v);if(!b)return;h.push(e.Pi.removeMatchingKeys(l,y.removedDocuments,v).next((()=>e.Pi.addMatchingKeys(l,y.addedDocuments,v))));let w=b.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?w=w.withResumeToken(Be.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,s)),a=a.insert(v,w),(function(k,z,Q){return k.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=jP?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(b,w,y)&&h.push(e.Pi.updateTargetData(l,w))}));let d=Fn(),p=Mt();if(t.documentUpdates.forEach((y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(l,y))})),h.push(GP(l,u,t.documentUpdates).next((y=>{d=y.ks,p=y.qs}))),!s.isEqual(Tt.min())){const y=e.Pi.getLastRemoteSnapshotVersion(l).next((v=>e.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(y)}return j.waitFor(h).next((()=>u.apply(l))).next((()=>e.localDocuments.getLocalViewOfDocuments(l,d,p))).next((()=>d))})).then((l=>(e.Ms=a,l)))}function GP(n,t,e){let s=Mt(),a=Mt();return e.forEach((l=>s=s.add(l))),t.getEntries(n,s).next((l=>{let u=Fn();return e.forEach(((h,d)=>{const p=l.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),d.isNoDocument()&&d.version.isEqual(Tt.min())?(t.removeEntry(h,d.readTime),u=u.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(d),u=u.insert(h,d)):ot(Z_,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)})),{ks:u,qs:a}}))}function KP(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=qa),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function QP(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return e.Pi.getTargetData(s,t).next((l=>l?(a=l,j.resolve(a)):e.Pi.allocateTargetId(s).next((u=>(a=new Is(t,u,"TargetPurposeListen",s.currentSequenceNumber),e.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=e.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(s.targetId,s),e.xs.set(t,s.targetId)),s}))}async function qy(n,t,e){const s=It(n),a=s.Ms.get(t),l=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Qr(u))throw u;ot(Z_,`Failed to update sequence numbers for target ${t}: ${u}`)}s.Ms=s.Ms.remove(t),s.xs.delete(a.target)}function ZA(n,t,e){const s=It(n);let a=Tt.min(),l=Mt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,p,y){const v=It(d),b=v.xs.get(y);return b!==void 0?j.resolve(v.Ms.get(b)):v.Pi.getTargetData(p,y)})(s,u,oi(t)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((d=>{l=d}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,t,e?a:Tt.min(),e?l:Mt()))).next((h=>(YP(s,MM(t),h),{documents:h,Qs:l})))))}function YP(n,t,e){let s=n.Os.get(t)||Tt.min();e.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(t,s)}class JA{constructor(){this.activeTargetIds=zM()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class rR{constructor(){this.Mo=new JA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,s){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new JA,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="ConnectivityMonitor";class e1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ot(t1,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ot(t1,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $f=null;function Hy(){return $f===null?$f=(function(){return 268435456+Math.round(2147483648*Math.random())})():$f++,"0x"+$f.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="RestConnection",$P={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WP{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Oc?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(t,e,s,a,l){const u=Hy(),h=this.zo(t,e.toUriEncodedString());ot($g,`Sending RPC '${t}' ${u}:`,h,s);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,a,l);const{host:p}=new URL(h),y=ao(p);return this.Jo(t,h,d,s,y).then((v=>(ot($g,`Received RPC '${t}' ${u}: `,v),v)),(v=>{throw Al($g,`RPC '${t}' ${u} failed with error: `,v,"url: ",h,"request:",s),v}))}Ho(t,e,s,a,l,u){return this.Go(t,e,s,a,l)}jo(t,e,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((a,l)=>t[l]=a)),s&&s.headers.forEach(((a,l)=>t[l]=a))}zo(t,e){const s=$P[t];return`${this.Uo}/v1/${e}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class JP extends WP{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,s,a,l){const u=Hy();return new Promise(((h,d)=>{const p=new ww;p.setWithCredentials(!0),p.listenOnce(Iw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case sd.NO_ERROR:const v=p.getResponseJson();ot(un,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(v)),h(v);break;case sd.TIMEOUT:ot(un,`RPC '${t}' ${u} timed out`),d(new ct(tt.DEADLINE_EXCEEDED,"Request time out"));break;case sd.HTTP_ERROR:const b=p.getStatus();if(ot(un,`RPC '${t}' ${u} failed with status:`,b,"response text:",p.getResponseText()),b>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const k=(function(Q){const $=Q.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf($)>=0?$:tt.UNKNOWN})(N.status);d(new ct(k,N.message))}else d(new ct(tt.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ct(tt.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:t,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ot(un,`RPC '${t}' ${u} completed.`)}}));const y=JSON.stringify(a);ot(un,`RPC '${t}' ${u} sending request:`,a),p.send(e,"POST",y,s,15)}))}T_(t,e,s){const a=Hy(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=Cw(),h=xw(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,e,s),d.encodeInitMessageHeaders=!0;const y=l.join("");ot(un,`Creating RPC '${t}' stream ${a}: ${y}`,d);const v=u.createWebChannel(y,d);this.I_(v);let b=!1,w=!1;const N=new ZP({Yo:z=>{w?ot(un,`Not sending because RPC '${t}' stream ${a} is closed:`,z):(b||(ot(un,`Opening RPC '${t}' stream ${a} transport.`),v.open(),b=!0),ot(un,`RPC '${t}' stream ${a} sending:`,z),v.send(z))},Zo:()=>v.close()}),k=(z,Q,$)=>{z.listen(Q,(G=>{try{$(G)}catch(st){setTimeout((()=>{throw st}),0)}}))};return k(v,ac.EventType.OPEN,(()=>{w||(ot(un,`RPC '${t}' stream ${a} transport opened.`),N.o_())})),k(v,ac.EventType.CLOSE,(()=>{w||(w=!0,ot(un,`RPC '${t}' stream ${a} transport closed`),N.a_(),this.E_(v))})),k(v,ac.EventType.ERROR,(z=>{w||(w=!0,Al(un,`RPC '${t}' stream ${a} transport errored. Name:`,z.name,"Message:",z.message),N.a_(new ct(tt.UNAVAILABLE,"The operation could not be completed")))})),k(v,ac.EventType.MESSAGE,(z=>{var Q;if(!w){const $=z.data[0];_t(!!$,16349);const G=$,st=(G==null?void 0:G.error)||((Q=G[0])==null?void 0:Q.error);if(st){ot(un,`RPC '${t}' stream ${a} received error:`,st);const rt=st.status;let lt=(function(C){const M=ke[C];if(M!==void 0)return II(M)})(rt),R=st.message;lt===void 0&&(lt=tt.INTERNAL,R="Unknown error status: "+rt+" with message "+st.message),w=!0,N.a_(new ct(lt,R)),v.close()}else ot(un,`RPC '${t}' stream ${a} received:`,$),N.u_($)}})),k(h,Rw.STAT_EVENT,(z=>{z.stat===by.PROXY?ot(un,`RPC '${t}' stream ${a} detected buffering proxy`):z.stat===by.NOPROXY&&ot(un,`RPC '${t}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(){return typeof window<"u"?window:null}function md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n){return new nP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t,e,s=1e3,a=1.5,l=6e4){this.Mi=t,this.timerId=e,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-s);a>0&&ot("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="PersistentStream";class oR{constructor(t,e,s,a,l,u,h,d){this.Mi=t,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aR(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===tt.RESOURCE_EXHAUSTED?(_n(e.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===e&&this.G_(s,a)}),(s=>{t((()=>{const a=new ct(tt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(t,e){const s=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ot(n1,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(ot(n1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eO extends oR{constructor(t,e,s,a,l,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,a,u),this.serializer=l}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=rP(this.serializer,t),s=(function(l){if(!("targetChange"in l))return Tt.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Tt.min():u.readTime?En(u.readTime):Tt.min()})(t);return this.listener.H_(e,s)}Y_(t){const e={};e.database=Uy(this.serializer),e.addTarget=(function(l,u){let h;const d=u.target;if(h=Vd(d)?{documents:PI(l,d)}:{query:OI(l,d).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=CI(l,u.resumeToken);const p=ky(l,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Tt.min())>0){h.readTime=Ol(l,u.snapshotVersion.toTimestamp());const p=ky(l,u.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,t);const s=oP(this.serializer,t);s&&(e.labels=s),this.q_(e)}Z_(t){const e={};e.database=Uy(this.serializer),e.removeTarget=t,this.q_(e)}}class nO extends oR{constructor(t,e,s,a,l,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return _t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=aP(t.writeResults,t.commitTime),s=En(t.commitTime);return this.listener.na(s,e)}ra(){const t={};t.database=Uy(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((s=>Pd(this.serializer,s)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{}class sO extends iO{constructor(t,e,s,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ct(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(t,Ly(e,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ct(tt.UNKNOWN,l.toString())}))}Ho(t,e,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(t,Ly(e,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ct(tt.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rO{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_n(e),this.aa=!1):ot("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="RemoteStore";class aO{constructor(t,e,s,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{lo(this)&&(ot(io,"Restarting streams for network reachability change."),await(async function(d){const p=It(d);p.Ea.add(4),await nh(p),p.Ra.set("Unknown"),p.Ea.delete(4),await bm(p)})(this))}))})),this.Ra=new rO(s,a)}}async function bm(n){if(lo(n))for(const t of n.da)await t(!0)}async function nh(n){for(const t of n.da)await t(!1)}function lR(n,t){const e=It(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),nv(e)?ev(e):ql(e).O_()&&tv(e,t))}function J_(n,t){const e=It(n),s=ql(e);e.Ia.delete(t),s.O_()&&uR(e,t),e.Ia.size===0&&(s.O_()?s.L_():lo(e)&&e.Ra.set("Unknown"))}function tv(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ql(n).Y_(t)}function uR(n,t){n.Va.Ue(t),ql(n).Z_(t)}function ev(n){n.Va=new ZM({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),ql(n).start(),n.Ra.ua()}function nv(n){return lo(n)&&!ql(n).x_()&&n.Ia.size>0}function lo(n){return It(n).Ea.size===0}function cR(n){n.Va=void 0}async function oO(n){n.Ra.set("Online")}async function lO(n){n.Ia.forEach(((t,e)=>{tv(n,t)}))}async function uO(n,t){cR(n),nv(n)?(n.Ra.ha(t),ev(n)):n.Ra.set("Unknown")}async function cO(n,t,e){if(n.Ra.set("Online"),t instanceof xI&&t.state===2&&t.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,t)}catch(s){ot(io,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await zd(n,s)}else if(t instanceof fd?n.Va.Ze(t):t instanceof RI?n.Va.st(t):n.Va.tt(t),!e.isEqual(Tt.min()))try{const s=await sR(n.localStore);e.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(d.resumeToken,u))}})),h.targetMismatches.forEach(((d,p)=>{const y=l.Ia.get(d);if(!y)return;l.Ia.set(d,y.withResumeToken(Be.EMPTY_BYTE_STRING,y.snapshotVersion)),uR(l,d);const v=new Is(y.target,d,p,y.sequenceNumber);tv(l,v)})),l.remoteSyncer.applyRemoteEvent(h)})(n,e)}catch(s){ot(io,"Failed to raise snapshot:",s),await zd(n,s)}}async function zd(n,t,e){if(!Qr(t))throw t;n.Ea.add(1),await nh(n),n.Ra.set("Offline"),e||(e=()=>sR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ot(io,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await bm(n)}))}function hR(n,t){return t().catch((e=>zd(n,e,t)))}async function ih(n){const t=It(n),e=Fr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:qa;for(;hO(t);)try{const a=await KP(t.localStore,s);if(a===null){t.Ta.length===0&&e.L_();break}s=a.batchId,fO(t,a)}catch(a){await zd(t,a)}fR(t)&&dR(t)}function hO(n){return lo(n)&&n.Ta.length<10}function fO(n,t){n.Ta.push(t);const e=Fr(n);e.O_()&&e.X_&&e.ea(t.mutations)}function fR(n){return lo(n)&&!Fr(n).x_()&&n.Ta.length>0}function dR(n){Fr(n).start()}async function dO(n){Fr(n).ra()}async function mO(n){const t=Fr(n);for(const e of n.Ta)t.ea(e.mutations)}async function pO(n,t,e){const s=n.Ta.shift(),a=F_.from(s,t,e);await hR(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await ih(n)}async function gO(n,t){t&&Fr(n).X_&&await(async function(s,a){if((function(u){return XM(u)&&u!==tt.ABORTED})(a.code)){const l=s.Ta.shift();Fr(s).B_(),await hR(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await ih(s)}})(n,t),fR(n)&&dR(n)}async function i1(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),ot(io,"RemoteStore received new credentials");const s=lo(e);e.Ea.add(3),await nh(e),s&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await bm(e)}async function yO(n,t){const e=It(n);t?(e.Ea.delete(2),await bm(e)):t||(e.Ea.add(2),await nh(e),e.Ra.set("Unknown"))}function ql(n){return n.ma||(n.ma=(function(e,s,a){const l=It(e);return l.sa(),new eO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:oO.bind(null,n),t_:lO.bind(null,n),r_:uO.bind(null,n),H_:cO.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),nv(n)?ev(n):n.Ra.set("Unknown")):(await n.ma.stop(),cR(n))}))),n.ma}function Fr(n){return n.fa||(n.fa=(function(e,s,a){const l=It(e);return l.sa(),new nO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:dO.bind(null,n),r_:gO.bind(null,n),ta:mO.bind(null,n),na:pO.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await ih(n)):(await n.fa.stop(),n.Ta.length>0&&(ot(io,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,e,s,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,a,l){const u=Date.now()+s,h=new iv(t,e,u,a,l);return h.start(s),h}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sv(n,t){if(_n("AsyncQueue",`${t}: ${n}`),Qr(n))return new ct(tt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{static emptySet(t){return new yl(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||ht.comparator(e.key,s.key):(e,s)=>ht.comparator(e.key,s.key),this.keyedMap=oc(),this.sortedSet=new pe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,s)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof yl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new yl;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.ga=new pe(ht.comparator)}track(t){const e=t.doc.key,s=this.ga.get(e);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(e,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(e):t.type===1&&s.type===2?this.ga=this.ga.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):gt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,s)=>{t.push(s)})),t}}class kl{constructor(t,e,s,a,l,u,h,d,p){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(t,e,s,a,l){const u=[];return e.forEach((h=>{u.push({type:0,doc:h})})),new kl(t,e,yl.emptySet(e),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&dm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==s[a].type||!e[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class vO{constructor(){this.queries=r1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,s){const a=It(e),l=a.queries;a.queries=r1(),l.forEach(((u,h)=>{for(const d of h.Sa)d.onError(s)}))})(this,new ct(tt.ABORTED,"Firestore shutting down"))}}function r1(){return new zs((n=>dI(n)),dm)}async function mR(n,t){const e=It(n);let s=3;const a=t.query;let l=e.queries.get(a);l?!l.ba()&&t.Da()&&(s=2):(l=new _O,s=t.Da()?0:1);try{switch(s){case 0:l.wa=await e.onListen(a,!0);break;case 1:l.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(u){const h=sv(u,`Initialization of query '${ol(t.query)}' failed`);return void t.onError(h)}e.queries.set(a,l),l.Sa.push(t),t.va(e.onlineState),l.wa&&t.Fa(l.wa)&&rv(e)}async function pR(n,t){const e=It(n),s=t.query;let a=3;const l=e.queries.get(s);if(l){const u=l.Sa.indexOf(t);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=t.Da()?0:1:!l.ba()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function TO(n,t){const e=It(n);let s=!1;for(const a of t){const l=a.query,u=e.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&rv(e)}function EO(n,t,e){const s=It(n),a=s.queries.get(t);if(a)for(const l of a.Sa)l.onError(e);s.queries.delete(t)}function rv(n){n.Ca.forEach((t=>{t.next()}))}var Gy,a1;(a1=Gy||(Gy={})).Ma="default",a1.Cache="cache";class gR{constructor(t,e,s){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const a of t.docChanges)a.type!==3&&s.push(a);t=new kl(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const s=e!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=kl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(t){this.key=t}}class _R{constructor(t){this.key=t}}class bO{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=mI(t),this.tu=new yl(this.eu)}get nu(){return this.Ya}ru(t,e){const s=e?e.iu:new s1,a=e?e.tu:this.tu;let l=e?e.mutatedKeys:this.mutatedKeys,u=a,h=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((y,v)=>{const b=a.get(y),w=th(this.query,v)?v:null,N=!!b&&this.mutatedKeys.has(b.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let z=!1;b&&w?b.data.isEqual(w.data)?N!==k&&(s.track({type:3,doc:w}),z=!0):this.su(b,w)||(s.track({type:2,doc:w}),z=!0,(d&&this.eu(w,d)>0||p&&this.eu(w,p)<0)&&(h=!0)):!b&&w?(s.track({type:0,doc:w}),z=!0):b&&!w&&(s.track({type:1,doc:b}),z=!0,(d||p)&&(h=!0)),z&&(w?(u=u.add(w),l=k?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),s.track({type:1,doc:y})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,a){const l=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const u=t.iu.ya();u.sort(((y,v)=>(function(w,N){const k=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Rt:z})}};return k(w)-k(N)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(s),a=a??!1;const h=e&&!a?this._u():[],d=this.Xa.size===0&&this.current&&!a?1:0,p=d!==this.Za;return this.Za=d,u.length!==0||p?{snapshot:new kl(this.query,t.tu,l,u,t.mutatedKeys,d===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new s1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Mt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const e=[];return t.forEach((s=>{this.Xa.has(s)||e.push(new _R(s))})),this.Xa.forEach((s=>{t.has(s)||e.push(new yR(s))})),e}cu(t){this.Ya=t.Qs,this.Xa=Mt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return kl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const av="SyncEngine";class AO{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class SO{constructor(t){this.key=t,this.hu=!1}}class wO{constructor(t,e,s,a,l,u){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new zs((h=>dI(h)),dm),this.Iu=new Map,this.Eu=new Set,this.du=new pe(ht.comparator),this.Au=new Map,this.Ru=new Y_,this.Vu={},this.mu=new Map,this.fu=no.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IO(n,t,e=!0){const s=SR(n);let a;const l=s.Tu.get(t);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await vR(s,t,e,!0),a}async function RO(n,t){const e=SR(n);await vR(e,t,!0,!1)}async function vR(n,t,e,s){const a=await QP(n.localStore,oi(t)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,e);let h;return s&&(h=await xO(n,t,l,u==="current",a.resumeToken)),n.isPrimaryClient&&e&&lR(n.remoteStore,a),h}async function xO(n,t,e,s,a){n.pu=(v,b,w)=>(async function(k,z,Q,$){let G=z.view.ru(Q);G.Cs&&(G=await ZA(k.localStore,z.query,!1).then((({documents:R})=>z.view.ru(R,G))));const st=$&&$.targetChanges.get(z.targetId),rt=$&&$.targetMismatches.get(z.targetId)!=null,lt=z.view.applyChanges(G,k.isPrimaryClient,st,rt);return l1(k,z.targetId,lt.au),lt.snapshot})(n,v,b,w);const l=await ZA(n.localStore,t,!0),u=new bO(t,l.Qs),h=u.ru(l.documents),d=eh.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",a),p=u.applyChanges(h,n.isPrimaryClient,d);l1(n,e,p.au);const y=new AO(t,e,u);return n.Tu.set(t,y),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),p.snapshot}async function CO(n,t,e){const s=It(n),a=s.Tu.get(t),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!dm(u,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await qy(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),e&&J_(s.remoteStore,a.targetId),Ky(s,a.targetId)})).catch(oo)):(Ky(s,a.targetId),await qy(s.localStore,a.targetId,!0))}async function DO(n,t){const e=It(n),s=e.Tu.get(t),a=e.Iu.get(s.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),J_(e.remoteStore,s.targetId))}async function VO(n,t,e){const s=wR(n);try{const a=await(function(u,h){const d=It(u),p=Jt.now(),y=h.reduce(((w,N)=>w.add(N.key)),Mt());let v,b;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let N=Fn(),k=Mt();return d.Ns.getEntries(w,y).next((z=>{N=z,N.forEach(((Q,$)=>{$.isValidDocument()||(k=k.add(Q))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,N))).next((z=>{v=z;const Q=[];for(const $ of h){const G=QM($,v.get($.key).overlayedDocument);G!=null&&Q.push(new Bs($.key,G,sI(G.value.mapValue),vn.exists(!0)))}return d.mutationQueue.addMutationBatch(w,p,Q,h)})).next((z=>{b=z;const Q=z.applyToLocalDocumentSet(v,k);return d.documentOverlayCache.saveOverlays(w,z.batchId,Q)}))})).then((()=>({batchId:b.batchId,changes:gI(v)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,d){let p=u.Vu[u.currentUser.toKey()];p||(p=new pe(wt)),p=p.insert(h,d),u.Vu[u.currentUser.toKey()]=p})(s,a.batchId,e),await sh(s,a.changes),await ih(s.remoteStore)}catch(a){const l=sv(a,"Failed to persist write");e.reject(l)}}async function TR(n,t){const e=It(n);try{const s=await HP(e.localStore,t);t.targetChanges.forEach(((a,l)=>{const u=e.Au.get(l);u&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?_t(u.hu,14607):a.removedDocuments.size>0&&(_t(u.hu,42227),u.hu=!1))})),await sh(e,s,t)}catch(s){await oo(s)}}function o1(n,t,e){const s=It(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(t);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const d=It(u);d.onlineState=h;let p=!1;d.queries.forEach(((y,v)=>{for(const b of v.Sa)b.va(h)&&(p=!0)})),p&&rv(d)})(s.eventManager,t),a.length&&s.Pu.H_(a),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function NO(n,t,e){const s=It(n);s.sharedClientState.updateQueryState(t,"rejected",e);const a=s.Au.get(t),l=a&&a.key;if(l){let u=new pe(ht.comparator);u=u.insert(l,be.newNoDocument(l,Tt.min()));const h=Mt().add(l),d=new ym(Tt.min(),new Map,new pe(wt),u,h);await TR(s,d),s.du=s.du.remove(l),s.Au.delete(t),ov(s)}else await qy(s.localStore,t,!1).then((()=>Ky(s,t,e))).catch(oo)}async function MO(n,t){const e=It(n),s=t.batch.batchId;try{const a=await qP(e.localStore,t);bR(e,s,null),ER(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await sh(e,a)}catch(a){await oo(a)}}async function PO(n,t,e){const s=It(n);try{const a=await(function(u,h){const d=It(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next((v=>(_t(v!==null,37113),y=v.keys(),d.mutationQueue.removeMutationBatch(p,v)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(s.localStore,t);bR(s,t,e),ER(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await sh(s,a)}catch(a){await oo(a)}}function ER(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function bR(n,t,e){const s=It(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),s.Vu[s.currentUser.toKey()]=a}}function Ky(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.Iu.get(t))n.Tu.delete(s),e&&n.Pu.yu(s,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((s=>{n.Ru.containsKey(s)||AR(n,s)}))}function AR(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(J_(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),ov(n))}function l1(n,t,e){for(const s of e)s instanceof yR?(n.Ru.addReference(s.key,t),OO(n,s)):s instanceof _R?(ot(av,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,t),n.Ru.containsKey(s.key)||AR(n,s.key)):gt(19791,{wu:s})}function OO(n,t){const e=t.key,s=e.path.canonicalString();n.du.get(e)||n.Eu.has(s)||(ot(av,"New document in limbo: "+e),n.Eu.add(s),ov(n))}function ov(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new ht(Xt.fromString(t)),s=n.fu.next();n.Au.set(s,new SO(e)),n.du=n.du.insert(e,s),lR(n.remoteStore,new Is(oi(fm(e.path)),s,"TargetPurposeLimboResolution",ri.ce))}}async function sh(n,t,e){const s=It(n),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,d)=>{u.push(s.pu(d,t,e).then((p=>{var y;if((p||e)&&s.isPrimaryClient){const v=p?!p.fromCache:(y=e==null?void 0:e.targetChanges.get(d.targetId))==null?void 0:y.current;s.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){a.push(p);const v=W_.As(d.targetId,p);l.push(v)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(d,p){const y=It(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>j.forEach(p,(b=>j.forEach(b.Es,(w=>y.persistence.referenceDelegate.addReference(v,b.targetId,w))).next((()=>j.forEach(b.ds,(w=>y.persistence.referenceDelegate.removeReference(v,b.targetId,w)))))))))}catch(v){if(!Qr(v))throw v;ot(Z_,"Failed to update sequence numbers: "+v)}for(const v of p){const b=v.targetId;if(!v.fromCache){const w=y.Ms.get(b),N=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(N);y.Ms=y.Ms.insert(b,k)}}})(s.localStore,l))}async function kO(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){ot(av,"User change. New user:",t.toKey());const s=await iR(e.localStore,t);e.currentUser=t,(function(l,u){l.mu.forEach((h=>{h.forEach((d=>{d.reject(new ct(tt.CANCELLED,u))}))})),l.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await sh(e,s.Ls)}}function LO(n,t){const e=It(n),s=e.Au.get(t);if(s&&s.hu)return Mt().add(s.key);{let a=Mt();const l=e.Iu.get(t);if(!l)return a;for(const u of l){const h=e.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function SR(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=TR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NO.bind(null,t),t.Pu.H_=TO.bind(null,t.eventManager),t.Pu.yu=EO.bind(null,t.eventManager),t}function wR(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=MO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=PO.bind(null,t),t}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Em(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return nR(this.persistence,new eR,t.initialUser,this.serializer)}Cu(t){return new X_(Tm.mi,this.serializer)}Du(t){return new rR}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class UO extends Fc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){_t(this.persistence.referenceDelegate instanceof Ud,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new $I(s,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new X_((s=>Ud.mi(s,e)),this.serializer)}}class zO extends Fc{constructor(t,e,s){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await wR(this.xu.syncEngine),await ih(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return nR(this.persistence,new eR,t.initialUser,this.serializer)}Fu(t,e){const s=this.persistence.referenceDelegate.garbageCollector;return new $I(s,t.asyncQueue,e)}Mu(t,e){const s=new GN(e,this.persistence);return new HN(t.asyncQueue,s)}Cu(t){const e=zP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new $_(this.synchronizeTabs,e,t.clientId,s,t.asyncQueue,tO(),md(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new rR}}class Bd{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>o1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=kO.bind(null,this.syncEngine),await yO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new vO})()}createDatastore(t){const e=Em(t.databaseInfo.databaseId),s=(function(l){return new JP(l)})(t.databaseInfo);return(function(l,u,h,d){return new sO(l,u,h,d)})(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return(function(s,a,l,u,h){return new aO(s,a,l,u,h)})(this.localStore,this.datastore,t.asyncQueue,(e=>o1(this.syncEngine,e,0)),(function(){return e1.v()?new e1:new XP})())}createSyncEngine(t,e){return(function(a,l,u,h,d,p,y){const v=new wO(a,l,u,h,d,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(a){const l=It(a);ot(io,"RemoteStore shutting down."),l.Ea.add(5),await nh(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):_n("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class BO{constructor(t,e,s,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=a,this.user=rn.UNAUTHENTICATED,this.clientId=C_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{ot(qr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(ot(qr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=sv(e,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Wg(n,t){n.asyncQueue.verifyOperationInProgress(),ot(qr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await iR(t.localStore,a),s=a)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function u1(n,t){n.asyncQueue.verifyOperationInProgress();const e=await jO(n);ot(qr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((s=>i1(t.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>i1(t.remoteStore,a))),n._onlineComponents=t}async function jO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ot(qr,"Using user provided OfflineComponentProvider");try{await Wg(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(a){return a.name==="FirebaseError"?a.code===tt.FAILED_PRECONDITION||a.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(e))throw e;Al("Error using user provided cache. Falling back to memory cache: "+e),await Wg(n,new Fc)}}else ot(qr,"Using default OfflineComponentProvider"),await Wg(n,new UO(void 0));return n._offlineComponents}async function RR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ot(qr,"Using user provided OnlineComponentProvider"),await u1(n,n._uninitializedComponentsProvider._online)):(ot(qr,"Using default OnlineComponentProvider"),await u1(n,new Bd))),n._onlineComponents}function FO(n){return RR(n).then((t=>t.syncEngine))}async function Qy(n){const t=await RR(n),e=t.eventManager;return e.onListen=IO.bind(null,t.syncEngine),e.onUnlisten=CO.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=RO.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=DO.bind(null,t.syncEngine),e}function qO(n,t,e={}){const s=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,d,p){const y=new IR({next:b=>{y.Nu(),u.enqueueAndForget((()=>pR(l,v))),b.fromCache&&d.source==="server"?p.reject(new ct(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new gR(h,y,{includeMetadataChanges:!0,qa:!0});return mR(l,v)})(await Qy(n),n.asyncQueue,t,e,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firestore.googleapis.com",h1=!0;class f1{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ct(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CR,this.ssl=h1}else this.host=t.host,this.ssl=t.ssl??h1;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=GI;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<XI)throw new ct(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}BN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xR(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ct(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ct(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ct(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Am{constructor(t,e,s,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ct(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f1(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new DN;switch(s.type){case"firstParty":return new PN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ct(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const s=c1.get(e);s&&(ot("ComponentProvider","Removing Datastore"),c1.delete(e),s.terminate())})(this),Promise.resolve()}}function HO(n,t,e,s={}){var p;n=Zi(n,Am);const a=ao(t),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${t}:${e}`;a&&(w_(`https://${h}`),dw("Firestore",!0)),l.host!==CR&&l.host!==h&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:h,ssl:a,emulatorOptions:s};if(!zr(d,u)&&(n._setSettings(d),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=rn.MOCK_USER;else{y=aV(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new ct(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new rn(b)}n._authCredentials=new VN(new Vw(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Xr(this.firestore,t,this._query)}}class ze{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ze(this.firestore,t,this._key)}toJSON(){return{type:ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,s){if(Wc(e,ze._jsonSchema))return new ze(t,s||null,new ht(Xt.fromString(e.referencePath)))}}ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:Ue("string",ze._jsonSchemaVersion),referencePath:Ue("string")};class Lr extends Xr{constructor(t,e,s){super(t,e,fm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ze(this.firestore,null,new ht(t))}withConverter(t){return new Lr(this.firestore,t,this._path)}}function Zg(n,t,...e){if(n=on(n),Mw("collection","path",t),n instanceof Am){const s=Xt.fromString(t,...e);return nA(s),new Lr(n,null,s)}{if(!(n instanceof ze||n instanceof Lr))throw new ct(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Xt.fromString(t,...e));return nA(s),new Lr(n.firestore,null,s)}}function Yy(n,t,...e){if(n=on(n),arguments.length===1&&(t=C_.newId()),Mw("doc","path",t),n instanceof Am){const s=Xt.fromString(t,...e);return eA(s),new ze(n,null,new ht(s))}{if(!(n instanceof ze||n instanceof Lr))throw new ct(tt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Xt.fromString(t,...e));return eA(s),new ze(n.firestore,n instanceof Lr?n.converter:null,new ht(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="AsyncQueue";class m1{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aR(this,"async_queue_retry"),this._c=()=>{const s=md();s&&ot(d1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const e=md();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=md();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Qr(t))throw t;ot(d1,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,_n("INTERNAL UNHANDLED ERROR: ",p1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=e,e}enqueueAfterDelay(t,e,s){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=iv.createAndSchedule(this,t,e,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&gt(47125,{Pc:p1(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,s)=>e.targetTimeMs-s.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function p1(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(n){return(function(e,s){if(typeof e!="object"||e===null)return!1;const a=e;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class so extends Am{constructor(t,e,s,a){super(t,e,s,a),this.type="firestore",this._queue=new m1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new m1(t),this._firestoreClient=void 0,await t}}}function GO(n,t,e){e||(e=Oc);const s=im(n,"firestore");if(s.isInitialized(e)){const a=s.getImmediate({identifier:e}),l=s.getOptions(e);if(zr(l,t))return a;throw new ct(tt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ct(tt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<XI)throw new ct(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&ao(t.host)&&w_(t.host),s.initialize({options:t,instanceIdentifier:e})}function KO(n,t){const e=typeof n=="object"?n:Ew(),s=typeof n=="string"?n:Oc,a=im(e,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=sV("firestore");l&&HO(a,...l)}return a}function lv(n){if(n._terminated)throw new ct(tt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||QO(n),n._firestoreClient}function QO(n){var s,a,l;const t=n._freezeSettings(),e=(function(h,d,p,y){return new TM(h,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,xR(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((l=t.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new BO(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t){this._byteString=t}static fromBase64String(t){try{return new si(Be.fromBase64String(t))}catch(e){throw new ct(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new si(Be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Wc(t,si._jsonSchema))return si.fromBase64String(t.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:Ue("string",si._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ct(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ye(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ct(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ct(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return wt(this._lat,t._lat)||wt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(t){if(Wc(t,Ji._jsonSchema))return new Ji(t.latitude,t.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:Ue("string",Ji._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Wc(t,ts._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new ts(t.vectorValues);throw new ct(tt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:Ue("string",ts._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=/^__.*__$/;class XO{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new Bs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Fl(t,this.data,e,this.fieldTransforms)}}class DR{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return new Bs(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function VR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{Ac:n})}}class cv{constructor(t,e,s,a,l,u){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new cv({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const e=(a=this.path)==null?void 0:a.child(t),s=this.Vc({path:e,fc:!1});return s.gc(t),s}yc(t){var a;const e=(a=this.path)==null?void 0:a.child(t),s=this.Vc({path:e,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return jd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(VR(this.Ac)&&YO.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class $O{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Em(t)}Cc(t,e,s,a=!1){return new cv({Ac:t,methodName:e,Dc:s,path:ye.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hv(n){const t=n._freezeSettings(),e=Em(n._databaseId);return new $O(n._databaseId,!!t.ignoreUndefinedProperties,e)}function WO(n,t,e,s,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,t,e,a);fv("Data must be an object, but it was:",u,s);const h=NR(s,u);let d,p;if(l.merge)d=new Dn(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=Xy(t,v,e);if(!u.contains(b))throw new ct(tt.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);PR(y,b)||y.push(b)}d=new Dn(y),p=u.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,p=u.fieldTransforms;return new XO(new fn(h),d,p)}class wm extends uv{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof wm}}function ZO(n,t,e,s){const a=n.Cc(1,t,e);fv("Data must be an object, but it was:",a,s);const l=[],u=fn.empty();Yr(s,((d,p)=>{const y=dv(t,d,e);p=on(p);const v=a.yc(y);if(p instanceof wm)l.push(y);else{const b=rh(p,v);b!=null&&(l.push(y),u.set(y,b))}}));const h=new Dn(l);return new DR(u,h,a.fieldTransforms)}function JO(n,t,e,s,a,l){const u=n.Cc(1,t,e),h=[Xy(t,s,e)],d=[a];if(l.length%2!=0)throw new ct(tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)h.push(Xy(t,l[b])),d.push(l[b+1]);const p=[],y=fn.empty();for(let b=h.length-1;b>=0;--b)if(!PR(p,h[b])){const w=h[b];let N=d[b];N=on(N);const k=u.yc(w);if(N instanceof wm)p.push(w);else{const z=rh(N,k);z!=null&&(p.push(w),y.set(w,z))}}const v=new Dn(p);return new DR(y,v,u.fieldTransforms)}function t4(n,t,e,s=!1){return rh(e,n.Cc(s?4:3,t))}function rh(n,t){if(MR(n=on(n)))return fv("Unsupported field value:",t,n),NR(n,t);if(n instanceof uv)return(function(s,a){if(!VR(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let d=rh(h,a.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),u++}return{arrayValue:{values:l}}})(n,t)}return(function(s,a){if((s=on(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return BM(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Jt.fromDate(s);return{timestampValue:Ol(a.serializer,l)}}if(s instanceof Jt){const l=new Jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ol(a.serializer,l)}}if(s instanceof Ji)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof si)return{bytesValue:CI(a.serializer,s._byteString)};if(s instanceof ze){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:G_(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ts)return(function(u,h){return{mapValue:{fields:{[L_]:{stringValue:U_},[Cl]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return B_(h.serializer,p)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${sm(s)}`)})(n,t)}function NR(n,t){const e={};return Xw(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yr(n,((s,a)=>{const l=rh(a,t.mc(s));l!=null&&(e[s]=l)})),{mapValue:{fields:e}}}function MR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Jt||n instanceof Ji||n instanceof si||n instanceof ze||n instanceof uv||n instanceof ts)}function fv(n,t,e){if(!MR(e)||!Pw(e)){const s=sm(e);throw s==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+s)}}function Xy(n,t,e){if((t=on(t))instanceof Sm)return t._internalPath;if(typeof t=="string")return dv(n,t);throw jd("Field path arguments must be of type string or ",n,!1,void 0,e)}const e4=new RegExp("[~\\*/\\[\\]]");function dv(n,t,e){if(t.search(e4)>=0)throw jd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Sm(...t.split("."))._internalPath}catch{throw jd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function jd(n,t,e,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(l||u)&&(d+=" (found",l&&(d+=` in field ${s}`),u&&(d+=` in document ${a}`),d+=")"),new ct(tt.INVALID_ARGUMENT,h+n+d)}function PR(n,t){return n.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t,e,s,a,l){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new n4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(mv("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class n4 extends OR{data(){return super.data()}}function mv(n,t){return typeof t=="string"?dv(n,t):t instanceof Sm?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ct(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pv{}class LR extends pv{}function y1(n,t,...e){let s=[];t instanceof pv&&s.push(t),s=s.concat(e),(function(l){const u=l.filter((d=>d instanceof yv)).length,h=l.filter((d=>d instanceof gv)).length;if(u>1||u>0&&h>0)throw new ct(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class gv extends LR{constructor(t,e,s){super(),this._field=t,this._op=e,this._value=s,this.type="where"}static _create(t,e,s){return new gv(t,e,s)}_apply(t){const e=this._parse(t);return UR(t._query,e),new Xr(t.firestore,t.converter,Py(t._query,e))}_parse(t){const e=hv(t.firestore);return(function(l,u,h,d,p,y,v){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ct(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){T1(v,y);const N=[];for(const k of v)N.push(v1(d,l,k));b={arrayValue:{values:N}}}else b=v1(d,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||T1(v,y),b=t4(h,u,v,y==="in"||y==="not-in");return Bt.create(p,y,b)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class yv extends pv{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new yv(t,e)}_parse(t){const e=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return e.length===1?e[0]:te.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const d of h)UR(u,d),u=Py(u,d)})(t._query,e),new Xr(t.firestore,t.converter,Py(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _v extends LR{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new _v(t,e)}_apply(t){const e=(function(a,l,u){if(a.startAt!==null)throw new ct(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ct(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(l,u)})(t._query,this._field,this._direction);return new Xr(t.firestore,t.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new jl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(t._query,e))}}function _1(n,t="asc"){const e=t,s=mv("orderBy",n);return _v._create(s,e)}function v1(n,t,e){if(typeof(e=on(e))=="string"){if(e==="")throw new ct(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fI(t)&&e.indexOf("/")!==-1)throw new ct(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const s=t.path.child(Xt.fromString(e));if(!ht.isDocumentKey(s))throw new ct(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Lc(n,new ht(s))}if(e instanceof ze)return Lc(n,e._key);throw new ct(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sm(e)}.`)}function T1(n,t){if(!Array.isArray(n)||n.length===0)throw new ct(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function UR(n,t){const e=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ct(tt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ct(tt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class i4{convertValue(t,e="none"){switch(Br(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ns(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw gt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return Yr(t,((a,l)=>{s[a]=this.convertValue(l,e)})),s}convertVectorValue(t){var s,a,l;const e=(l=(a=(s=t.fields)==null?void 0:s[Cl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>de(u.doubleValue)));return new ts(e)}convertGeoPoint(t){return new Ji(de(t.latitude),de(t.longitude))}convertArray(t,e){return(t.values||[]).map((s=>this.convertValue(s,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const s=cm(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(Pc(t));default:return null}}convertTimestamp(t){const e=Vs(t);return new Jt(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=Xt.fromString(t);_t(zI(s),9688,{name:t});const a=new Za(s.get(1),s.get(3)),l=new ht(s.popFirst(5));return a.isEqual(e)||_n(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n,t,e){let s;return s=n?n.toFirestore(t):t,s}class cc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ka extends OR{constructor(t,e,s,a,l,u){super(t,e,s,a,u),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(mv("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(tt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Ka._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ka._jsonSchema={type:Ue("string",Ka._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class pd extends Ka{data(t={}){return super.data(t)}}class Qa{constructor(t,e,s,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new cc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((s=>{t.call(e,new pd(this._firestore,this._userDataWriter,s.key,s,new cc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ct(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const d=new pd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new cc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const d=new pd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new cc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:r4(h.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(tt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Qa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=C_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(e.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function r4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:n})}}Qa._jsonSchemaVersion="firestore/querySnapshot/1.0",Qa._jsonSchema={type:Ue("string",Qa._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class vv extends i4{constructor(t){super(),this.firestore=t}convertBytes(t){return new si(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ze(this.firestore,null,e)}}function E1(n){n=Zi(n,Xr);const t=Zi(n.firestore,so),e=lv(t),s=new vv(t);return kR(n._query),qO(e,n._query).then((a=>new Qa(t,s,n,a)))}function a4(n,t,e,...s){n=Zi(n,ze);const a=Zi(n.firestore,so),l=hv(a);let u;return u=typeof(t=on(t))=="string"||t instanceof Sm?JO(l,"updateDoc",n._key,t,e,s):ZO(l,"updateDoc",n._key,t),Tv(a,[u.toMutation(n._key,vn.exists(!0))])}function o4(n){return Tv(Zi(n.firestore,so),[new gm(n._key,vn.none())])}function l4(n,t){const e=Zi(n.firestore,so),s=Yy(n),a=s4(n.converter,t);return Tv(e,[WO(hv(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,vn.exists(!1))]).then((()=>s))}function b1(n,...t){var d,p,y;n=on(n);let e={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||g1(t[s])||(e=t[s++]);const a={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(g1(t[s])){const v=t[s];t[s]=(d=v.next)==null?void 0:d.bind(v),t[s+1]=(p=v.error)==null?void 0:p.bind(v),t[s+2]=(y=v.complete)==null?void 0:y.bind(v)}let l,u,h;if(n instanceof ze)u=Zi(n.firestore,so),h=fm(n._key.path),l={next:v=>{t[s]&&t[s](u4(u,n,v))},error:t[s+1],complete:t[s+2]};else{const v=Zi(n,Xr);u=Zi(v.firestore,so),h=v._query;const b=new vv(u);l={next:w=>{t[s]&&t[s](new Qa(u,b,v,w))},error:t[s+1],complete:t[s+2]},kR(n._query)}return(function(b,w,N,k){const z=new IR(k),Q=new gR(w,z,N);return b.asyncQueue.enqueueAndForget((async()=>mR(await Qy(b),Q))),()=>{z.Nu(),b.asyncQueue.enqueueAndForget((async()=>pR(await Qy(b),Q)))}})(lv(u),h,a,l)}function Tv(n,t){return(function(s,a){const l=new Cs;return s.asyncQueue.enqueueAndForget((async()=>VO(await FO(s),a,l))),l.promise})(lv(n),t)}function u4(n,t,e){const s=e.docs.get(t._key),a=new vv(n);return new Ka(n,a,t._key,s,new cc(e.hasPendingWrites,e.fromCache),t.converter)}class c4{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=d4(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function h4(n){return new c4(n)}class f4{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Bd.provider,this._offlineComponentProvider={build:e=>new zO(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}function d4(n){return new f4(n==null?void 0:n.forceOwnership)}(function(t,e=!0){(function(a){Bl=a})(zl),bl(new $a("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new so(new NN(s.getProvider("auth-internal")),new ON(u,s.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ct(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(p.options.projectId,y)})(u,a),u);return l={useFetchStreams:e,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Pr(Wb,Zb,t),Pr(Wb,Zb,"esm2020")})();var m4="firebase",p4="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(m4,p4,"app");function zR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g4=zR,BR=new Xc("auth","Firebase",zR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new I_("@firebase/auth");function y4(n,...t){Fd.logLevel<=zt.WARN&&Fd.warn(`Auth (${zl}): ${n}`,...t)}function gd(n,...t){Fd.logLevel<=zt.ERROR&&Fd.error(`Auth (${zl}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n,...t){throw Ev(n,...t)}function es(n,...t){return Ev(n,...t)}function jR(n,t,e){const s={...g4(),[t]:e};return new Xc("auth","Firebase",s).create(t,{appName:n.name})}function Ur(n){return jR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ev(n,...t){if(typeof n!="string"){const e=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(e,...s)}return BR.create(n,...t)}function At(n,t,...e){if(!n)throw Ev(t,...e)}function Rs(n){const t="INTERNAL ASSERTION FAILED: "+n;throw gd(t),new Error(t)}function Ps(n,t){n||Rs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function _4(){return A1()==="http:"||A1()==="https:"}function A1(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_4()||hV()||"connection"in navigator)?navigator.onLine:!0}function T4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ps(e>t,"Short delay should be less than long delay!"),this.isMobile=uV()||fV()}get(){return v4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n,t){Ps(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{static initialize(t,e,s){this.fetchImpl=t,e&&(this.headersImpl=e),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A4=new ah(3e4,6e4);function Im(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Hl(n,t,e,s,a={}){return qR(n,a,async()=>{let l={},u={};s&&(t==="GET"?u=s:l={body:JSON.stringify(s)});const h=$c({key:n.config.apiKey,...u}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p={method:t,headers:d,...l};return cV()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&ao(n.emulatorConfig.host)&&(p.credentials="include"),FR.fetch()(await GR(n,n.config.apiHost,e,h),p)})}async function qR(n,t,e){n._canInitEmulator=!1;const s={...E4,...t};try{const a=new S4(n),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Wf(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wf(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Wf(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Wf(n,"user-disabled",u);const y=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw jR(n,y,p);Ms(n,y)}}catch(a){if(a instanceof Us)throw a;Ms(n,"network-request-failed",{message:String(a)})}}async function HR(n,t,e,s,a={}){const l=await Hl(n,t,e,s,a);return"mfaPendingCredential"in l&&Ms(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function GR(n,t,e,s){const a=`${t}${e}?${s}`,l=n,u=l.config.emulator?bv(n.config,a):`${n.config.apiScheme}://${a}`;return b4.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class S4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,s)=>{this.timer=setTimeout(()=>s(es(this.auth,"network-request-failed")),A4.get())})}}function Wf(n,t,e){const s={appName:n.name};e.email&&(s.email=e.email),e.phoneNumber&&(s.phoneNumber=e.phoneNumber);const a=es(n,t,s);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(n,t){return Hl(n,"POST","/v1/accounts:delete",t)}async function qd(n,t){return Hl(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function I4(n,t=!1){const e=on(n),s=await e.getIdToken(t),a=Av(s);At(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Ec(Jg(a.auth_time)),issuedAtTime:Ec(Jg(a.iat)),expirationTime:Ec(Jg(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Jg(n){return Number(n)*1e3}function Av(n){const[t,e,s]=n.split(".");if(t===void 0||e===void 0||s===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const a=lw(e);return a?JSON.parse(a):(gd("Failed to decode base64 JWT payload"),null)}catch(a){return gd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function S1(n){const t=Av(n);return At(t,"internal-error"),At(typeof t.exp<"u","internal-error"),At(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(n,t,e=!1){if(e)return t;try{return await t}catch(s){throw s instanceof Us&&R4(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function R4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(n){var v;const t=n.auth,e=await n.getIdToken(),s=await qc(n,qd(t,{idToken:e}));At(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(v=a.providerUserInfo)!=null&&v.length?KR(a.providerUserInfo):[],u=D4(n.providerData,l),h=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),p=h?d:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Wy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function C4(n){const t=on(n);await Hd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function D4(n,t){return[...n.filter(s=>!t.some(a=>a.providerId===s.providerId)),...t]}function KR(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(n,t){const e=await qR(n,{},async()=>{const s=$c({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await GR(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:s};return n.emulatorConfig&&ao(n.emulatorConfig.host)&&(d.credentials="include"),FR.fetch()(u,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function N4(n,t){return Hl(n,"POST","/v2/accounts:revokeToken",Im(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){At(t.idToken,"internal-error"),At(typeof t.idToken<"u","internal-error"),At(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):S1(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){At(t.length!==0,"internal-error");const e=S1(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:s,refreshToken:a,expiresIn:l}=await V4(t,e);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(t,e,s){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,e){const{refreshToken:s,accessToken:a,expirationTime:l}=e,u=new _l;return s&&(At(typeof s=="string","internal-error",{appName:t}),u.refreshToken=s),a&&(At(typeof a=="string","internal-error",{appName:t}),u.accessToken=a),l&&(At(typeof l=="number","internal-error",{appName:t}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(n,t){At(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class wi{constructor({uid:t,auth:e,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new x4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Wy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await qc(this,this.stsTokenManager.getToken(this.auth,t));return At(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return I4(this,t)}reload(){return C4(this)}_assign(t){this!==t&&(At(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new wi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),e&&await Hd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(Ur(this.auth));const t=await this.getIdToken();return await qc(this,w4(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const s=e.displayName??void 0,a=e.email??void 0,l=e.phoneNumber??void 0,u=e.photoURL??void 0,h=e.tenantId??void 0,d=e._redirectEventId??void 0,p=e.createdAt??void 0,y=e.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:N,stsTokenManager:k}=e;At(v&&k,t,"internal-error");const z=_l.fromJSON(this.name,k);At(typeof v=="string",t,"internal-error"),Ar(s,t.name),Ar(a,t.name),At(typeof b=="boolean",t,"internal-error"),At(typeof w=="boolean",t,"internal-error"),Ar(l,t.name),Ar(u,t.name),Ar(h,t.name),Ar(d,t.name),Ar(p,t.name),Ar(y,t.name);const Q=new wi({uid:v,auth:t,email:a,emailVerified:b,displayName:s,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:z,createdAt:p,lastLoginAt:y});return N&&Array.isArray(N)&&(Q.providerData=N.map($=>({...$}))),d&&(Q._redirectEventId=d),Q}static async _fromIdTokenResponse(t,e,s=!1){const a=new _l;a.updateFromServerResponse(e);const l=new wi({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:s});return await Hd(l),l}static async _fromGetAccountInfoResponse(t,e,s){const a=e.users[0];At(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?KR(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new _l;h.updateFromIdToken(s);const d=new wi({uid:a.localId,auth:t,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Wy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=new Map;function xs(n){Ps(n instanceof Function,"Expected a class definition");let t=w1.get(n);return t?(Ps(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,w1.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}QR.type="NONE";const I1=QR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n,t,e){return`firebase:${n}:${t}:${e}`}class vl{constructor(t,e,s){this.persistence=t,this.auth=e,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=yd(this.userKey,a.apiKey,l),this.fullPersistenceKey=yd("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await qd(this.auth,{idToken:t}).catch(()=>{});return e?wi._fromGetAccountInfoResponse(this.auth,e,t):null}return wi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,s="authUser"){if(!e.length)return new vl(xs(I1),t,s);const a=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||xs(I1);const u=yd(s,t.config.apiKey,t.name);let h=null;for(const p of e)try{const y=await p._get(u);if(y){let v;if(typeof y=="string"){const b=await qd(t,{idToken:y}).catch(()=>{});if(!b)break;v=await wi._fromGetAccountInfoResponse(t,b,y)}else v=wi._fromJSON(t,y);p!==l&&(h=v),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new vl(l,t,s):(l=d[0],h&&await l._set(u,h.toJSON()),await Promise.all(e.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new vl(l,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(WR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(YR(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JR(t))return"Blackberry";if(tx(t))return"Webos";if(XR(t))return"Safari";if((t.includes("chrome/")||$R(t))&&!t.includes("edge/"))return"Chrome";if(ZR(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(e);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function YR(n=Ge()){return/firefox\//i.test(n)}function XR(n=Ge()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $R(n=Ge()){return/crios\//i.test(n)}function WR(n=Ge()){return/iemobile/i.test(n)}function ZR(n=Ge()){return/android/i.test(n)}function JR(n=Ge()){return/blackberry/i.test(n)}function tx(n=Ge()){return/webos/i.test(n)}function Sv(n=Ge()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function M4(n=Ge()){var t;return Sv(n)&&!!((t=window.navigator)!=null&&t.standalone)}function P4(){return dV()&&document.documentMode===10}function ex(n=Ge()){return Sv(n)||ZR(n)||tx(n)||JR(n)||/windows phone/i.test(n)||WR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(n,t=[]){let e;switch(n){case"Browser":e=R1(Ge());break;case"Worker":e=`${R1(Ge())}-${n}`;break;default:e=n}const s=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${zl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const s=l=>new Promise((u,h)=>{try{const d=t(l);u(d)}catch(d){h(d)}});s.onAbort=e,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const s of this.queue)await s(t),s.onAbort&&e.push(s.onAbort)}catch(s){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(n,t={}){return Hl(n,"GET","/v2/passwordPolicy",Im(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=6;class U4{constructor(t){var s;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??L4,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=t.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(e.meetsMinPasswordLength=t.length>=s),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let s;for(let a=0;a<t.length;a++)s=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,e,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(t,e,s,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x1(this),this.idTokenSubscription=new x1(this),this.beforeStateQueue=new O4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=xs(e)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await vl.create(this,t),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await qd(this,{idToken:t}),s=await wi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(s)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var l;if(Si(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let s=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(t);(!u||u===h)&&(d!=null&&d.user)&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Hd(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=T4()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Si(this.app))return Promise.reject(Ur(this));const e=t?on(t):null;return e&&At(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Si(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await k4(this),e=new U4(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Xc("auth","Firebase",t())}onAuthStateChanged(t,e,s){return this.registerStateListener(this.authStateSubscription,t,e,s)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,s){return this.registerStateListener(this.idTokenSubscription,t,e,s)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(s.tenantId=this.tenantId),await N4(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const s=await this.getOrInitRedirectPersistenceManager(e);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&xs(t)||this._popupRedirectResolver;At(e,this,"argument-error"),this.redirectPersistenceManager=await vl.create(this,[xs(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,s;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,s,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,s,a);return()=>{u=!0,d()}}else{const d=t.addObserver(e);return()=>{u=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=nx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&y4(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Rm(n){return on(n)}class x1{constructor(t){this.auth=t,this.observer=null,this.addObserver=vV(e=>this.observer=e)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B4(n){wv=n}function j4(n){return wv.loadJS(n)}function F4(){return wv.gapiScript}function q4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n,t){const e=im(n,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(zr(l,t??{}))return a;Ms(a,"already-initialized")}return e.initialize({options:t})}function G4(n,t){const e=(t==null?void 0:t.persistence)||[],s=(Array.isArray(e)?e:[e]).map(xs);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function K4(n,t,e){const s=Rm(n);At(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const a=!1,l=ix(t),{host:u,port:h}=Q4(t),d=h===null?"":`:${h}`,p={url:`${l}//${u}${d}/`},y=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){At(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),At(zr(p,s.config.emulator)&&zr(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,ao(u)?(w_(`${l}//${u}${d}`),dw("Auth",!0)):Y4()}function ix(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function Q4(n){const t=ix(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const s=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:C1(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:C1(u)}}}function C1(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function Y4(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Rs("not implemented")}_getIdTokenResponse(t){return Rs("not implemented")}_linkToIdToken(t,e){return Rs("not implemented")}_getReauthenticationResolver(t){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n,t){return HR(n,"POST","/v1/accounts:signInWithIdp",Im(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="http://localhost";class ro extends sx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ro(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ms("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:a,...l}=e;if(!s||!a)return null;const u=new ro(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(t){const e=this.buildRequest();return Tl(t,e)}_linkToIdToken(t,e){const s=this.buildRequest();return s.idToken=e,Tl(t,s)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Tl(t,e)}buildRequest(){const t={requestUri:X4,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=$c(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends rx{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends oh{constructor(){super("facebook.com")}static credential(t){return ro._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ir.credentialFromTaggedObject(t)}static credentialFromError(t){return Ir.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ir.credential(t.oauthAccessToken)}catch{return null}}}Ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends oh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ro._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Rr.credentialFromTaggedObject(t)}static credentialFromError(t){return Rr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:s}=t;if(!e&&!s)return null;try{return Rr.credential(e,s)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends oh{constructor(){super("github.com")}static credential(t){return ro._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xr.credentialFromTaggedObject(t)}static credentialFromError(t){return xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xr.credential(t.oauthAccessToken)}catch{return null}}}xr.GITHUB_SIGN_IN_METHOD="github.com";xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends oh{constructor(){super("twitter.com")}static credential(t,e){return ro._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Cr.credentialFromTaggedObject(t)}static credentialFromError(t){return Cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:s}=t;if(!e||!s)return null;try{return Cr.credential(e,s)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(n,t){return HR(n,"POST","/v1/accounts:signUp",Im(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,s,a=!1){const l=await wi._fromIdTokenResponse(t,s,a),u=D1(s);return new Hr({user:l,providerId:u,_tokenResponse:s,operationType:e})}static async _forOperation(t,e,s){await t._updateTokensIfNecessary(s,!0);const a=D1(s);return new Hr({user:t,providerId:a,_tokenResponse:s,operationType:e})}}function D1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(n){var a;if(Si(n.app))return Promise.reject(Ur(n));const t=Rm(n);if(await t._initializationPromise,(a=t.currentUser)!=null&&a.isAnonymous)return new Hr({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await $4(t,{returnSecureToken:!0}),s=await Hr._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends Us{constructor(t,e,s,a){super(e.code,e.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Gd.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,e,s,a){return new Gd(t,e,s,a)}}function ax(n,t,e,s){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Gd._fromErrorAndOperation(n,l,t,s):l})}async function Z4(n,t,e=!1){const s=await qc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Hr._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4(n,t,e=!1){const{auth:s}=n;if(Si(s.app))return Promise.reject(Ur(s));const a="reauthenticate";try{const l=await qc(n,ax(s,a,t,n),e);At(l.idToken,s,"internal-error");const u=Av(l.idToken);At(u,s,"internal-error");const{sub:h}=u;return At(n.uid===h,s,"user-mismatch"),Hr._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ms(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(n,t,e=!1){if(Si(n.app))return Promise.reject(Ur(n));const s="signIn",a=await ax(n,s,t),l=await Hr._fromIdTokenResponse(n,s,a);return e||await n._updateCurrentUser(l.user),l}function ek(n,t,e,s){return on(n).onIdTokenChanged(t,e,s)}function nk(n,t,e){return on(n).beforeAuthStateChanged(t,e)}function ik(n,t,e,s){return on(n).onAuthStateChanged(t,e,s)}const Kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Kd,"1"),this.storage.removeItem(Kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=1e3,rk=10;class lx extends ox{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ex(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const s=this.storage.getItem(e),a=this.localCache[e];s!==a&&t(e,a,s)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const s=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!e&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);P4()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,rk):a()}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const a of Array.from(s))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:s}),!0)})},sk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}lx.type="LOCAL";const ak=lx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends ox{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}ux.type="SESSION";const cx=ux;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const s=new xm(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:s,eventType:a,data:l}=e.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;e.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async p=>p(e.origin,l)),d=await ok(h);e.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n="",t=10){let e="";for(let s=0;s<t;s++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,d)=>{const p=Iv("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(b.data.response);break;default:clearTimeout(y),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return window}function uk(n){ns().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(){return typeof ns().WorkerGlobalScope<"u"&&typeof ns().importScripts=="function"}async function ck(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function fk(){return hx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="firebaseLocalStorageDb",dk=1,Qd="firebaseLocalStorage",dx="fbase_key";class lh{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Cm(n,t){return n.transaction([Qd],t?"readwrite":"readonly").objectStore(Qd)}function mk(){const n=indexedDB.deleteDatabase(fx);return new lh(n).toPromise()}function Zy(){const n=indexedDB.open(fx,dk);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Qd,{keyPath:dx})}catch(a){e(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Qd)?t(s):(s.close(),await mk(),t(await Zy()))})})}async function V1(n,t,e){const s=Cm(n,!0).put({[dx]:t,value:e});return new lh(s).toPromise()}async function pk(n,t){const e=Cm(n,!1).get(t),s=await new lh(e).toPromise();return s===void 0?null:s.value}function N1(n,t){const e=Cm(n,!0).delete(t);return new lh(e).toPromise()}const gk=800,yk=3;class mx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zy(),this.db)}async _withRetries(t){let e=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(e++>yk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xm._getInstance(fk()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await ck(),!this.activeServiceWorker)return;this.sender=new lk(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(s=t[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||hk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Zy();return await V1(t,Kd,"1"),await N1(t,Kd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(s=>V1(s,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(s=>pk(s,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>N1(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=Cm(a,!1).getAll();return new lh(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],s=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const a of Array.from(s))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mx.type="LOCAL";const _k=mx;new ah(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(n,t){return t?xs(t):(At(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv extends sx{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Tl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Tl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Tl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Tk(n){return tk(n.auth,new Rv(n),n.bypassAuthState)}function Ek(n){const{auth:t,user:e}=n;return At(e,t,"internal-error"),J4(e,new Rv(n),n.bypassAuthState)}async function bk(n){const{auth:t,user:e}=n;return At(e,t,"internal-error"),Z4(e,new Rv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t,e,s,a,l=!1){this.auth=t,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=t;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:e,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Tk;case"linkViaPopup":case"linkViaRedirect":return bk;case"reauthViaPopup":case"reauthViaRedirect":return Ek;default:Ms(this.auth,"internal-error")}}resolve(t){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new ah(2e3,1e4);class hl extends px{constructor(t,e,s,a,l){super(t,e,a,l),this.provider=s,this.authWindow=null,this.pollId=null,hl.currentPopupAction&&hl.currentPopupAction.cancel(),hl.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return At(t,this.auth,"internal-error"),t}async onExecution(){Ps(this.filter.length===1,"Popup operations only handle one event");const t=Iv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hl.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,s;if((s=(e=this.authWindow)==null?void 0:e.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ak.get())};t()}}hl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="pendingRedirect",_d=new Map;class wk extends px{constructor(t,e,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,s),this.eventId=null}async execute(){let t=_d.get(this.auth._key());if(!t){try{const s=await Ik(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(e){t=()=>Promise.reject(e)}_d.set(this.auth._key(),t)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ik(n,t){const e=Ck(t),s=xk(n);if(!await s._isAvailable())return!1;const a=await s._get(e)==="true";return await s._remove(e),a}function Rk(n,t){_d.set(n._key(),t)}function xk(n){return xs(n._redirectPersistence)}function Ck(n){return yd(Sk,n.config.apiKey,n.name)}async function Dk(n,t,e=!1){if(Si(n.app))return Promise.reject(Ur(n));const s=Rm(n),a=vk(s,t),u=await new wk(s,a,e).execute();return u&&!e&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,t)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=600*1e3;class Nk{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(e=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Mk(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var s;if(t.error&&!gx(t)){const a=((s=t.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";e.onError(es(this.auth,a))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const s=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Vk&&this.cachedEventUids.clear(),this.cachedEventUids.has(M1(t))}saveEventToCache(t){this.cachedEventUids.add(M1(t)),this.lastProcessedEventTime=Date.now()}}function M1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function gx({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Mk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(n,t={}){return Hl(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kk=/^https?/;async function Lk(n){if(n.config.emulator)return;const{authorizedDomains:t}=await Pk(n);for(const e of t)try{if(Uk(e))return}catch{}Ms(n,"unauthorized-domain")}function Uk(n){const t=$y(),{protocol:e,hostname:s}=new URL(t);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&u.hostname===s}if(!kk.test(e))return!1;if(Ok.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new ah(3e4,6e4);function P1(){const n=ns().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function Bk(n){return new Promise((t,e)=>{var a,l,u;function s(){P1(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{P1(),e(es(n,"network-request-failed"))},timeout:zk.get()})}if((l=(a=ns().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)t(gapi.iframes.getContext());else if((u=ns().gapi)!=null&&u.load)s();else{const h=q4("iframefcb");return ns()[h]=()=>{gapi.load?s():e(es(n,"network-request-failed"))},j4(`${F4()}?onload=${h}`).catch(d=>e(d))}}).catch(t=>{throw vd=null,t})}let vd=null;function jk(n){return vd=vd||Bk(n),vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new ah(5e3,15e3),qk="__/auth/iframe",Hk="emulator/auth/iframe",Gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qk(n){const t=n.config;At(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?bv(t,Hk):`https://${n.config.authDomain}/${qk}`,s={apiKey:t.apiKey,appName:n.name,v:zl},a=Kk.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${e}?${$c(s).slice(1)}`}async function Yk(n){const t=await jk(n),e=ns().gapi;return At(e,n,"internal-error"),t.open({where:document.body,url:Qk(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gk,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=es(n,"network-request-failed"),h=ns().setTimeout(()=>{l(u)},Fk.get());function d(){ns().clearTimeout(h),a(s)}s.ping(d).then(d,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$k=500,Wk=600,Zk="_blank",Jk="http://localhost";class O1{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t6(n,t,e,s=$k,a=Wk){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const d={...Xk,width:s.toString(),height:a.toString(),top:l,left:u},p=Ge().toLowerCase();e&&(h=$R(p)?Zk:e),YR(p)&&(t=t||Jk,d.scrollbars="yes");const y=Object.entries(d).reduce((b,[w,N])=>`${b}${w}=${N},`,"");if(M4(p)&&h!=="_self")return e6(t||"",h),new O1(null);const v=window.open(t||"",h,y);At(v,n,"popup-blocked");try{v.focus()}catch{}return new O1(v)}function e6(n,t){const e=document.createElement("a");e.href=n,e.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="__/auth/handler",i6="emulator/auth/handler",s6=encodeURIComponent("fac");async function k1(n,t,e,s,a,l){At(n.config.authDomain,n,"auth-domain-config-required"),At(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:s,v:zl,eventId:a};if(t instanceof rx){t.setDefaultLanguage(n.languageCode),u.providerId=t.providerId||"",_V(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(t instanceof oh){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await n._getAppCheckToken(),p=d?`#${s6}=${encodeURIComponent(d)}`:"";return`${r6(n)}?${$c(h).slice(1)}${p}`}function r6({config:n}){return n.emulator?bv(n,i6):`https://${n.authDomain}/${n6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="webStorageSupport";class a6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cx,this._completeRedirectFn=Dk,this._overrideRedirectResult=Rk}async _openPopup(t,e,s,a){var u;Ps((u=this.eventManagers[t._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await k1(t,e,s,$y(),a);return t6(t,l,Iv())}async _openRedirect(t,e,s,a){await this._originValidation(t);const l=await k1(t,e,s,$y(),a);return uk(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):(Ps(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(t);return this.eventManagers[e]={promise:s},s.catch(()=>{delete this.eventManagers[e]}),s}async initAndGetManager(t){const e=await Yk(t),s=new Nk(t);return e.register("authEvent",a=>(At(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=e,s}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(ty,{type:ty},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[ty];l!==void 0&&e(!!l),Ms(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Lk(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return ex()||XR()||Sv()}}const o6=a6;var L1="@firebase/auth",U1="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c6(n){bl(new $a("auth",(t,{options:e})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;At(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nx(n)},p=new z4(s,a,l,d);return G4(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,s)=>{t.getProvider("auth-internal").initialize()})),bl(new $a("auth-internal",t=>{const e=Rm(t.getProvider("auth").getImmediate());return(s=>new l6(s))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(L1,U1,u6(n)),Pr(L1,U1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=300,f6=fw("authIdTokenMaxAge")||h6;let z1=null;const d6=n=>async t=>{const e=t&&await t.getIdTokenResult(),s=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(s&&s>f6)return;const a=e==null?void 0:e.token;z1!==a&&(z1=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function m6(n=Ew()){const t=im(n,"auth");if(t.isInitialized())return t.getImmediate();const e=H4(n,{popupRedirectResolver:o6,persistence:[_k,ak,cx]}),s=fw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=d6(l.toString());nk(e,u,()=>u(e.currentUser)),ek(e,h=>u(h))}}const a=cw("auth");return a&&K4(e,`http://${a}`),e}function p6(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}B4({loadJS(n){return new Promise((t,e)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=t,s.onerror=a=>{const l=es("internal-error");l.customData=a,e(l)},s.type="text/javascript",s.charset="UTF-8",p6().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c6("Browser");const g6={apiKey:"AIzaSyBVyZLnfNMa5kQ_uLLbZjDaiW276J9u0gQ",authDomain:"sugar-vibes.firebaseapp.com",projectId:"sugar-vibes",storageBucket:"sugar-vibes.firebasestorage.app",messagingSenderId:"1050505896406",appId:"1:1050505896406:web:cdbe1dba131e9a25b2c477",measurementId:"G-1KN6W5RTWT"},Jy=Tw(g6);let za;try{za=GO(Jy,{localCache:h4({})}),console.log("Firestore offline persistence successfully enabled.")}catch(n){n.code=="failed-precondition"?console.warn("Firestore offline persistence failed: Multiple tabs open."):n.code=="unimplemented"&&console.warn("Firestore offline persistence failed: Browser does not support it."),za=KO(Jy)}const B1=m6(Jy),y6=()=>{const[n,t]=Z.useState(new Map),[e,s]=Z.useState(new Map),[a,l]=Z.useState(!0),u=Z.useRef(!1),h=Z.useCallback(async y=>{try{const v=await l4(Zg(za,"ingredients"),y);return{...y,id:v.id}}catch(v){throw console.error("Error al agregar el ingrediente:",v),v}},[]),d=Z.useCallback(async y=>{try{const{id:v,...b}=y;await a4(Yy(za,"ingredients",v),b)}catch(v){throw console.error("Error al actualizar el ingrediente:",v),v}},[]),p=Z.useCallback(async y=>{try{await o4(Yy(za,"ingredients",y))}catch(v){throw console.error("Error al eliminar el ingrediente:",v),v}},[]);return Z.useEffect(()=>{if(u.current)return;u.current=!0;const y=Zg(za,"ingredients"),v=Zg(za,"recipes");(async()=>{try{const[w,N]=await Promise.all([E1(y),E1(v)]),k=b1(y1(y,_1("name")),Q=>{const $=new Map;Q.forEach(G=>{const st=G.data();st.name&&st.pricePerUnit&&st.unit&&$.set(G.id,{id:G.id,...st})}),t($),l(!1)},Q=>{console.error("Error al cargar ingredientes:",Q),l(!1)}),z=b1(y1(v,_1("name")),Q=>{const $=new Map;Q.forEach(G=>{const st=G.data();st.name&&st.items&&$.set(G.id,{id:G.id,...st})}),s($)},Q=>{console.error("Error al cargar recetas:",Q)});return()=>{k(),z()}}catch(w){console.error("Error al cargar datos iniciales:",w),l(!1)}})()},[]),{isLoading:a,ingredients:n,recipes:e,addIngredient:h,updateIngredient:d,deleteIngredient:p}};var cn=(n=>(n.G="g",n.KG="kg",n.ML="ml",n.L="l",n.UNIT="unit",n))(cn||{});const _6={g:"g",kg:"kg",ml:"ml",l:"l",unit:"unidad"},v6={[cn.KG]:{to:cn.G,factor:1e3},[cn.L]:{to:cn.ML,factor:1e3}},T6=n=>{const t=v6[n.purchaseUnit];if(t){const e=n.purchaseQuantity*t.factor;return e===0?{cost:0,unit:t.to}:{cost:n.purchasePrice/e,unit:t.to}}return n.purchaseQuantity===0?{cost:0,unit:n.purchaseUnit}:{cost:n.purchasePrice/n.purchaseQuantity,unit:n.purchaseUnit}};cn.G+"",cn.KG+"",cn.KG+"",cn.G+"",cn.ML+"",cn.L+"",cn.L+"",cn.ML+"",cn.UNIT+"";const E6=n=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(n),yx=({children:n,className:t=""})=>L.jsx("div",{className:`bg-white rounded-xl shadow-md p-6 ${t}`,children:n}),xv=({children:n,...t})=>L.jsx("button",{...t,className:"w-full bg-emerald-500 text-white rounded-lg py-2 px-4 font-bold hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all disabled:opacity-50",children:n});/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),A6=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,s)=>s?s.toUpperCase():e.toLowerCase()),j1=n=>{const t=A6(n);return t.charAt(0).toUpperCase()+t.slice(1)},_x=(...n)=>n.filter((t,e,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===e).join(" ").trim(),S6=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=Z.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},d)=>Z.createElement("svg",{ref:d,...w6,width:t,height:t,stroke:n,strokeWidth:s?Number(e)*24/Number(t):e,className:_x("lucide",a),...!l&&!S6(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,y])=>Z.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=(n,t)=>{const e=Z.forwardRef(({className:s,...a},l)=>Z.createElement(I6,{ref:l,iconNode:t,className:_x(`lucide-${b6(j1(n))}`,`lucide-${n}`,s),...a}));return e.displayName=j1(n),e};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],x6=bn("arrow-left",R6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],D6=bn("calculator",C6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],F1=bn("chef-hat",V6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M6=bn("clock",N6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Yd=bn("dollar-sign",P6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],k6=bn("list",O6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],vx=bn("mic",L6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],z6=bn("package",U6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],j6=bn("percent",B6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bc=bn("plus",F6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Tx=bn("square-pen",q6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ex=bn("trash-2",H6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],K6=bn("users",G6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Y6=bn("utensils",Q6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$6=bn("x",X6),W6=({ingredients:n,onAdd:t,onEdit:e,onDelete:s,onListen:a})=>L.jsxs(yx,{children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ingredientes"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("button",{onClick:a,"aria-label":"Aadir ingrediente por voz",className:"p-2 rounded-lg bg-emerald-500 text-white hover:bg-emerald-600 transition-colors",children:L.jsx(vx,{size:20})}),L.jsxs(xv,{onClick:t,className:"flex items-center gap-2 !py-2 !px-3",children:[L.jsx(bc,{size:18}),L.jsx("span",{className:"hidden sm:inline",children:"Nuevo"})]})]})]}),L.jsx("div",{className:"space-y-3 pr-2 -mr-2 max-h-[400px] overflow-y-auto",children:n.map(l=>{const{cost:u,unit:h}=T6(l);return L.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg hover:bg-gray-100 transition-colors",children:[L.jsxs("div",{children:[L.jsx("p",{className:"font-semibold text-gray-800",children:l.name}),L.jsxs("p",{className:"text-sm text-gray-600",children:[E6(u)," / ",h]})]}),L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("button",{onClick:()=>e(l),className:"text-gray-400 hover:text-emerald-600 transition-colors",children:L.jsx(Tx,{size:18})}),L.jsx("button",{onClick:()=>s(l.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:L.jsx(Ex,{size:18})})]})]},l.id)})})]}),Z6=({recipes:n,selectedRecipeId:t,onSelectRecipe:e,onAdd:s,onEdit:a,onDelete:l,onListen:u})=>L.jsxs(yx,{children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Recetas"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("button",{onClick:u,"aria-label":"Aadir receta por voz",className:"p-2 rounded-lg bg-emerald-500 text-white hover:bg-emerald-600 transition-colors",children:L.jsx(vx,{size:20})}),L.jsxs(xv,{onClick:s,className:"flex items-center gap-2 !py-2 !px-3",children:[L.jsx(bc,{size:18}),L.jsx("span",{className:"hidden sm:inline",children:"Nueva"})]})]})]}),L.jsx("div",{className:"space-y-3 pr-2 -mr-2 max-h-[400px] overflow-y-auto",children:n.map(h=>L.jsx("div",{onClick:()=>e(h.id),className:`p-4 rounded-lg cursor-pointer transition-all ${t===h.id?"bg-emerald-100 ring-2 ring-emerald-500":"hover:bg-gray-100"}`,children:L.jsxs("div",{className:"flex justify-between items-start",children:[L.jsxs("div",{children:[L.jsx("p",{className:"font-bold text-gray-800",children:h.name}),L.jsxs("p",{className:"text-sm text-gray-600",children:[h.servings," porciones"]})]}),L.jsxs("div",{className:"flex items-center gap-3 pt-1",children:[L.jsx("button",{onClick:d=>{d.stopPropagation(),a(h)},className:"text-gray-400 hover:text-emerald-600 transition-colors",children:L.jsx(Tx,{size:18})}),L.jsx("button",{onClick:d=>{d.stopPropagation(),l(h.id)},className:"text-gray-400 hover:text-red-500 transition-colors",children:L.jsx(Ex,{size:18})})]})]})},h.id))})]}),J6=({recipe:n,ingredients:t,calculateCost:e})=>{const s=d=>{var p;return((p=t.find(y=>y.id===d))==null?void 0:p.name)||"Desconocido"},a=d=>{var p;return((p=t.find(y=>y.id===d))==null?void 0:p.unit)||"unidad"},l=(d,p)=>{const y=t.find(v=>v.id===d);return y?y.pricePerUnit*p:0},u=e(n),h=n.portions>0?u/n.portions:0;return L.jsxs("div",{children:[L.jsx("div",{className:"p-6 border-b border-gray-100",children:L.jsx("div",{className:"flex justify-between items-start",children:L.jsxs("div",{children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n.name}),L.jsxs("div",{className:"mt-2 flex flex-wrap gap-4",children:[L.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[L.jsx(M6,{className:"h-4 w-4 mr-1.5 text-blue-500"}),n.preparationTime," minutos"]}),L.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[L.jsx(K6,{className:"h-4 w-4 mr-1.5 text-blue-500"}),n.portions," porciones"]}),L.jsxs("div",{className:"flex items-center text-sm font-medium text-green-700",children:[L.jsx(Yd,{className:"h-4 w-4 mr-1.5"}),"Costo total: $",u.toFixed(2)]}),L.jsxs("div",{className:"flex items-center text-sm font-medium text-blue-700",children:[L.jsx(Yd,{className:"h-4 w-4 mr-1.5"}),"Por porcin: $",h.toFixed(2)]})]})]})})}),L.jsxs("div",{className:"p-6 border-b border-gray-100",children:[L.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[L.jsx(k6,{className:"h-5 w-5 mr-2 text-blue-500"}),"Ingredientes"]}),L.jsx("ul",{className:"space-y-3",children:n.items.map((d,p)=>L.jsxs("li",{className:"flex justify-between",children:[L.jsx("div",{className:"flex-1",children:L.jsx("span",{className:"text-gray-900",children:s(d.ingredientId)})}),L.jsxs("div",{className:"text-right",children:[L.jsxs("div",{className:"text-gray-900",children:[d.quantity," ",a(d.ingredientId)]}),L.jsxs("div",{className:"text-sm text-gray-500",children:["$",l(d.ingredientId,d.quantity).toFixed(2)]})]})]},p))})]}),n.instructions&&L.jsxs("div",{className:"p-6",children:[L.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[L.jsx("span",{className:"bg-blue-100 text-blue-600 rounded-full p-1.5 mr-2",children:L.jsx(j6,{className:"h-4 w-4"})}),"Instrucciones"]}),L.jsx("div",{className:"prose prose-sm max-w-none text-gray-600",children:n.instructions.split(`
`).map((d,p)=>L.jsx("p",{className:"mb-3",children:d},p))})]})]})},t3=({children:n,onClose:t})=>L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 transition-opacity",onClick:t,children:L.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md m-4",onClick:e=>e.stopPropagation(),children:n})}),e3=({isOpen:n,onClose:t,title:e,children:s})=>n?L.jsx(t3,{onClose:t,children:L.jsxs("div",{className:"p-6",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e}),L.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Cerrar modal",children:L.jsx($6,{size:24})})]}),s]})}):null,ey=({label:n,id:t,...e})=>{const s=L.jsx("input",{id:t,...e,className:"w-full px-4 py-2 bg-white text-gray-900 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-colors"});return n?L.jsxs("div",{children:[L.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),s]}):s},n3=({label:n,id:t,children:e,...s})=>{const a=L.jsx("select",{id:t,...s,className:"w-full px-4 py-2 bg-white text-gray-900 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-colors",children:e});return n?L.jsxs("div",{children:[L.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a]}):a},Zf=({label:n,children:t})=>L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),t]}),i3=({children:n,...t})=>L.jsx("button",{...t,className:"w-full bg-gray-200 text-gray-800 rounded-lg py-2 px-4 font-bold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-all disabled:opacity-50",children:n}),s3=({isOpen:n,onClose:t,onSave:e,ingredient:s,isSubmitting:a})=>{const[l,u]=Z.useState(""),[h,d]=Z.useState(""),[p,y]=Z.useState(cn.KG),[v,b]=Z.useState("");Z.useEffect(()=>{n&&(s?(u(s.name),d(String(s.pricePerUnit||"")),y(s.unit),b(s.category||"")):(u(""),d(""),y(cn.KG),b("")))},[s,n]);const w=N=>{N.preventDefault(),e({id:s==null?void 0:s.id,name:l,pricePerUnit:parseFloat(h)||0,unit:p,...v&&{category:v}})};return L.jsx(e3,{isOpen:n,onClose:t,title:s!=null&&s.id?"Editar Ingrediente":"Nuevo Ingrediente",children:L.jsxs("form",{onSubmit:w,className:"space-y-6",children:[L.jsxs("div",{className:"space-y-6",children:[L.jsx(Zf,{label:"Nombre del Ingrediente",children:L.jsx(ey,{id:"ing-name",type:"text",value:l,onChange:N=>u(N.target.value),required:!0,placeholder:"Ej: Harina 0000",className:"w-full"})}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsx(Zf,{label:"Precio por Unidad",children:L.jsxs("div",{className:"relative",children:[L.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"$"}),L.jsx(ey,{id:"ing-price",type:"number",step:"0.01",min:"0",value:h,onChange:N=>d(N.target.value),required:!0,placeholder:"0.00",className:"pl-8 w-full"})]})}),L.jsx(Zf,{label:"Unidad",children:L.jsx("div",{className:"relative",children:L.jsx(n3,{id:"ing-unit",value:p,onChange:N=>y(N.target.value),className:"w-full",children:Object.entries(_6).map(([N,k])=>L.jsx("option",{value:N,children:k},N))})})})]}),L.jsx(Zf,{label:"Categora (opcional)",children:L.jsx(ey,{id:"ing-category",type:"text",value:v,onChange:N=>b(N.target.value),placeholder:"Ej: Harinas, Lcteos, etc.",className:"w-full"})})]}),L.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[L.jsx("div",{className:"text-sm text-gray-500",children:s!=null&&s.id?"Actualiza los datos del ingrediente":"Completa los campos requeridos"}),L.jsxs("div",{className:"flex gap-3",children:[L.jsx(i3,{type:"button",onClick:t,className:"px-4 py-2",children:"Cancelar"}),L.jsx(xv,{type:"submit",disabled:a,className:"px-6 py-2",children:a?"Guardando...":"Guardar"})]})]})]})})};let r3={data:""},a3=n=>{if(typeof window=="object"){let t=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(n||document.head).appendChild(t),t.firstChild}return n||r3},o3=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,l3=/\/\*[^]*?\*\/|  +/g,q1=/\n+/g,Dr=(n,t)=>{let e="",s="",a="";for(let l in n){let u=n[l];l[0]=="@"?l[1]=="i"?e=l+" "+u+";":s+=l[1]=="f"?Dr(u,l):l+"{"+Dr(u,l[1]=="k"?"":t)+"}":typeof u=="object"?s+=Dr(u,t?t.replace(/([^,])+/g,h=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,h):h?h+" "+d:d)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Dr.p?Dr.p(l,u):l+":"+u+";")}return e+(t&&a?t+"{"+a+"}":a)+s},ws={},bx=n=>{if(typeof n=="object"){let t="";for(let e in n)t+=e+bx(n[e]);return t}return n},u3=(n,t,e,s,a)=>{let l=bx(n),u=ws[l]||(ws[l]=(d=>{let p=0,y=11;for(;p<d.length;)y=101*y+d.charCodeAt(p++)>>>0;return"go"+y})(l));if(!ws[u]){let d=l!==n?n:(p=>{let y,v,b=[{}];for(;y=o3.exec(p.replace(l3,""));)y[4]?b.shift():y[3]?(v=y[3].replace(q1," ").trim(),b.unshift(b[0][v]=b[0][v]||{})):b[0][y[1]]=y[2].replace(q1," ").trim();return b[0]})(n);ws[u]=Dr(a?{["@keyframes "+u]:d}:d,e?"":"."+u)}let h=e&&ws.g?ws.g:null;return e&&(ws.g=ws[u]),((d,p,y,v)=>{v?p.data=p.data.replace(v,d):p.data.indexOf(d)===-1&&(p.data=y?d+p.data:p.data+d)})(ws[u],t,s,h),u},c3=(n,t,e)=>n.reduce((s,a,l)=>{let u=t[l];if(u&&u.call){let h=u(e),d=h&&h.props&&h.props.className||/^go/.test(h)&&h;u=d?"."+d:h&&typeof h=="object"?h.props?"":Dr(h,""):h===!1?"":h}return s+a+(u??"")},"");function Dm(n){let t=this||{},e=n.call?n(t.p):n;return u3(e.unshift?e.raw?c3(e,[].slice.call(arguments,1),t.p):e.reduce((s,a)=>Object.assign(s,a&&a.call?a(t.p):a),{}):e,a3(t.target),t.g,t.o,t.k)}let Ax,t_,e_;Dm.bind({g:1});let Os=Dm.bind({k:1});function h3(n,t,e,s){Dr.p=t,Ax=n,t_=e,e_=s}function $r(n,t){let e=this||{};return function(){let s=arguments;function a(l,u){let h=Object.assign({},l),d=h.className||a.className;e.p=Object.assign({theme:t_&&t_()},h),e.o=/ *go\d+/.test(d),h.className=Dm.apply(e,s)+(d?" "+d:"");let p=n;return n[0]&&(p=h.as||n,delete h.as),e_&&p[0]&&e_(h),Ax(p,h)}return a}}var f3=n=>typeof n=="function",Xd=(n,t)=>f3(n)?n(t):n,d3=(()=>{let n=0;return()=>(++n).toString()})(),Sx=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");n=!t||t.matches}return n}})(),m3=20,Cv="default",wx=(n,t)=>{let{toastLimit:e}=n.settings;switch(t.type){case 0:return{...n,toasts:[t.toast,...n.toasts].slice(0,e)};case 1:return{...n,toasts:n.toasts.map(u=>u.id===t.toast.id?{...u,...t.toast}:u)};case 2:let{toast:s}=t;return wx(n,{type:n.toasts.find(u=>u.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=t;return{...n,toasts:n.toasts.map(u=>u.id===a||a===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return t.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(u=>u.id!==t.toastId)};case 5:return{...n,pausedAt:t.time};case 6:let l=t.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},Td=[],Ix={toasts:[],pausedAt:void 0,settings:{toastLimit:m3}},Wi={},Rx=(n,t=Cv)=>{Wi[t]=wx(Wi[t]||Ix,n),Td.forEach(([e,s])=>{e===t&&s(Wi[t])})},xx=n=>Object.keys(Wi).forEach(t=>Rx(n,t)),p3=n=>Object.keys(Wi).find(t=>Wi[t].toasts.some(e=>e.id===n)),Vm=(n=Cv)=>t=>{Rx(t,n)},g3={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},y3=(n={},t=Cv)=>{let[e,s]=Z.useState(Wi[t]||Ix),a=Z.useRef(Wi[t]);Z.useEffect(()=>(a.current!==Wi[t]&&s(Wi[t]),Td.push([t,s]),()=>{let u=Td.findIndex(([h])=>h===t);u>-1&&Td.splice(u,1)}),[t]);let l=e.toasts.map(u=>{var h,d,p;return{...n,...n[u.type],...u,removeDelay:u.removeDelay||((h=n[u.type])==null?void 0:h.removeDelay)||(n==null?void 0:n.removeDelay),duration:u.duration||((d=n[u.type])==null?void 0:d.duration)||(n==null?void 0:n.duration)||g3[u.type],style:{...n.style,...(p=n[u.type])==null?void 0:p.style,...u.style}}});return{...e,toasts:l}},_3=(n,t="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...e,id:(e==null?void 0:e.id)||d3()}),uh=n=>(t,e)=>{let s=_3(t,n,e);return Vm(s.toasterId||p3(s.id))({type:2,toast:s}),s.id},ge=(n,t)=>uh("blank")(n,t);ge.error=uh("error");ge.success=uh("success");ge.loading=uh("loading");ge.custom=uh("custom");ge.dismiss=(n,t)=>{let e={type:3,toastId:n};t?Vm(t)(e):xx(e)};ge.dismissAll=n=>ge.dismiss(void 0,n);ge.remove=(n,t)=>{let e={type:4,toastId:n};t?Vm(t)(e):xx(e)};ge.removeAll=n=>ge.remove(void 0,n);ge.promise=(n,t,e)=>{let s=ge.loading(t.loading,{...e,...e==null?void 0:e.loading});return typeof n=="function"&&(n=n()),n.then(a=>{let l=t.success?Xd(t.success,a):void 0;return l?ge.success(l,{id:s,...e,...e==null?void 0:e.success}):ge.dismiss(s),a}).catch(a=>{let l=t.error?Xd(t.error,a):void 0;l?ge.error(l,{id:s,...e,...e==null?void 0:e.error}):ge.dismiss(s)}),n};var v3=1e3,T3=(n,t="default")=>{let{toasts:e,pausedAt:s}=y3(n,t),a=Z.useRef(new Map).current,l=Z.useCallback((v,b=v3)=>{if(a.has(v))return;let w=setTimeout(()=>{a.delete(v),u({type:4,toastId:v})},b);a.set(v,w)},[]);Z.useEffect(()=>{if(s)return;let v=Date.now(),b=e.map(w=>{if(w.duration===1/0)return;let N=(w.duration||0)+w.pauseDuration-(v-w.createdAt);if(N<0){w.visible&&ge.dismiss(w.id);return}return setTimeout(()=>ge.dismiss(w.id,t),N)});return()=>{b.forEach(w=>w&&clearTimeout(w))}},[e,s,t]);let u=Z.useCallback(Vm(t),[t]),h=Z.useCallback(()=>{u({type:5,time:Date.now()})},[u]),d=Z.useCallback((v,b)=>{u({type:1,toast:{id:v,height:b}})},[u]),p=Z.useCallback(()=>{s&&u({type:6,time:Date.now()})},[s,u]),y=Z.useCallback((v,b)=>{let{reverseOrder:w=!1,gutter:N=8,defaultPosition:k}=b||{},z=e.filter(G=>(G.position||k)===(v.position||k)&&G.height),Q=z.findIndex(G=>G.id===v.id),$=z.filter((G,st)=>st<Q&&G.visible).length;return z.filter(G=>G.visible).slice(...w?[$+1]:[0,$]).reduce((G,st)=>G+(st.height||0)+N,0)},[e]);return Z.useEffect(()=>{e.forEach(v=>{if(v.dismissed)l(v.id,v.removeDelay);else{let b=a.get(v.id);b&&(clearTimeout(b),a.delete(v.id))}})},[e,l]),{toasts:e,handlers:{updateHeight:d,startPause:h,endPause:p,calculateOffset:y}}},E3=Os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,b3=Os`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,A3=Os`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,S3=$r("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${E3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${b3} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${A3} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,w3=Os`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,I3=$r("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${w3} 1s linear infinite;
`,R3=Os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,x3=Os`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,C3=$r("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${R3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${x3} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,D3=$r("div")`
  position: absolute;
`,V3=$r("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,N3=Os`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,M3=$r("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${N3} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,P3=({toast:n})=>{let{icon:t,type:e,iconTheme:s}=n;return t!==void 0?typeof t=="string"?Z.createElement(M3,null,t):t:e==="blank"?null:Z.createElement(V3,null,Z.createElement(I3,{...s}),e!=="loading"&&Z.createElement(D3,null,e==="error"?Z.createElement(S3,{...s}):Z.createElement(C3,{...s})))},O3=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,k3=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,L3="0%{opacity:0;} 100%{opacity:1;}",U3="0%{opacity:1;} 100%{opacity:0;}",z3=$r("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,B3=$r("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,j3=(n,t)=>{let e=n.includes("top")?1:-1,[s,a]=Sx()?[L3,U3]:[O3(e),k3(e)];return{animation:t?`${Os(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Os(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},F3=Z.memo(({toast:n,position:t,style:e,children:s})=>{let a=n.height?j3(n.position||t||"top-center",n.visible):{opacity:0},l=Z.createElement(P3,{toast:n}),u=Z.createElement(B3,{...n.ariaProps},Xd(n.message,n));return Z.createElement(z3,{className:n.className,style:{...a,...e,...n.style}},typeof s=="function"?s({icon:l,message:u}):Z.createElement(Z.Fragment,null,l,u))});h3(Z.createElement);var q3=({id:n,className:t,style:e,onHeightUpdate:s,children:a})=>{let l=Z.useCallback(u=>{if(u){let h=()=>{let d=u.getBoundingClientRect().height;s(n,d)};h(),new MutationObserver(h).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return Z.createElement("div",{ref:l,className:t,style:e},a)},H3=(n,t)=>{let e=n.includes("top"),s=e?{top:0}:{bottom:0},a=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Sx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(e?1:-1)}px)`,...s,...a}},G3=Dm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jf=16,K3=({reverseOrder:n,position:t="top-center",toastOptions:e,gutter:s,children:a,toasterId:l,containerStyle:u,containerClassName:h})=>{let{toasts:d,handlers:p}=T3(e,l);return Z.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Jf,left:Jf,right:Jf,bottom:Jf,pointerEvents:"none",...u},className:h,onMouseEnter:p.startPause,onMouseLeave:p.endPause},d.map(y=>{let v=y.position||t,b=p.calculateOffset(y,{reverseOrder:n,gutter:s,defaultPosition:t}),w=H3(v,b);return Z.createElement(q3,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?G3:"",style:w},y.type==="custom"?Xd(y.message,y):a?a(y):Z.createElement(F3,{toast:y,position:v}))}))};const Dv=Z.createContext({});function Vv(n){const t=Z.useRef(null);return t.current===null&&(t.current=n()),t.current}const Nv=typeof window<"u",Cx=Nv?Z.useLayoutEffect:Z.useEffect,Nm=Z.createContext(null);function Mv(n,t){n.indexOf(t)===-1&&n.push(t)}function Pv(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const ks=(n,t,e)=>e>t?t:e<n?n:e;let Ov=()=>{};const Ls={},Dx=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function Vx(n){return typeof n=="object"&&n!==null}const Nx=n=>/^0[^.\s]+$/u.test(n);function kv(n){let t;return()=>(t===void 0&&(t=n()),t)}const li=n=>n,Q3=(n,t)=>e=>t(n(e)),ch=(...n)=>n.reduce(Q3),Hc=(n,t,e)=>{const s=t-n;return s===0?1:(e-n)/s};class Lv{constructor(){this.subscriptions=[]}add(t){return Mv(this.subscriptions,t),()=>Pv(this.subscriptions,t)}notify(t,e,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,s);else for(let l=0;l<a;l++){const u=this.subscriptions[l];u&&u(t,e,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const is=n=>n*1e3,ai=n=>n/1e3;function Mx(n,t){return t?n*(1e3/t):0}const Px=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,Y3=1e-7,X3=12;function $3(n,t,e,s,a){let l,u,h=0;do u=t+(e-t)/2,l=Px(u,s,a)-n,l>0?e=u:t=u;while(Math.abs(l)>Y3&&++h<X3);return u}function hh(n,t,e,s){if(n===t&&e===s)return li;const a=l=>$3(l,0,1,n,e);return l=>l===0||l===1?l:Px(a(l),t,s)}const Ox=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,kx=n=>t=>1-n(1-t),Lx=hh(.33,1.53,.69,.99),Uv=kx(Lx),Ux=Ox(Uv),zx=n=>(n*=2)<1?.5*Uv(n):.5*(2-Math.pow(2,-10*(n-1))),zv=n=>1-Math.sin(Math.acos(n)),Bx=kx(zv),jx=Ox(zv),W3=hh(.42,0,1,1),Z3=hh(0,0,.58,1),Fx=hh(.42,0,.58,1),J3=n=>Array.isArray(n)&&typeof n[0]!="number",qx=n=>Array.isArray(n)&&typeof n[0]=="number",tL={linear:li,easeIn:W3,easeInOut:Fx,easeOut:Z3,circIn:zv,circInOut:jx,circOut:Bx,backIn:Uv,backInOut:Ux,backOut:Lx,anticipate:zx},eL=n=>typeof n=="string",H1=n=>{if(qx(n)){Ov(n.length===4);const[t,e,s,a]=n;return hh(t,e,s,a)}else if(eL(n))return tL[n];return n},td=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function nL(n,t){let e=new Set,s=new Set,a=!1,l=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(y){u.has(y)&&(p.schedule(y),n()),y(h)}const p={schedule:(y,v=!1,b=!1)=>{const N=b&&a?e:s;return v&&u.add(y),N.has(y)||N.add(y),y},cancel:y=>{s.delete(y),u.delete(y)},process:y=>{if(h=y,a){l=!0;return}a=!0,[e,s]=[s,e],e.forEach(d),e.clear(),a=!1,l&&(l=!1,p.process(y))}};return p}const iL=40;function Hx(n,t){let e=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>e=!0,u=td.reduce((G,st)=>(G[st]=nL(l),G),{}),{setup:h,read:d,resolveKeyframes:p,preUpdate:y,update:v,preRender:b,render:w,postRender:N}=u,k=()=>{const G=Ls.useManualTiming?a.timestamp:performance.now();e=!1,Ls.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(G-a.timestamp,iL),1)),a.timestamp=G,a.isProcessing=!0,h.process(a),d.process(a),p.process(a),y.process(a),v.process(a),b.process(a),w.process(a),N.process(a),a.isProcessing=!1,e&&t&&(s=!1,n(k))},z=()=>{e=!0,s=!0,a.isProcessing||n(k)};return{schedule:td.reduce((G,st)=>{const rt=u[st];return G[st]=(lt,R=!1,I=!1)=>(e||z(),rt.schedule(lt,R,I)),G},{}),cancel:G=>{for(let st=0;st<td.length;st++)u[td[st]].cancel(G)},state:a,steps:u}}const{schedule:me,cancel:Gr,state:sn,steps:ny}=Hx(typeof requestAnimationFrame<"u"?requestAnimationFrame:li,!0);let Ed;function sL(){Ed=void 0}const Vn={now:()=>(Ed===void 0&&Vn.set(sn.isProcessing||Ls.useManualTiming?sn.timestamp:performance.now()),Ed),set:n=>{Ed=n,queueMicrotask(sL)}},Gx=n=>t=>typeof t=="string"&&t.startsWith(n),Kx=Gx("--"),rL=Gx("var(--"),Bv=n=>rL(n)?aL.test(n.split("/*")[0].trim()):!1,aL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Gl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Gc={...Gl,transform:n=>ks(0,1,n)},ed={...Gl,default:1},Ac=n=>Math.round(n*1e5)/1e5,jv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oL(n){return n==null}const lL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fv=(n,t)=>e=>!!(typeof e=="string"&&lL.test(e)&&e.startsWith(n)||t&&!oL(e)&&Object.prototype.hasOwnProperty.call(e,t)),Qx=(n,t,e)=>s=>{if(typeof s!="string")return s;const[a,l,u,h]=s.match(jv);return{[n]:parseFloat(a),[t]:parseFloat(l),[e]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},uL=n=>ks(0,255,n),iy={...Gl,transform:n=>Math.round(uL(n))},ja={test:Fv("rgb","red"),parse:Qx("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:s=1})=>"rgba("+iy.transform(n)+", "+iy.transform(t)+", "+iy.transform(e)+", "+Ac(Gc.transform(s))+")"};function cL(n){let t="",e="",s="",a="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),s=n.substring(5,7),a=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),s=n.substring(3,4),a=n.substring(4,5),t+=t,e+=e,s+=s,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const n_={test:Fv("#"),parse:cL,transform:ja.transform},fh=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Sr=fh("deg"),ss=fh("%"),bt=fh("px"),hL=fh("vh"),fL=fh("vw"),G1={...ss,parse:n=>ss.parse(n)/100,transform:n=>ss.transform(n*100)},fl={test:Fv("hsl","hue"),parse:Qx("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:s=1})=>"hsla("+Math.round(n)+", "+ss.transform(Ac(t))+", "+ss.transform(Ac(e))+", "+Ac(Gc.transform(s))+")"},Le={test:n=>ja.test(n)||n_.test(n)||fl.test(n),parse:n=>ja.test(n)?ja.parse(n):fl.test(n)?fl.parse(n):n_.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ja.transform(n):fl.transform(n),getAnimatableNone:n=>{const t=Le.parse(n);return t.alpha=0,Le.transform(t)}},dL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mL(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(jv))==null?void 0:t.length)||0)+(((e=n.match(dL))==null?void 0:e.length)||0)>0}const Yx="number",Xx="color",pL="var",gL="var(",K1="${}",yL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kc(n){const t=n.toString(),e=[],s={color:[],number:[],var:[]},a=[];let l=0;const h=t.replace(yL,d=>(Le.test(d)?(s.color.push(l),a.push(Xx),e.push(Le.parse(d))):d.startsWith(gL)?(s.var.push(l),a.push(pL),e.push(d)):(s.number.push(l),a.push(Yx),e.push(parseFloat(d))),++l,K1)).split(K1);return{values:e,split:h,indexes:s,types:a}}function $x(n){return Kc(n).values}function Wx(n){const{split:t,types:e}=Kc(n),s=t.length;return a=>{let l="";for(let u=0;u<s;u++)if(l+=t[u],a[u]!==void 0){const h=e[u];h===Yx?l+=Ac(a[u]):h===Xx?l+=Le.transform(a[u]):l+=a[u]}return l}}const _L=n=>typeof n=="number"?0:Le.test(n)?Le.getAnimatableNone(n):n;function vL(n){const t=$x(n);return Wx(n)(t.map(_L))}const Kr={test:mL,parse:$x,createTransformer:Wx,getAnimatableNone:vL};function sy(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function TL({hue:n,saturation:t,lightness:e,alpha:s}){n/=360,t/=100,e/=100;let a=0,l=0,u=0;if(!t)a=l=u=e;else{const h=e<.5?e*(1+t):e+t-e*t,d=2*e-h;a=sy(d,h,n+1/3),l=sy(d,h,n),u=sy(d,h,n-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}function $d(n,t){return e=>e>0?t:n}const _e=(n,t,e)=>n+(t-n)*e,ry=(n,t,e)=>{const s=n*n,a=e*(t*t-s)+s;return a<0?0:Math.sqrt(a)},EL=[n_,ja,fl],bL=n=>EL.find(t=>t.test(n));function Q1(n){const t=bL(n);if(!t)return!1;let e=t.parse(n);return t===fl&&(e=TL(e)),e}const Y1=(n,t)=>{const e=Q1(n),s=Q1(t);if(!e||!s)return $d(n,t);const a={...e};return l=>(a.red=ry(e.red,s.red,l),a.green=ry(e.green,s.green,l),a.blue=ry(e.blue,s.blue,l),a.alpha=_e(e.alpha,s.alpha,l),ja.transform(a))},i_=new Set(["none","hidden"]);function AL(n,t){return i_.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function SL(n,t){return e=>_e(n,t,e)}function qv(n){return typeof n=="number"?SL:typeof n=="string"?Bv(n)?$d:Le.test(n)?Y1:RL:Array.isArray(n)?Zx:typeof n=="object"?Le.test(n)?Y1:wL:$d}function Zx(n,t){const e=[...n],s=e.length,a=n.map((l,u)=>qv(l)(l,t[u]));return l=>{for(let u=0;u<s;u++)e[u]=a[u](l);return e}}function wL(n,t){const e={...n,...t},s={};for(const a in e)n[a]!==void 0&&t[a]!==void 0&&(s[a]=qv(n[a])(n[a],t[a]));return a=>{for(const l in s)e[l]=s[l](a);return e}}function IL(n,t){const e=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const l=t.types[a],u=n.indexes[l][s[l]],h=n.values[u]??0;e[a]=h,s[l]++}return e}const RL=(n,t)=>{const e=Kr.createTransformer(t),s=Kc(n),a=Kc(t);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?i_.has(n)&&!a.values.length||i_.has(t)&&!s.values.length?AL(n,t):ch(Zx(IL(s,a),a.values),e):$d(n,t)};function Jx(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?_e(n,t,e):qv(n)(n,t)}const xL=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>me.update(t,e),stop:()=>Gr(t),now:()=>sn.isProcessing?sn.timestamp:Vn.now()}},tC=(n,t,e=10)=>{let s="";const a=Math.max(Math.round(t/e),2);for(let l=0;l<a;l++)s+=Math.round(n(l/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Wd=2e4;function Hv(n){let t=0;const e=50;let s=n.next(t);for(;!s.done&&t<Wd;)t+=e,s=n.next(t);return t>=Wd?1/0:t}function CL(n,t=100,e){const s=e({...n,keyframes:[0,t]}),a=Math.min(Hv(s),Wd);return{type:"keyframes",ease:l=>s.next(a*l).value/t,duration:ai(a)}}const DL=5;function eC(n,t,e){const s=Math.max(t-DL,0);return Mx(e-n(s),t-s)}const Ee={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ay=.001;function VL({duration:n=Ee.duration,bounce:t=Ee.bounce,velocity:e=Ee.velocity,mass:s=Ee.mass}){let a,l,u=1-t;u=ks(Ee.minDamping,Ee.maxDamping,u),n=ks(Ee.minDuration,Ee.maxDuration,ai(n)),u<1?(a=p=>{const y=p*u,v=y*n,b=y-e,w=s_(p,u),N=Math.exp(-v);return ay-b/w*N},l=p=>{const v=p*u*n,b=v*e+e,w=Math.pow(u,2)*Math.pow(p,2)*n,N=Math.exp(-v),k=s_(Math.pow(p,2),u);return(-a(p)+ay>0?-1:1)*((b-w)*N)/k}):(a=p=>{const y=Math.exp(-p*n),v=(p-e)*n+1;return-ay+y*v},l=p=>{const y=Math.exp(-p*n),v=(e-p)*(n*n);return y*v});const h=5/n,d=ML(a,l,h);if(n=is(n),isNaN(d))return{stiffness:Ee.stiffness,damping:Ee.damping,duration:n};{const p=Math.pow(d,2)*s;return{stiffness:p,damping:u*2*Math.sqrt(s*p),duration:n}}}const NL=12;function ML(n,t,e){let s=e;for(let a=1;a<NL;a++)s=s-n(s)/t(s);return s}function s_(n,t){return n*Math.sqrt(1-t*t)}const PL=["duration","bounce"],OL=["stiffness","damping","mass"];function X1(n,t){return t.some(e=>n[e]!==void 0)}function kL(n){let t={velocity:Ee.velocity,stiffness:Ee.stiffness,damping:Ee.damping,mass:Ee.mass,isResolvedFromDuration:!1,...n};if(!X1(n,OL)&&X1(n,PL))if(n.visualDuration){const e=n.visualDuration,s=2*Math.PI/(e*1.2),a=s*s,l=2*ks(.05,1,1-(n.bounce||0))*Math.sqrt(a);t={...t,mass:Ee.mass,stiffness:a,damping:l}}else{const e=VL(n);t={...t,...e,mass:Ee.mass},t.isResolvedFromDuration=!0}return t}function Zd(n=Ee.visualDuration,t=Ee.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:s,restDelta:a}=e;const l=e.keyframes[0],u=e.keyframes[e.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:p,mass:y,duration:v,velocity:b,isResolvedFromDuration:w}=kL({...e,velocity:-ai(e.velocity||0)}),N=b||0,k=p/(2*Math.sqrt(d*y)),z=u-l,Q=ai(Math.sqrt(d/y)),$=Math.abs(z)<5;s||(s=$?Ee.restSpeed.granular:Ee.restSpeed.default),a||(a=$?Ee.restDelta.granular:Ee.restDelta.default);let G;if(k<1){const rt=s_(Q,k);G=lt=>{const R=Math.exp(-k*Q*lt);return u-R*((N+k*Q*z)/rt*Math.sin(rt*lt)+z*Math.cos(rt*lt))}}else if(k===1)G=rt=>u-Math.exp(-Q*rt)*(z+(N+Q*z)*rt);else{const rt=Q*Math.sqrt(k*k-1);G=lt=>{const R=Math.exp(-k*Q*lt),I=Math.min(rt*lt,300);return u-R*((N+k*Q*z)*Math.sinh(I)+rt*z*Math.cosh(I))/rt}}const st={calculatedDuration:w&&v||null,next:rt=>{const lt=G(rt);if(w)h.done=rt>=v;else{let R=rt===0?N:0;k<1&&(R=rt===0?is(N):eC(G,rt,lt));const I=Math.abs(R)<=s,C=Math.abs(u-lt)<=a;h.done=I&&C}return h.value=h.done?u:lt,h},toString:()=>{const rt=Math.min(Hv(st),Wd),lt=tC(R=>st.next(rt*R).value,rt,30);return rt+"ms "+lt},toTransition:()=>{}};return st}Zd.applyToOptions=n=>{const t=CL(n,100,Zd);return n.ease=t.ease,n.duration=is(t.duration),n.type="keyframes",n};function r_({keyframes:n,velocity:t=0,power:e=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:u,min:h,max:d,restDelta:p=.5,restSpeed:y}){const v=n[0],b={done:!1,value:v},w=I=>h!==void 0&&I<h||d!==void 0&&I>d,N=I=>h===void 0?d:d===void 0||Math.abs(h-I)<Math.abs(d-I)?h:d;let k=e*t;const z=v+k,Q=u===void 0?z:u(z);Q!==z&&(k=Q-v);const $=I=>-k*Math.exp(-I/s),G=I=>Q+$(I),st=I=>{const C=$(I),M=G(I);b.done=Math.abs(C)<=p,b.value=b.done?Q:M};let rt,lt;const R=I=>{w(b.value)&&(rt=I,lt=Zd({keyframes:[b.value,N(b.value)],velocity:eC(G,I,b.value),damping:a,stiffness:l,restDelta:p,restSpeed:y}))};return R(0),{calculatedDuration:null,next:I=>{let C=!1;return!lt&&rt===void 0&&(C=!0,st(I),R(I)),rt!==void 0&&I>=rt?lt.next(I-rt):(!C&&st(I),b)}}}function LL(n,t,e){const s=[],a=e||Ls.mix||Jx,l=n.length-1;for(let u=0;u<l;u++){let h=a(n[u],n[u+1]);if(t){const d=Array.isArray(t)?t[u]||li:t;h=ch(d,h)}s.push(h)}return s}function UL(n,t,{clamp:e=!0,ease:s,mixer:a}={}){const l=n.length;if(Ov(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const u=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),t=[...t].reverse());const h=LL(t,s,a),d=h.length,p=y=>{if(u&&y<n[0])return t[0];let v=0;if(d>1)for(;v<n.length-2&&!(y<n[v+1]);v++);const b=Hc(n[v],n[v+1],y);return h[v](b)};return e?y=>p(ks(n[0],n[l-1],y)):p}function zL(n,t){const e=n[n.length-1];for(let s=1;s<=t;s++){const a=Hc(0,t,s);n.push(_e(e,1,a))}}function BL(n){const t=[0];return zL(t,n.length-1),t}function jL(n,t){return n.map(e=>e*t)}function FL(n,t){return n.map(()=>t||Fx).splice(0,n.length-1)}function Sc({duration:n=300,keyframes:t,times:e,ease:s="easeInOut"}){const a=J3(s)?s.map(H1):H1(s),l={done:!1,value:t[0]},u=jL(e&&e.length===t.length?e:BL(t),n),h=UL(u,t,{ease:Array.isArray(a)?a:FL(t,a)});return{calculatedDuration:n,next:d=>(l.value=h(d),l.done=d>=n,l)}}const qL=n=>n!==null;function Gv(n,{repeat:t,repeatType:e="loop"},s,a=1){const l=n.filter(qL),h=a<0||t&&e!=="loop"&&t%2===1?0:l.length-1;return!h||s===void 0?l[h]:s}const HL={decay:r_,inertia:r_,tween:Sc,keyframes:Sc,spring:Zd};function nC(n){typeof n.type=="string"&&(n.type=HL[n.type])}class Kv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const GL=n=>n/100;class Qv extends Kv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,a;const{motionValue:e}=this.options;e&&e.updatedAt!==Vn.now()&&this.tick(Vn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(s=this.options).onStop)==null||a.call(s))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;nC(t);const{type:e=Sc,repeat:s=0,repeatDelay:a=0,repeatType:l,velocity:u=0}=t;let{keyframes:h}=t;const d=e||Sc;d!==Sc&&typeof h[0]!="number"&&(this.mixKeyframes=ch(GL,Jx(h[0],h[1])),h=[0,100]);const p=d({...t,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...h].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=Hv(p));const{calculatedDuration:y}=p;this.calculatedDuration=y,this.resolvedDuration=y+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=p}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:s,totalDuration:a,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:p=0,keyframes:y,repeat:v,repeatType:b,repeatDelay:w,type:N,onUpdate:k,finalKeyframe:z}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const Q=this.currentTime-p*(this.playbackSpeed>=0?1:-1),$=this.playbackSpeed>=0?Q<0:Q>a;this.currentTime=Math.max(Q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let G=this.currentTime,st=s;if(v){const I=Math.min(this.currentTime,a)/h;let C=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&C--,C=Math.min(C,v+1),!!(C%2)&&(b==="reverse"?(M=1-M,w&&(M-=w/h)):b==="mirror"&&(st=u)),G=ks(0,1,M)*h}const rt=$?{done:!1,value:y[0]}:st.next(G);l&&(rt.value=l(rt.value));let{done:lt}=rt;!$&&d!==null&&(lt=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&lt);return R&&N!==r_&&(rt.value=Gv(y,this.options,z,this.speed)),k&&k(rt.value),R&&this.finish(),rt}then(t,e){return this.finished.then(t,e)}get duration(){return ai(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ai(t)}get time(){return ai(this.currentTime)}set time(t){var e;t=is(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Vn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ai(this.currentTime))}play(){var a,l;if(this.isStopped)return;const{driver:t=xL,startTime:e}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),(l=(a=this.options).onPlay)==null||l.call(a);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=e??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function KL(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const Fa=n=>n*180/Math.PI,a_=n=>{const t=Fa(Math.atan2(n[1],n[0]));return o_(t)},QL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:a_,rotateZ:a_,skewX:n=>Fa(Math.atan(n[1])),skewY:n=>Fa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},o_=n=>(n=n%360,n<0&&(n+=360),n),$1=a_,W1=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Z1=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),YL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:W1,scaleY:Z1,scale:n=>(W1(n)+Z1(n))/2,rotateX:n=>o_(Fa(Math.atan2(n[6],n[5]))),rotateY:n=>o_(Fa(Math.atan2(-n[2],n[0]))),rotateZ:$1,rotate:$1,skewX:n=>Fa(Math.atan(n[4])),skewY:n=>Fa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function l_(n){return n.includes("scale")?1:0}function u_(n,t){if(!n||n==="none")return l_(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(e)s=YL,a=e;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=QL,a=h}if(!a)return l_(t);const l=s[t],u=a[1].split(",").map($L);return typeof l=="function"?l(u):u[l]}const XL=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return u_(e,t)};function $L(n){return parseFloat(n.trim())}const Kl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ql=new Set(Kl),J1=n=>n===Gl||n===bt,WL=new Set(["x","y","z"]),ZL=Kl.filter(n=>!WL.has(n));function JL(n){const t=[];return ZL.forEach(e=>{const s=n.getValue(e);s!==void 0&&(t.push([e,s.get()]),s.set(e.startsWith("scale")?1:0))}),t}const Ya={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>u_(t,"x"),y:(n,{transform:t})=>u_(t,"y")};Ya.translateX=Ya.x;Ya.translateY=Ya.y;const Xa=new Set;let c_=!1,h_=!1,f_=!1;function iC(){if(h_){const n=Array.from(Xa).filter(s=>s.needsMeasurement),t=new Set(n.map(s=>s.element)),e=new Map;t.forEach(s=>{const a=JL(s);a.length&&(e.set(s,a),s.render())}),n.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const a=e.get(s);a&&a.forEach(([l,u])=>{var h;(h=s.getValue(l))==null||h.set(u)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}h_=!1,c_=!1,Xa.forEach(n=>n.complete(f_)),Xa.clear()}function sC(){Xa.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(h_=!0)})}function t5(){f_=!0,sC(),iC(),f_=!1}class Yv{constructor(t,e,s,a,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=s,this.motionValue=a,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Xa.add(this),c_||(c_=!0,me.read(sC),me.resolveKeyframes(iC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:s,motionValue:a}=this;if(t[0]===null){const l=a==null?void 0:a.get(),u=t[t.length-1];if(l!==void 0)t[0]=l;else if(s&&e){const h=s.readValue(e,u);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=u),a&&l===void 0&&a.set(t[0])}KL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Xa.delete(this)}cancel(){this.state==="scheduled"&&(Xa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const e5=n=>n.startsWith("--");function n5(n,t,e){e5(t)?n.style.setProperty(t,e):n.style[t]=e}const i5=kv(()=>window.ScrollTimeline!==void 0),s5={};function r5(n,t){const e=kv(n);return()=>s5[t]??e()}const rC=r5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hc=([n,t,e,s])=>`cubic-bezier(${n}, ${t}, ${e}, ${s})`,tS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hc([0,.65,.55,1]),circOut:hc([.55,0,1,.45]),backIn:hc([.31,.01,.66,-.59]),backOut:hc([.33,1.53,.69,.99])};function aC(n,t){if(n)return typeof n=="function"?rC()?tC(n,t):"ease-out":qx(n)?hc(n):Array.isArray(n)?n.map(e=>aC(e,t)||tS.easeOut):tS[n]}function a5(n,t,e,{delay:s=0,duration:a=300,repeat:l=0,repeatType:u="loop",ease:h="easeOut",times:d}={},p=void 0){const y={[t]:e};d&&(y.offset=d);const v=aC(h,a);Array.isArray(v)&&(y.easing=v);const b={delay:s,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return p&&(b.pseudoElement=p),n.animate(y,b)}function oC(n){return typeof n=="function"&&"applyToOptions"in n}function o5({type:n,...t}){return oC(n)&&rC()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class l5 extends Kv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:s,keyframes:a,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:h,onComplete:d}=t;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=t,Ov(typeof t.type!="string");const p=o5(t);this.animation=a5(e,s,a,p,l),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const y=Gv(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):n5(e,s,y),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,s;const t=((s=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:s.call(e).duration)||0;return ai(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ai(t)}get time(){return ai(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=is(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&i5()?(this.animation.timeline=t,li):e(this)}}const lC={anticipate:zx,backInOut:Ux,circInOut:jx};function u5(n){return n in lC}function c5(n){typeof n.ease=="string"&&u5(n.ease)&&(n.ease=lC[n.ease])}const eS=10;class h5 extends l5{constructor(t){c5(t),nC(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:s,onComplete:a,element:l,...u}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const h=new Qv({...u,autoplay:!1}),d=is(this.finishedTime??this.time);e.setWithVelocity(h.sample(d-eS).value,h.sample(d).value,eS),h.stop()}}const nS=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Kr.test(n)||n==="0")&&!n.startsWith("url("));function f5(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function d5(n,t,e,s){const a=n[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const l=n[n.length-1],u=nS(a,t),h=nS(l,t);return!u||!h?!1:f5(n)||(e==="spring"||oC(e))&&s}function d_(n){n.duration=0,n.type="keyframes"}const m5=new Set(["opacity","clipPath","filter","transform"]),p5=kv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function g5(n){var y;const{motionValue:t,name:e,repeatDelay:s,repeatType:a,damping:l,type:u}=n;if(!(((y=t==null?void 0:t.owner)==null?void 0:y.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=t.owner.getProps();return p5()&&e&&m5.has(e)&&(e!=="transform"||!p)&&!d&&!s&&a!=="mirror"&&l!==0&&u!=="inertia"}const y5=40;class _5 extends Kv{constructor({autoplay:t=!0,delay:e=0,type:s="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:u="loop",keyframes:h,name:d,motionValue:p,element:y,...v}){var N;super(),this.stop=()=>{var k,z;this._animation&&(this._animation.stop(),(k=this.stopTimeline)==null||k.call(this)),(z=this.keyframeResolver)==null||z.cancel()},this.createdAt=Vn.now();const b={autoplay:t,delay:e,type:s,repeat:a,repeatDelay:l,repeatType:u,name:d,motionValue:p,element:y,...v},w=(y==null?void 0:y.KeyframeResolver)||Yv;this.keyframeResolver=new w(h,(k,z,Q)=>this.onKeyframesResolved(k,z,b,!Q),d,p,y),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(t,e,s,a){this.keyframeResolver=void 0;const{name:l,type:u,velocity:h,delay:d,isHandoff:p,onUpdate:y}=s;this.resolvedAt=Vn.now(),d5(t,l,u,h)||((Ls.instantAnimations||!d)&&(y==null||y(Gv(t,s,e))),t[0]=t[t.length-1],d_(s),s.repeat=0);const b={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>y5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...s,keyframes:t},w=!p&&g5(b)?new h5({...b,element:b.motionValue.owner.current}):new Qv(b);w.finished.then(()=>this.notifyFinished()).catch(li),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),t5()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const v5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function T5(n){const t=v5.exec(n);if(!t)return[,];const[,e,s,a]=t;return[`--${e??s}`,a]}function uC(n,t,e=1){const[s,a]=T5(n);if(!s)return;const l=window.getComputedStyle(t).getPropertyValue(s);if(l){const u=l.trim();return Dx(u)?parseFloat(u):u}return Bv(a)?uC(a,t,e+1):a}function Xv(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const cC=new Set(["width","height","top","left","right","bottom",...Kl]),E5={test:n=>n==="auto",parse:n=>n},hC=n=>t=>t.test(n),fC=[Gl,bt,ss,Sr,fL,hL,E5],iS=n=>fC.find(hC(n));function b5(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Nx(n):!0}const A5=new Set(["brightness","contrast","saturate","opacity"]);function S5(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[s]=e.match(jv)||[];if(!s)return n;const a=e.replace(s,"");let l=A5.has(t)?1:0;return s!==e&&(l*=100),t+"("+l+a+")"}const w5=/\b([a-z-]*)\(.*?\)/gu,m_={...Kr,getAnimatableNone:n=>{const t=n.match(w5);return t?t.map(S5).join(" "):n}},sS={...Gl,transform:Math.round},I5={rotate:Sr,rotateX:Sr,rotateY:Sr,rotateZ:Sr,scale:ed,scaleX:ed,scaleY:ed,scaleZ:ed,skew:Sr,skewX:Sr,skewY:Sr,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Gc,originX:G1,originY:G1,originZ:bt},$v={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...I5,zIndex:sS,fillOpacity:Gc,strokeOpacity:Gc,numOctaves:sS},R5={...$v,color:Le,backgroundColor:Le,outlineColor:Le,fill:Le,stroke:Le,borderColor:Le,borderTopColor:Le,borderRightColor:Le,borderBottomColor:Le,borderLeftColor:Le,filter:m_,WebkitFilter:m_},dC=n=>R5[n];function mC(n,t){let e=dC(n);return e!==m_&&(e=Kr),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const x5=new Set(["auto","none","0"]);function C5(n,t,e){let s=0,a;for(;s<n.length&&!a;){const l=n[s];typeof l=="string"&&!x5.has(l)&&Kc(l).values.length&&(a=n[s]),s++}if(a&&e)for(const l of t)n[l]=mC(e,a)}class D5 extends Yv{constructor(t,e,s,a,l){super(t,e,s,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:s}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let p=t[d];if(typeof p=="string"&&(p=p.trim(),Bv(p))){const y=uC(p,e.current);y!==void 0&&(t[d]=y),d===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!cC.has(s)||t.length!==2)return;const[a,l]=t,u=iS(a),h=iS(l);if(u!==h)if(J1(u)&&J1(h))for(let d=0;d<t.length;d++){const p=t[d];typeof p=="string"&&(t[d]=parseFloat(p))}else Ya[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,s=[];for(let a=0;a<t.length;a++)(t[a]===null||b5(t[a]))&&s.push(a);s.length&&C5(t,s,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ya[s](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(s,a).jump(a,!1)}measureEndState(){var h;const{element:t,name:e,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const a=t.getValue(e);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=Ya[e](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([d,p])=>{t.getValue(d).set(p)}),this.resolveNoneKeyframes()}}function V5(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const a=(e==null?void 0:e[n])??s.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}const pC=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function gC(n){return Vx(n)&&"offsetHeight"in n}const rS=30,N5=n=>!isNaN(parseFloat(n));class M5{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var l;const a=Vn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Vn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=N5(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Lv);const s=this.events[t].add(e);return t==="change"?()=>{s(),me.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,s){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Vn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>rS)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,rS);return Mx(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ll(n,t){return new M5(n,t)}const{schedule:Wv}=Hx(queueMicrotask,!1),bi={x:!1,y:!1};function yC(){return bi.x||bi.y}function P5(n){return n==="x"||n==="y"?bi[n]?null:(bi[n]=!0,()=>{bi[n]=!1}):bi.x||bi.y?null:(bi.x=bi.y=!0,()=>{bi.x=bi.y=!1})}function _C(n,t){const e=V5(n),s=new AbortController,a={passive:!0,...t,signal:s.signal};return[e,a,()=>s.abort()]}function aS(n){return!(n.pointerType==="touch"||yC())}function O5(n,t,e={}){const[s,a,l]=_C(n,e),u=h=>{if(!aS(h))return;const{target:d}=h,p=t(d,h);if(typeof p!="function"||!d)return;const y=v=>{aS(v)&&(p(v),d.removeEventListener("pointerleave",y))};d.addEventListener("pointerleave",y,a)};return s.forEach(h=>{h.addEventListener("pointerenter",u,a)}),l}const vC=(n,t)=>t?n===t?!0:vC(n,t.parentElement):!1,Zv=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,k5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function L5(n){return k5.has(n.tagName)||n.tabIndex!==-1}const bd=new WeakSet;function oS(n){return t=>{t.key==="Enter"&&n(t)}}function oy(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const U5=(n,t)=>{const e=n.currentTarget;if(!e)return;const s=oS(()=>{if(bd.has(e))return;oy(e,"down");const a=oS(()=>{oy(e,"up")}),l=()=>oy(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",l,t)});e.addEventListener("keydown",s,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",s),t)};function lS(n){return Zv(n)&&!yC()}function z5(n,t,e={}){const[s,a,l]=_C(n,e),u=h=>{const d=h.currentTarget;if(!lS(h))return;bd.add(d);const p=t(d,h),y=(w,N)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",b),bd.has(d)&&bd.delete(d),lS(w)&&typeof p=="function"&&p(w,{success:N})},v=w=>{y(w,d===window||d===document||e.useGlobalTarget||vC(d,w.target))},b=w=>{y(w,!1)};window.addEventListener("pointerup",v,a),window.addEventListener("pointercancel",b,a)};return s.forEach(h=>{(e.useGlobalTarget?window:h).addEventListener("pointerdown",u,a),gC(h)&&(h.addEventListener("focus",p=>U5(p,a)),!L5(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function TC(n){return Vx(n)&&"ownerSVGElement"in n}function B5(n){return TC(n)&&n.tagName==="svg"}const dn=n=>!!(n&&n.getVelocity),j5=[...fC,Le,Kr],F5=n=>j5.find(hC(n)),Jv=Z.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function uS(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function q5(...n){return t=>{let e=!1;const s=n.map(a=>{const l=uS(a,t);return!e&&typeof l=="function"&&(e=!0),l});if(e)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():uS(n[a],null)}}}}function H5(...n){return Z.useCallback(q5(...n),n)}class G5 extends Z.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const s=e.offsetParent,a=gC(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=e.offsetHeight||0,l.width=e.offsetWidth||0,l.top=e.offsetTop,l.left=e.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K5({children:n,isPresent:t,anchorX:e,root:s}){const a=Z.useId(),l=Z.useRef(null),u=Z.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=Z.useContext(Jv),d=H5(l,n==null?void 0:n.ref);return Z.useInsertionEffect(()=>{const{width:p,height:y,top:v,left:b,right:w}=u.current;if(t||!l.current||!p||!y)return;const N=e==="left"?`left: ${b}`:`right: ${w}`;l.current.dataset.motionPopId=a;const k=document.createElement("style");h&&(k.nonce=h);const z=s??document.head;return z.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${y}px !important;
            ${N}px !important;
            top: ${v}px !important;
          }
        `),()=>{z.contains(k)&&z.removeChild(k)}},[t]),L.jsx(G5,{isPresent:t,childRef:l,sizeRef:u,children:Z.cloneElement(n,{ref:d})})}const Q5=({children:n,initial:t,isPresent:e,onExitComplete:s,custom:a,presenceAffectsLayout:l,mode:u,anchorX:h,root:d})=>{const p=Vv(Y5),y=Z.useId();let v=!0,b=Z.useMemo(()=>(v=!1,{id:y,initial:t,isPresent:e,custom:a,onExitComplete:w=>{p.set(w,!0);for(const N of p.values())if(!N)return;s&&s()},register:w=>(p.set(w,!1),()=>p.delete(w))}),[e,p,s]);return l&&v&&(b={...b}),Z.useMemo(()=>{p.forEach((w,N)=>p.set(N,!1))},[e]),Z.useEffect(()=>{!e&&!p.size&&s&&s()},[e]),u==="popLayout"&&(n=L.jsx(K5,{isPresent:e,anchorX:h,root:d,children:n})),L.jsx(Nm.Provider,{value:b,children:n})};function Y5(){return new Map}function EC(n=!0){const t=Z.useContext(Nm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:s,register:a}=t,l=Z.useId();Z.useEffect(()=>{if(n)return a(l)},[n]);const u=Z.useCallback(()=>n&&s&&s(l),[l,s,n]);return!e&&s?[!1,u]:[!0]}const nd=n=>n.key||"";function cS(n){const t=[];return Z.Children.forEach(n,e=>{Z.isValidElement(e)&&t.push(e)}),t}const hS=({children:n,custom:t,initial:e=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:l="sync",propagate:u=!1,anchorX:h="left",root:d})=>{const[p,y]=EC(u),v=Z.useMemo(()=>cS(n),[n]),b=u&&!p?[]:v.map(nd),w=Z.useRef(!0),N=Z.useRef(v),k=Vv(()=>new Map),[z,Q]=Z.useState(v),[$,G]=Z.useState(v);Cx(()=>{w.current=!1,N.current=v;for(let lt=0;lt<$.length;lt++){const R=nd($[lt]);b.includes(R)?k.delete(R):k.get(R)!==!0&&k.set(R,!1)}},[$,b.length,b.join("-")]);const st=[];if(v!==z){let lt=[...v];for(let R=0;R<$.length;R++){const I=$[R],C=nd(I);b.includes(C)||(lt.splice(R,0,I),st.push(I))}return l==="wait"&&st.length&&(lt=st),G(cS(lt)),Q(v),null}const{forceRender:rt}=Z.useContext(Dv);return L.jsx(L.Fragment,{children:$.map(lt=>{const R=nd(lt),I=u&&!p?!1:v===$||b.includes(R),C=()=>{if(k.has(R))k.set(R,!0);else return;let M=!0;k.forEach(V=>{V||(M=!1)}),M&&(rt==null||rt(),G(N.current),u&&(y==null||y()),s&&s())};return L.jsx(Q5,{isPresent:I,initial:!w.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:l,root:d,onExitComplete:I?void 0:C,anchorX:h,children:lt},R)})})},bC=Z.createContext({strict:!1}),fS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ul={};for(const n in fS)Ul[n]={isEnabled:t=>fS[n].some(e=>!!t[e])};function X5(n){for(const t in n)Ul[t]={...Ul[t],...n[t]}}const $5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jd(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||$5.has(n)}let AC=n=>!Jd(n);function W5(n){typeof n=="function"&&(AC=t=>t.startsWith("on")?!Jd(t):n(t))}try{W5(require("@emotion/is-prop-valid").default)}catch{}function Z5(n,t,e){const s={};for(const a in n)a==="values"&&typeof n.values=="object"||(AC(a)||e===!0&&Jd(a)||!t&&!Jd(a)||n.draggable&&a.startsWith("onDrag"))&&(s[a]=n[a]);return s}const Mm=Z.createContext({});function Pm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Qc(n){return typeof n=="string"||Array.isArray(n)}const t0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],e0=["initial",...t0];function Om(n){return Pm(n.animate)||e0.some(t=>Qc(n[t]))}function SC(n){return!!(Om(n)||n.variants)}function J5(n,t){if(Om(n)){const{initial:e,animate:s}=n;return{initial:e===!1||Qc(e)?e:void 0,animate:Qc(s)?s:void 0}}return n.inherit!==!1?t:{}}function tU(n){const{initial:t,animate:e}=J5(n,Z.useContext(Mm));return Z.useMemo(()=>({initial:t,animate:e}),[dS(t),dS(e)])}function dS(n){return Array.isArray(n)?n.join(" "):n}function mS(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const rc={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(bt.test(n))n=parseFloat(n);else return n;const e=mS(n,t.target.x),s=mS(n,t.target.y);return`${e}% ${s}%`}},eU={correct:(n,{treeScale:t,projectionDelta:e})=>{const s=n,a=Kr.parse(n);if(a.length>5)return s;const l=Kr.createTransformer(n),u=typeof a[0]!="number"?1:0,h=e.x.scale*t.x,d=e.y.scale*t.y;a[0+u]/=h,a[1+u]/=d;const p=_e(h,d,.5);return typeof a[2+u]=="number"&&(a[2+u]/=p),typeof a[3+u]=="number"&&(a[3+u]/=p),l(a)}},p_={borderRadius:{...rc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rc,borderTopRightRadius:rc,borderBottomLeftRadius:rc,borderBottomRightRadius:rc,boxShadow:eU};function wC(n,{layout:t,layoutId:e}){return Ql.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!p_[n]||n==="opacity")}const nU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iU=Kl.length;function sU(n,t,e){let s="",a=!0;for(let l=0;l<iU;l++){const u=Kl[l],h=n[u];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(u.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||e){const p=pC(h,$v[u]);if(!d){a=!1;const y=nU[u]||u;s+=`${y}(${p}) `}e&&(t[u]=p)}}return s=s.trim(),e?s=e(t,a?"":s):a&&(s="none"),s}function n0(n,t,e){const{style:s,vars:a,transformOrigin:l}=n;let u=!1,h=!1;for(const d in t){const p=t[d];if(Ql.has(d)){u=!0;continue}else if(Kx(d)){a[d]=p;continue}else{const y=pC(p,$v[d]);d.startsWith("origin")?(h=!0,l[d]=y):s[d]=y}}if(t.transform||(u||e?s.transform=sU(t,n.transform,e):s.transform&&(s.transform="none")),h){const{originX:d="50%",originY:p="50%",originZ:y=0}=l;s.transformOrigin=`${d} ${p} ${y}`}}const i0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function IC(n,t,e){for(const s in t)!dn(t[s])&&!wC(s,e)&&(n[s]=t[s])}function rU({transformTemplate:n},t){return Z.useMemo(()=>{const e=i0();return n0(e,t,n),Object.assign({},e.vars,e.style)},[t])}function aU(n,t){const e=n.style||{},s={};return IC(s,e,n),Object.assign(s,rU(n,t)),s}function oU(n,t){const e={},s=aU(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=s,e}const lU={offset:"stroke-dashoffset",array:"stroke-dasharray"},uU={offset:"strokeDashoffset",array:"strokeDasharray"};function cU(n,t,e=1,s=0,a=!0){n.pathLength=1;const l=a?lU:uU;n[l.offset]=bt.transform(-s);const u=bt.transform(t),h=bt.transform(e);n[l.array]=`${u} ${h}`}function RC(n,{attrX:t,attrY:e,attrScale:s,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...h},d,p,y){if(n0(n,h,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:b}=n;v.transform&&(b.transform=v.transform,delete v.transform),(b.transform||v.transformOrigin)&&(b.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),b.transform&&(b.transformBox=(y==null?void 0:y.transformBox)??"fill-box",delete v.transformBox),t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),s!==void 0&&(v.scale=s),a!==void 0&&cU(v,a,l,u,!1)}const xC=()=>({...i0(),attrs:{}}),CC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function hU(n,t,e,s){const a=Z.useMemo(()=>{const l=xC();return RC(l,t,CC(s),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[t]);if(n.style){const l={};IC(l,n.style,n),a.style={...l,...a.style}}return a}const fU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function s0(n){return typeof n!="string"||n.includes("-")?!1:!!(fU.indexOf(n)>-1||/[A-Z]/u.test(n))}function dU(n,t,e,{latestValues:s},a,l=!1){const h=(s0(n)?hU:oU)(t,s,a,n),d=Z5(t,typeof n=="string",l),p=n!==Z.Fragment?{...d,...h,ref:e}:{},{children:y}=t,v=Z.useMemo(()=>dn(y)?y.get():y,[y]);return Z.createElement(n,{...p,children:v})}function pS(n){const t=[{},{}];return n==null||n.values.forEach((e,s)=>{t[0][s]=e.get(),t[1][s]=e.getVelocity()}),t}function r0(n,t,e,s){if(typeof t=="function"){const[a,l]=pS(s);t=t(e!==void 0?e:n.custom,a,l)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[a,l]=pS(s);t=t(e!==void 0?e:n.custom,a,l)}return t}function Ad(n){return dn(n)?n.get():n}function mU({scrapeMotionValuesFromProps:n,createRenderState:t},e,s,a){return{latestValues:pU(e,s,a,n),renderState:t()}}function pU(n,t,e,s){const a={},l=s(n,{});for(const b in l)a[b]=Ad(l[b]);let{initial:u,animate:h}=n;const d=Om(n),p=SC(n);t&&p&&!d&&n.inherit!==!1&&(u===void 0&&(u=t.initial),h===void 0&&(h=t.animate));let y=e?e.initial===!1:!1;y=y||u===!1;const v=y?h:u;if(v&&typeof v!="boolean"&&!Pm(v)){const b=Array.isArray(v)?v:[v];for(let w=0;w<b.length;w++){const N=r0(n,b[w]);if(N){const{transitionEnd:k,transition:z,...Q}=N;for(const $ in Q){let G=Q[$];if(Array.isArray(G)){const st=y?G.length-1:0;G=G[st]}G!==null&&(a[$]=G)}for(const $ in k)a[$]=k[$]}}}return a}const DC=n=>(t,e)=>{const s=Z.useContext(Mm),a=Z.useContext(Nm),l=()=>mU(n,t,s,a);return e?l():Vv(l)};function a0(n,t,e){var l;const{style:s}=n,a={};for(const u in s)(dn(s[u])||t.style&&dn(t.style[u])||wC(u,n)||((l=e==null?void 0:e.getValue(u))==null?void 0:l.liveStyle)!==void 0)&&(a[u]=s[u]);return a}const gU=DC({scrapeMotionValuesFromProps:a0,createRenderState:i0});function VC(n,t,e){const s=a0(n,t,e);for(const a in n)if(dn(n[a])||dn(t[a])){const l=Kl.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[l]=n[a]}return s}const yU=DC({scrapeMotionValuesFromProps:VC,createRenderState:xC}),_U=Symbol.for("motionComponentSymbol");function dl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function vU(n,t,e){return Z.useCallback(s=>{s&&n.onMount&&n.onMount(s),t&&(s?t.mount(s):t.unmount()),e&&(typeof e=="function"?e(s):dl(e)&&(e.current=s))},[t])}const o0=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),TU="framerAppearId",NC="data-"+o0(TU),MC=Z.createContext({});function EU(n,t,e,s,a){var k,z;const{visualElement:l}=Z.useContext(Mm),u=Z.useContext(bC),h=Z.useContext(Nm),d=Z.useContext(Jv).reducedMotion,p=Z.useRef(null);s=s||u.renderer,!p.current&&s&&(p.current=s(n,{visualState:t,parent:l,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const y=p.current,v=Z.useContext(MC);y&&!y.projection&&a&&(y.type==="html"||y.type==="svg")&&bU(p.current,e,a,v);const b=Z.useRef(!1);Z.useInsertionEffect(()=>{y&&b.current&&y.update(e,h)});const w=e[NC],N=Z.useRef(!!w&&!((k=window.MotionHandoffIsComplete)!=null&&k.call(window,w))&&((z=window.MotionHasOptimisedAnimation)==null?void 0:z.call(window,w)));return Cx(()=>{y&&(b.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),N.current&&y.animationState&&y.animationState.animateChanges())}),Z.useEffect(()=>{y&&(!N.current&&y.animationState&&y.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var Q;(Q=window.MotionHandoffMarkAsComplete)==null||Q.call(window,w)}),N.current=!1),y.enteringChildren=void 0)}),y}function bU(n,t,e,s){const{layoutId:a,layout:l,drag:u,dragConstraints:h,layoutScroll:d,layoutRoot:p,layoutCrossfade:y}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:PC(n.parent)),n.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!u||h&&dl(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:y,layoutScroll:d,layoutRoot:p})}function PC(n){if(n)return n.options.allowProjection!==!1?n.projection:PC(n.parent)}function ly(n,{forwardMotionProps:t=!1}={},e,s){e&&X5(e);const a=s0(n)?yU:gU;function l(h,d){let p;const y={...Z.useContext(Jv),...h,layoutId:AU(h)},{isStatic:v}=y,b=tU(h),w=a(h,v);if(!v&&Nv){SU();const N=wU(y);p=N.MeasureLayout,b.visualElement=EU(n,w,y,s,N.ProjectionNode)}return L.jsxs(Mm.Provider,{value:b,children:[p&&b.visualElement?L.jsx(p,{visualElement:b.visualElement,...y}):null,dU(n,h,vU(w,b.visualElement,d),w,v,t)]})}l.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const u=Z.forwardRef(l);return u[_U]=n,u}function AU({layoutId:n}){const t=Z.useContext(Dv).id;return t&&n!==void 0?t+"-"+n:n}function SU(n,t){Z.useContext(bC).strict}function wU(n){const{drag:t,layout:e}=Ul;if(!t&&!e)return{};const s={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function IU(n,t){if(typeof Proxy>"u")return ly;const e=new Map,s=(l,u)=>ly(l,u,n,t),a=(l,u)=>s(l,u);return new Proxy(a,{get:(l,u)=>u==="create"?s:(e.has(u)||e.set(u,ly(u,void 0,n,t)),e.get(u))})}function OC({top:n,left:t,right:e,bottom:s}){return{x:{min:t,max:e},y:{min:n,max:s}}}function RU({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function xU(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),s=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:s.y,right:s.x}}function uy(n){return n===void 0||n===1}function g_({scale:n,scaleX:t,scaleY:e}){return!uy(n)||!uy(t)||!uy(e)}function Pa(n){return g_(n)||kC(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function kC(n){return gS(n.x)||gS(n.y)}function gS(n){return n&&n!=="0%"}function tm(n,t,e){const s=n-e,a=t*s;return e+a}function yS(n,t,e,s,a){return a!==void 0&&(n=tm(n,a,s)),tm(n,e,s)+t}function y_(n,t=0,e=1,s,a){n.min=yS(n.min,t,e,s,a),n.max=yS(n.max,t,e,s,a)}function LC(n,{x:t,y:e}){y_(n.x,t.translate,t.scale,t.originPoint),y_(n.y,e.translate,e.scale,e.originPoint)}const _S=.999999999999,vS=1.0000000000001;function CU(n,t,e,s=!1){const a=e.length;if(!a)return;t.x=t.y=1;let l,u;for(let h=0;h<a;h++){l=e[h],u=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&pl(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,LC(n,u)),s&&Pa(l.latestValues)&&pl(n,l.latestValues))}t.x<vS&&t.x>_S&&(t.x=1),t.y<vS&&t.y>_S&&(t.y=1)}function ml(n,t){n.min=n.min+t,n.max=n.max+t}function TS(n,t,e,s,a=.5){const l=_e(n.min,n.max,a);y_(n,t,e,l,s)}function pl(n,t){TS(n.x,t.x,t.scaleX,t.scale,t.originX),TS(n.y,t.y,t.scaleY,t.scale,t.originY)}function UC(n,t){return OC(xU(n.getBoundingClientRect(),t))}function DU(n,t,e){const s=UC(n,e),{scroll:a}=t;return a&&(ml(s.x,a.offset.x),ml(s.y,a.offset.y)),s}const ES=()=>({translate:0,scale:1,origin:0,originPoint:0}),gl=()=>({x:ES(),y:ES()}),bS=()=>({min:0,max:0}),He=()=>({x:bS(),y:bS()}),__={current:null},zC={current:!1};function VU(){if(zC.current=!0,!!Nv)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>__.current=n.matches;n.addEventListener("change",t),t()}else __.current=!1}const NU=new WeakMap;function MU(n,t,e){for(const s in t){const a=t[s],l=e[s];if(dn(a))n.addValue(s,a);else if(dn(l))n.addValue(s,Ll(a,{owner:n}));else if(l!==a)if(n.hasValue(s)){const u=n.getValue(s);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=n.getStaticValue(s);n.addValue(s,Ll(u!==void 0?u:a,{owner:n}))}}for(const s in e)t[s]===void 0&&n.removeValue(s);return t}const AS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PU{scrapeMotionValuesFromProps(t,e,s){return{}}constructor({parent:t,props:e,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:l,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Yv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Vn.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,me.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=p,this.parent=t,this.props=e,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Om(e),this.isVariantNode=SC(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const b in v){const w=v[b];d[b]!==void 0&&dn(w)&&w.set(d[b])}}mount(t){var e;this.current=t,NU.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),zC.current||VU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:__.current,(e=this.parent)==null||e.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Gr(this.notifyUpdate),Gr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Ql.has(t);s&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&me.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),l&&l(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ul){const e=Ul[t];if(!e)continue;const{isEnabled:s,Feature:a}=e;if(!this.features[t]&&a&&s(this.props)&&(this.features[t]=new a(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):He()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let s=0;s<AS.length;s++){const a=AS[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,u=t[l];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=MU(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const s=this.values.get(t);e!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&e!==void 0&&(s=Ll(e===null?void 0:e,{owner:this}),this.addValue(t,s)),s}readValue(t,e){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(Dx(s)||Nx(s))?s=parseFloat(s):!F5(s)&&Kr.test(e)&&(s=mC(t,e)),this.setBaseTarget(t,dn(s)?s.get():s)),dn(s)?s.get():s}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var l;const{initial:e}=this.props;let s;if(typeof e=="string"||typeof e=="object"){const u=r0(this.props,e,(l=this.presenceContext)==null?void 0:l.custom);u&&(s=u[t])}if(e&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!dn(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Lv),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Wv.render(this.render)}}class BC extends PU{constructor(){super(...arguments),this.KeyframeResolver=D5}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:s}){delete e[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;dn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function jC(n,{style:t,vars:e},s,a){const l=n.style;let u;for(u in t)l[u]=t[u];a==null||a.applyProjectionStyles(l,s);for(u in e)l.setProperty(u,e[u])}function OU(n){return window.getComputedStyle(n)}class kU extends BC{constructor(){super(...arguments),this.type="html",this.renderInstance=jC}readValueFromInstance(t,e){var s;if(Ql.has(e))return(s=this.projection)!=null&&s.isProjecting?l_(e):XL(t,e);{const a=OU(t),l=(Kx(e)?a.getPropertyValue(e):a[e])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:e}){return UC(t,e)}build(t,e,s){n0(t,e,s.transformTemplate)}scrapeMotionValuesFromProps(t,e,s){return a0(t,e,s)}}const FC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function LU(n,t,e,s){jC(n,t,void 0,s);for(const a in t.attrs)n.setAttribute(FC.has(a)?a:o0(a),t.attrs[a])}class UU extends BC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=He}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Ql.has(e)){const s=dC(e);return s&&s.default||0}return e=FC.has(e)?e:o0(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,s){return VC(t,e,s)}build(t,e,s){RC(t,e,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,e,s,a){LU(t,e,s,a)}mount(t){this.isSVGTag=CC(t.tagName),super.mount(t)}}const zU=(n,t)=>s0(n)?new UU(t):new kU(t,{allowProjection:n!==Z.Fragment});function El(n,t,e){const s=n.getProps();return r0(s,t,e!==void 0?e:s.custom,n)}const v_=n=>Array.isArray(n);function BU(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Ll(e))}function jU(n){return v_(n)?n[n.length-1]||0:n}function FU(n,t){const e=El(n,t);let{transitionEnd:s={},transition:a={},...l}=e||{};l={...l,...s};for(const u in l){const h=jU(l[u]);BU(n,u,h)}}function qU(n){return!!(dn(n)&&n.add)}function T_(n,t){const e=n.getValue("willChange");if(qU(e))return e.add(t);if(!e&&Ls.WillChange){const s=new Ls.WillChange("auto");n.addValue("willChange",s),s.add(t)}}function qC(n){return n.props[NC]}const HU=n=>n!==null;function GU(n,{repeat:t,repeatType:e="loop"},s){const a=n.filter(HU),l=t&&e!=="loop"&&t%2===1?0:a.length-1;return a[l]}const KU={type:"spring",stiffness:500,damping:25,restSpeed:10},QU=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),YU={type:"keyframes",duration:.8},XU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$U=(n,{keyframes:t})=>t.length>2?YU:Ql.has(n)?n.startsWith("scale")?QU(t[1]):KU:XU;function WU({when:n,delay:t,delayChildren:e,staggerChildren:s,staggerDirection:a,repeat:l,repeatType:u,repeatDelay:h,from:d,elapsed:p,...y}){return!!Object.keys(y).length}const l0=(n,t,e,s={},a,l)=>u=>{const h=Xv(s,n)||{},d=h.delay||s.delay||0;let{elapsed:p=0}=s;p=p-is(d);const y={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-p,onUpdate:b=>{t.set(b),h.onUpdate&&h.onUpdate(b)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:n,motionValue:t,element:l?void 0:a};WU(h)||Object.assign(y,$U(n,y)),y.duration&&(y.duration=is(y.duration)),y.repeatDelay&&(y.repeatDelay=is(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(d_(y),y.delay===0&&(v=!0)),(Ls.instantAnimations||Ls.skipAnimations)&&(v=!0,d_(y),y.delay=0),y.allowFlatten=!h.type&&!h.ease,v&&!l&&t.get()!==void 0){const b=GU(y.keyframes,h);if(b!==void 0){me.update(()=>{y.onUpdate(b),y.onComplete()});return}}return h.isSync?new Qv(y):new _5(y)};function ZU({protectedKeys:n,needsAnimating:t},e){const s=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,s}function HC(n,t,{delay:e=0,transitionOverride:s,type:a}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:u,...h}=t;s&&(l=s);const d=[],p=a&&n.animationState&&n.animationState.getState()[a];for(const y in h){const v=n.getValue(y,n.latestValues[y]??null),b=h[y];if(b===void 0||p&&ZU(p,y))continue;const w={delay:e,...Xv(l||{},y)},N=v.get();if(N!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===N&&!w.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const Q=qC(n);if(Q){const $=window.MotionHandoffAnimation(Q,y,me);$!==null&&(w.startTime=$,k=!0)}}T_(n,y),v.start(l0(y,v,b,n.shouldReduceMotion&&cC.has(y)?{type:!1}:w,n,k));const z=v.animation;z&&d.push(z)}return u&&Promise.all(d).then(()=>{me.update(()=>{u&&FU(n,u)})}),d}function GC(n,t,e,s=0,a=1){const l=Array.from(n).sort((p,y)=>p.sortNodePosition(y)).indexOf(t),u=n.size,h=(u-1)*s;return typeof e=="function"?e(l,u):a===1?l*s:h-l*s}function E_(n,t,e={}){var d;const s=El(n,t,e.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=s||{};e.transitionOverride&&(a=e.transitionOverride);const l=s?()=>Promise.all(HC(n,s,e)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:v,staggerDirection:b}=a;return JU(n,t,p,y,v,b,e)}:()=>Promise.resolve(),{when:h}=a;if(h){const[p,y]=h==="beforeChildren"?[l,u]:[u,l];return p().then(()=>y())}else return Promise.all([l(),u(e.delay)])}function JU(n,t,e=0,s=0,a=0,l=1,u){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",t),h.push(E_(d,t,{...u,delay:e+(typeof s=="function"?0:s)+GC(n.variantChildren,d,s,a,l)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(h)}function t9(n,t,e={}){n.notify("AnimationStart",t);let s;if(Array.isArray(t)){const a=t.map(l=>E_(n,l,e));s=Promise.all(a)}else if(typeof t=="string")s=E_(n,t,e);else{const a=typeof t=="function"?El(n,t,e.custom):t;s=Promise.all(HC(n,a,e))}return s.then(()=>{n.notify("AnimationComplete",t)})}function KC(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let s=0;s<e;s++)if(t[s]!==n[s])return!1;return!0}const e9=e0.length;function QC(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?QC(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<e9;e++){const s=e0[e],a=n.props[s];(Qc(a)||a===!1)&&(t[s]=a)}return t}const n9=[...t0].reverse(),i9=t0.length;function s9(n){return t=>Promise.all(t.map(({animation:e,options:s})=>t9(n,e,s)))}function r9(n){let t=s9(n),e=SS(),s=!0;const a=d=>(p,y)=>{var b;const v=El(n,y,d==="exit"?(b=n.presenceContext)==null?void 0:b.custom:void 0);if(v){const{transition:w,transitionEnd:N,...k}=v;p={...p,...k,...N}}return p};function l(d){t=d(n)}function u(d){const{props:p}=n,y=QC(n.parent)||{},v=[],b=new Set;let w={},N=1/0;for(let z=0;z<i9;z++){const Q=n9[z],$=e[Q],G=p[Q]!==void 0?p[Q]:y[Q],st=Qc(G),rt=Q===d?$.isActive:null;rt===!1&&(N=z);let lt=G===y[Q]&&G!==p[Q]&&st;if(lt&&s&&n.manuallyAnimateOnMount&&(lt=!1),$.protectedKeys={...w},!$.isActive&&rt===null||!G&&!$.prevProp||Pm(G)||typeof G=="boolean")continue;const R=a9($.prevProp,G);let I=R||Q===d&&$.isActive&&!lt&&st||z>N&&st,C=!1;const M=Array.isArray(G)?G:[G];let V=M.reduce(a(Q),{});rt===!1&&(V={});const{prevResolvedValues:B={}}=$,x={...B,...V},jt=at=>{I=!0,b.has(at)&&(C=!0,b.delete(at)),$.needsAnimating[at]=!0;const mt=n.getValue(at);mt&&(mt.liveStyle=!1)};for(const at in x){const mt=V[at],Dt=B[at];if(w.hasOwnProperty(at))continue;let kt=!1;v_(mt)&&v_(Dt)?kt=!KC(mt,Dt):kt=mt!==Dt,kt?mt!=null?jt(at):b.add(at):mt!==void 0&&b.has(at)?jt(at):$.protectedKeys[at]=!0}$.prevProp=G,$.prevResolvedValues=V,$.isActive&&(w={...w,...V}),s&&n.blockInitialAnimation&&(I=!1);const oe=lt&&R;I&&(!oe||C)&&v.push(...M.map(at=>{const mt={type:Q};if(typeof at=="string"&&s&&!oe&&n.manuallyAnimateOnMount&&n.parent){const{parent:Dt}=n,kt=El(Dt,at);if(Dt.enteringChildren&&kt){const{delayChildren:O}=kt.transition||{};mt.delay=GC(Dt.enteringChildren,n,O)}}return{animation:at,options:mt}}))}if(b.size){const z={};if(typeof p.initial!="boolean"){const Q=El(n,Array.isArray(p.initial)?p.initial[0]:p.initial);Q&&Q.transition&&(z.transition=Q.transition)}b.forEach(Q=>{const $=n.getBaseTarget(Q),G=n.getValue(Q);G&&(G.liveStyle=!0),z[Q]=$??null}),v.push({animation:z})}let k=!!v.length;return s&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(k=!1),s=!1,k?t(v):Promise.resolve()}function h(d,p){var v;if(e[d].isActive===p)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(b=>{var w;return(w=b.animationState)==null?void 0:w.setActive(d,p)}),e[d].isActive=p;const y=u(d);for(const b in e)e[b].protectedKeys={};return y}return{animateChanges:u,setActive:h,setAnimateFunction:l,getState:()=>e,reset:()=>{e=SS()}}}function a9(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!KC(t,n):!1}function Da(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SS(){return{animate:Da(!0),whileInView:Da(),whileHover:Da(),whileTap:Da(),whileDrag:Da(),whileFocus:Da(),exit:Da()}}class Wr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class o9 extends Wr{constructor(t){super(t),t.animationState||(t.animationState=r9(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let l9=0;class u9 extends Wr{constructor(){super(...arguments),this.id=l9++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const c9={animation:{Feature:o9},exit:{Feature:u9}};function Yc(n,t,e,s={passive:!0}){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e)}function dh(n){return{point:{x:n.pageX,y:n.pageY}}}const h9=n=>t=>Zv(t)&&n(t,dh(t));function wc(n,t,e,s){return Yc(n,t,h9(e),s)}const YC=1e-4,f9=1-YC,d9=1+YC,XC=.01,m9=0-XC,p9=0+XC;function Tn(n){return n.max-n.min}function g9(n,t,e){return Math.abs(n-t)<=e}function wS(n,t,e,s=.5){n.origin=s,n.originPoint=_e(t.min,t.max,n.origin),n.scale=Tn(e)/Tn(t),n.translate=_e(e.min,e.max,n.origin)-n.originPoint,(n.scale>=f9&&n.scale<=d9||isNaN(n.scale))&&(n.scale=1),(n.translate>=m9&&n.translate<=p9||isNaN(n.translate))&&(n.translate=0)}function Ic(n,t,e,s){wS(n.x,t.x,e.x,s?s.originX:void 0),wS(n.y,t.y,e.y,s?s.originY:void 0)}function IS(n,t,e){n.min=e.min+t.min,n.max=n.min+Tn(t)}function y9(n,t,e){IS(n.x,t.x,e.x),IS(n.y,t.y,e.y)}function RS(n,t,e){n.min=t.min-e.min,n.max=n.min+Tn(t)}function em(n,t,e){RS(n.x,t.x,e.x),RS(n.y,t.y,e.y)}function ii(n){return[n("x"),n("y")]}const $C=({current:n})=>n?n.ownerDocument.defaultView:null,xS=(n,t)=>Math.abs(n-t);function _9(n,t){const e=xS(n.x,t.x),s=xS(n.y,t.y);return Math.sqrt(e**2+s**2)}class WC{constructor(t,e,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=hy(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,N=_9(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!N)return;const{point:k}=b,{timestamp:z}=sn;this.history.push({...k,timestamp:z});const{onStart:Q,onMove:$}=this.handlers;w||(Q&&Q(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),$&&$(this.lastMoveEvent,b)},this.handlePointerMove=(b,w)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=cy(w,this.transformPagePoint),me.update(this.updatePoint,!0)},this.handlePointerUp=(b,w)=>{this.end();const{onEnd:N,onSessionEnd:k,resumeAnimation:z}=this.handlers;if(this.dragSnapToOrigin&&z&&z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Q=hy(b.type==="pointercancel"?this.lastMoveEventInfo:cy(w,this.transformPagePoint),this.history);this.startEvent&&N&&N(b,Q),k&&k(b,Q)},!Zv(t))return;this.dragSnapToOrigin=l,this.handlers=e,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=a||window;const h=dh(t),d=cy(h,this.transformPagePoint),{point:p}=d,{timestamp:y}=sn;this.history=[{...p,timestamp:y}];const{onSessionStart:v}=e;v&&v(t,hy(d,this.history)),this.removeListeners=ch(wc(this.contextWindow,"pointermove",this.handlePointerMove),wc(this.contextWindow,"pointerup",this.handlePointerUp),wc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Gr(this.updatePoint)}}function cy(n,t){return t?{point:t(n.point)}:n}function CS(n,t){return{x:n.x-t.x,y:n.y-t.y}}function hy({point:n},t){return{point:n,delta:CS(n,ZC(t)),offset:CS(n,v9(t)),velocity:T9(t,.1)}}function v9(n){return n[0]}function ZC(n){return n[n.length-1]}function T9(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,s=null;const a=ZC(n);for(;e>=0&&(s=n[e],!(a.timestamp-s.timestamp>is(t)));)e--;if(!s)return{x:0,y:0};const l=ai(a.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(a.x-s.x)/l,y:(a.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function E9(n,{min:t,max:e},s){return t!==void 0&&n<t?n=s?_e(t,n,s.min):Math.max(n,t):e!==void 0&&n>e&&(n=s?_e(e,n,s.max):Math.min(n,e)),n}function DS(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function b9(n,{top:t,left:e,bottom:s,right:a}){return{x:DS(n.x,e,a),y:DS(n.y,t,s)}}function VS(n,t){let e=t.min-n.min,s=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,s]=[s,e]),{min:e,max:s}}function A9(n,t){return{x:VS(n.x,t.x),y:VS(n.y,t.y)}}function S9(n,t){let e=.5;const s=Tn(n),a=Tn(t);return a>s?e=Hc(t.min,t.max-s,n.min):s>a&&(e=Hc(n.min,n.max-a,t.min)),ks(0,1,e)}function w9(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const b_=.35;function I9(n=b_){return n===!1?n=0:n===!0&&(n=b_),{x:NS(n,"left","right"),y:NS(n,"top","bottom")}}function NS(n,t,e){return{min:MS(n,t),max:MS(n,e)}}function MS(n,t){return typeof n=="number"?n:n[t]||0}const R9=new WeakMap;class x9{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=He(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=v=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(dh(v).point)},u=(v,b)=>{const{drag:w,dragPropagation:N,onDragStart:k}=this.getProps();if(w&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=P5(w),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ii(Q=>{let $=this.getAxisMotionValue(Q).get()||0;if(ss.test($)){const{projection:G}=this.visualElement;if(G&&G.layout){const st=G.layout.layoutBox[Q];st&&($=Tn(st)*(parseFloat($)/100))}}this.originPoint[Q]=$}),k&&me.postRender(()=>k(v,b)),T_(this.visualElement,"transform");const{animationState:z}=this.visualElement;z&&z.setActive("whileDrag",!0)},h=(v,b)=>{this.latestPointerEvent=v,this.latestPanInfo=b;const{dragPropagation:w,dragDirectionLock:N,onDirectionLock:k,onDrag:z}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:Q}=b;if(N&&this.currentDirection===null){this.currentDirection=C9(Q),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",b.point,Q),this.updateAxis("y",b.point,Q),this.visualElement.render(),z&&z(v,b)},d=(v,b)=>{this.latestPointerEvent=v,this.latestPanInfo=b,this.stop(v,b),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>ii(v=>{var b;return this.getAnimationState(v)==="paused"&&((b=this.getAxisMotionValue(v).animation)==null?void 0:b.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new WC(t,{onSessionStart:l,onStart:u,onMove:h,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:s,contextWindow:$C(this.visualElement)})}stop(t,e){const s=t||this.latestPointerEvent,a=e||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!s)return;const{velocity:u}=a;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&me.postRender(()=>h(s,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,s){const{drag:a}=this.getProps();if(!s||!id(t,a,this.currentDirection))return;const l=this.getAxisMotionValue(t);let u=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(u=E9(u,this.constraints[t],this.elastic[t])),l.set(u)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:e}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,a=this.constraints;t&&dl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=b9(s.layoutBox,t):this.constraints=!1,this.elastic=I9(e),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ii(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=w9(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!dl(t))return!1;const s=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=DU(s,a.root,this.visualElement.getTransformPagePoint());let u=A9(a.layout.layoutBox,l);if(e){const h=e(RU(u));this.hasMutatedConstraints=!!h,h&&(u=OC(h))}return u}startAnimation(t){const{drag:e,dragMomentum:s,dragElastic:a,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},p=ii(y=>{if(!id(y,e,this.currentDirection))return;let v=d&&d[y]||{};u&&(v={min:0,max:0});const b=a?200:1e6,w=a?40:1e7,N={type:"inertia",velocity:s?t[y]:0,bounceStiffness:b,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...l,...v};return this.startAxisValueAnimation(y,N)});return Promise.all(p).then(h)}startAxisValueAnimation(t,e){const s=this.getAxisMotionValue(t);return T_(this.visualElement,t),s.start(l0(t,s,0,e,this.visualElement,!1))}stopAnimation(){ii(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ii(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),a=s[e];return a||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){ii(e=>{const{drag:s}=this.getProps();if(!id(e,s,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(e);if(a&&a.layout){const{min:u,max:h}=a.layout.layoutBox[e];l.set(t[e]-_e(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:s}=this.visualElement;if(!dl(e)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ii(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const d=h.get();a[u]=S9({min:d,max:d},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ii(u=>{if(!id(u,t,null))return;const h=this.getAxisMotionValue(u),{min:d,max:p}=this.constraints[u];h.set(_e(d,p,a[u]))})}addListeners(){if(!this.visualElement.current)return;R9.set(this.visualElement,this);const t=this.visualElement.current,e=wc(t,"pointerdown",d=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();dl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),me.read(s);const u=Yc(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(ii(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=d[y].translate,v.set(v.get()+d[y].translate))}),this.visualElement.render())}));return()=>{u(),e(),l(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:u=b_,dragMomentum:h=!0}=t;return{...t,drag:e,dragDirectionLock:s,dragPropagation:a,dragConstraints:l,dragElastic:u,dragMomentum:h}}}function id(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function C9(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class D9 extends Wr{constructor(t){super(t),this.removeGroupControls=li,this.removeListeners=li,this.controls=new x9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||li}unmount(){this.removeGroupControls(),this.removeListeners()}}const PS=n=>(t,e)=>{n&&me.postRender(()=>n(t,e))};class V9 extends Wr{constructor(){super(...arguments),this.removePointerDownListener=li}onPointerDown(t){this.session=new WC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$C(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:PS(t),onStart:PS(e),onMove:s,onEnd:(l,u)=>{delete this.session,a&&me.postRender(()=>a(l,u))}}}mount(){this.removePointerDownListener=wc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let fy=!1;class N9 extends Z.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:s,layoutId:a}=this.props,{projection:l}=t;l&&(e.group&&e.group.add(l),s&&s.register&&a&&s.register(l),fy&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Sd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:s,drag:a,isPresent:l}=this.props,{projection:u}=s;return u&&(u.isPresent=l,fy=!0,a||t.layoutDependency!==e||e===void 0||t.isPresent!==l?u.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?u.promote():u.relegate()||me.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Wv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:s}=this.props,{projection:a}=t;fy=!0,a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function JC(n){const[t,e]=EC(),s=Z.useContext(Dv);return L.jsx(N9,{...n,layoutGroup:s,switchLayoutGroup:Z.useContext(MC),isPresent:t,safeToRemove:e})}function M9(n,t,e){const s=dn(n)?n:Ll(n);return s.start(l0("",s,t,e)),s.animation}const P9=(n,t)=>n.depth-t.depth;class O9{constructor(){this.children=[],this.isDirty=!1}add(t){Mv(this.children,t),this.isDirty=!0}remove(t){Pv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(P9),this.isDirty=!1,this.children.forEach(t)}}function k9(n,t){const e=Vn.now(),s=({timestamp:a})=>{const l=a-e;l>=t&&(Gr(s),n(l-t))};return me.setup(s,!0),()=>Gr(s)}const t2=["TopLeft","TopRight","BottomLeft","BottomRight"],L9=t2.length,OS=n=>typeof n=="string"?parseFloat(n):n,kS=n=>typeof n=="number"||bt.test(n);function U9(n,t,e,s,a,l){a?(n.opacity=_e(0,e.opacity??1,z9(s)),n.opacityExit=_e(t.opacity??1,0,B9(s))):l&&(n.opacity=_e(t.opacity??1,e.opacity??1,s));for(let u=0;u<L9;u++){const h=`border${t2[u]}Radius`;let d=LS(t,h),p=LS(e,h);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||kS(d)===kS(p)?(n[h]=Math.max(_e(OS(d),OS(p),s),0),(ss.test(p)||ss.test(d))&&(n[h]+="%")):n[h]=p}(t.rotate||e.rotate)&&(n.rotate=_e(t.rotate||0,e.rotate||0,s))}function LS(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const z9=e2(0,.5,Bx),B9=e2(.5,.95,li);function e2(n,t,e){return s=>s<n?0:s>t?1:e(Hc(n,t,s))}function US(n,t){n.min=t.min,n.max=t.max}function Ei(n,t){US(n.x,t.x),US(n.y,t.y)}function zS(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function BS(n,t,e,s,a){return n-=t,n=tm(n,1/e,s),a!==void 0&&(n=tm(n,1/a,s)),n}function j9(n,t=0,e=1,s=.5,a,l=n,u=n){if(ss.test(t)&&(t=parseFloat(t),t=_e(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=_e(l.min,l.max,s);n===l&&(h-=t),n.min=BS(n.min,t,e,h,a),n.max=BS(n.max,t,e,h,a)}function jS(n,t,[e,s,a],l,u){j9(n,t[e],t[s],t[a],t.scale,l,u)}const F9=["x","scaleX","originX"],q9=["y","scaleY","originY"];function FS(n,t,e,s){jS(n.x,t,F9,e?e.x:void 0,s?s.x:void 0),jS(n.y,t,q9,e?e.y:void 0,s?s.y:void 0)}function qS(n){return n.translate===0&&n.scale===1}function n2(n){return qS(n.x)&&qS(n.y)}function HS(n,t){return n.min===t.min&&n.max===t.max}function H9(n,t){return HS(n.x,t.x)&&HS(n.y,t.y)}function GS(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function i2(n,t){return GS(n.x,t.x)&&GS(n.y,t.y)}function KS(n){return Tn(n.x)/Tn(n.y)}function QS(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class G9{constructor(){this.members=[]}add(t){Mv(this.members,t),t.scheduleRender()}remove(t){if(Pv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let s;for(let a=e;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(t,e){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,e&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:s}=t;e.onExitComplete&&e.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function K9(n,t,e){let s="";const a=n.x.translate/t.x,l=n.y.translate/t.y,u=(e==null?void 0:e.z)||0;if((a||l||u)&&(s=`translate3d(${a}px, ${l}px, ${u}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:p,rotate:y,rotateX:v,rotateY:b,skewX:w,skewY:N}=e;p&&(s=`perspective(${p}px) ${s}`),y&&(s+=`rotate(${y}deg) `),v&&(s+=`rotateX(${v}deg) `),b&&(s+=`rotateY(${b}deg) `),w&&(s+=`skewX(${w}deg) `),N&&(s+=`skewY(${N}deg) `)}const h=n.x.scale*t.x,d=n.y.scale*t.y;return(h!==1||d!==1)&&(s+=`scale(${h}, ${d})`),s||"none"}const dy=["","X","Y","Z"],Q9=1e3;let Y9=0;function my(n,t,e,s){const{latestValues:a}=t;a[n]&&(e[n]=a[n],t.setStaticValue(n,0),s&&(s[n]=0))}function s2(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=qC(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",me,!(a||l))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&s2(s)}function r2({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(u={},h=t==null?void 0:t()){this.id=Y9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(W9),this.nodes.forEach(ez),this.nodes.forEach(nz),this.nodes.forEach(Z9)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new O9)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Lv),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const d=this.eventHandlers.get(u);d&&d.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=TC(u)&&!B5(u),this.instance=u;const{layoutId:h,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let y,v=0;const b=()=>this.root.updateBlockedByResize=!1;me.read(()=>{v=window.innerWidth}),n(u,()=>{const w=window.innerWidth;w!==v&&(v=w,this.root.updateBlockedByResize=!0,y&&y(),y=k9(b,250),Sd.hasAnimatedSinceResize&&(Sd.hasAnimatedSinceResize=!1,this.nodes.forEach($S)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||d)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v,hasRelativeLayoutChanged:b,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||oz,{onLayoutAnimationStart:k,onLayoutAnimationComplete:z}=p.getProps(),Q=!this.targetLayout||!i2(this.targetLayout,w),$=!v&&b;if(this.options.layoutRoot||this.resumeFrom||$||v&&(Q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const G={...Xv(N,"layout"),onPlay:k,onComplete:z};(p.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G),this.setAnimationOrigin(y,$)}else v||$S(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iz),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&s2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(XS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(tz),this.nodes.forEach(X9),this.nodes.forEach($9)):this.nodes.forEach(XS),this.clearAllSnapshots();const h=Vn.now();sn.delta=ks(0,1e3/60,h-sn.timestamp),sn.timestamp=h,sn.isProcessing=!0,ny.update.process(sn),ny.preRender.process(sn),ny.render.process(sn),sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Wv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(J9),this.sharedNodes.forEach(sz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Tn(this.snapshot.measuredBox.x)&&!Tn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=He(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!n2(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;u&&this.instance&&(h||Pa(this.latestValues)||y)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return u&&(d=this.removeTransform(d)),lz(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:u}=this.options;if(!u)return He();const h=u.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(uz))){const{scroll:y}=this.root;y&&(ml(h.x,y.offset.x),ml(h.y,y.offset.y))}return h}removeElementScroll(u){var d;const h=He();if(Ei(h,u),(d=this.scroll)!=null&&d.wasRoot)return h;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:v,options:b}=y;y!==this.root&&v&&b.layoutScroll&&(v.wasRoot&&Ei(h,u),ml(h.x,v.offset.x),ml(h.y,v.offset.y))}return h}applyTransform(u,h=!1){const d=He();Ei(d,u);for(let p=0;p<this.path.length;p++){const y=this.path[p];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&pl(d,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Pa(y.latestValues)&&pl(d,y.latestValues)}return Pa(this.latestValues)&&pl(d,this.latestValues),d}removeTransform(u){const h=He();Ei(h,u);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!Pa(p.latestValues))continue;g_(p.latestValues)&&p.updateSnapshot();const y=He(),v=p.measurePageBox();Ei(y,v),FS(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return Pa(this.latestValues)&&FS(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var w;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:v}=this.options;if(!this.layout||!(y||v))return;this.resolvedRelativeTargetAt=sn.timestamp;const b=this.getClosestProjectingParent();b&&this.linkedParentVersion!==b.layoutVersion&&!b.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(b&&b.layout?this.createRelativeTarget(b,this.layout.layoutBox,b.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=He(),this.targetWithTransforms=He()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),y9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ei(this.target,this.layout.layoutBox),LC(this.target,this.targetDelta)):Ei(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?this.createRelativeTarget(b,this.target,b.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||g_(this.parent.latestValues)||kC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,h,d){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),em(this.relativeTargetOrigin,h,d),Ei(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var N;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===sn.timestamp&&(d=!1),d)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;Ei(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;CU(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=He());const{target:w}=u;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zS(this.prevProjectionDelta.x,this.projectionDelta.x),zS(this.prevProjectionDelta.y,this.projectionDelta.y)),Ic(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==b||!QS(this.projectionDelta.x,this.prevProjectionDelta.x)||!QS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=gl(),this.projectionDelta=gl(),this.projectionDeltaWithTransform=gl()}setAnimationOrigin(u,h=!1){const d=this.snapshot,p=d?d.latestValues:{},y={...this.latestValues},v=gl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const b=He(),w=d?d.source:void 0,N=this.layout?this.layout.source:void 0,k=w!==N,z=this.getStack(),Q=!z||z.members.length<=1,$=!!(k&&!Q&&this.options.crossfade===!0&&!this.path.some(az));this.animationProgress=0;let G;this.mixTargetDelta=st=>{const rt=st/1e3;WS(v.x,u.x,rt),WS(v.y,u.y,rt),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(em(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rz(this.relativeTarget,this.relativeTargetOrigin,b,rt),G&&H9(this.relativeTarget,G)&&(this.isProjectionDirty=!1),G||(G=He()),Ei(G,this.relativeTarget)),k&&(this.animationValues=y,U9(y,p,this.latestValues,rt,$,Q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=rt},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var h,d,p;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(p=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||p.stop(),this.pendingAnimation&&(Gr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.update(()=>{Sd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ll(0)),this.currentAnimation=M9(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),u.onUpdate&&u.onUpdate(y)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Q9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:d,layout:p,latestValues:y}=u;if(!(!h||!d||!p)){if(this!==u&&this.layout&&p&&a2(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||He();const v=Tn(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+v;const b=Tn(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+b}Ei(h,d),pl(h,y),Ic(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new G9),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const p={};d.z&&my("z",u,p,this.animationValues);for(let y=0;y<dy.length;y++)my(`rotate${dy[y]}`,u,p,this.animationValues),my(`skew${dy[y]}`,u,p,this.animationValues);u.render();for(const y in p)u.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Ad(h==null?void 0:h.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Ad(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Pa(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const y=p.animationValues||p.latestValues;this.applyTransformsToTarget();let v=K9(this.projectionDeltaWithTransform,this.treeScale,y);d&&(v=d(y,v)),u.transform=v;const{x:b,y:w}=this.projectionDelta;u.transformOrigin=`${b.origin*100}% ${w.origin*100}% 0`,p.animationValues?u.opacity=p===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:u.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const N in p_){if(y[N]===void 0)continue;const{correct:k,applyTo:z,isCSSVariable:Q}=p_[N],$=v==="none"?y[N]:k(y[N],p);if(z){const G=z.length;for(let st=0;st<G;st++)u[z[st]]=$}else Q?this.options.visualElement.renderState.vars[N]=$:u[N]=$}this.options.layoutId&&(u.pointerEvents=p===this?Ad(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(YS),this.root.sharedNodes.clear()}}}function X9(n){n.updateLayout()}function $9(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=n.layout,{animationType:l}=n.options,u=t.source!==n.layout.source;l==="size"?ii(v=>{const b=u?t.measuredBox[v]:t.layoutBox[v],w=Tn(b);b.min=s[v].min,b.max=b.min+w}):a2(l,t.layoutBox,s)&&ii(v=>{const b=u?t.measuredBox[v]:t.layoutBox[v],w=Tn(s[v]);b.max=b.min+w,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+w)});const h=gl();Ic(h,s,t.layoutBox);const d=gl();u?Ic(d,n.applyTransform(a,!0),t.measuredBox):Ic(d,s,t.layoutBox);const p=!n2(h);let y=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:b,layout:w}=v;if(b&&w){const N=He();em(N,t.layoutBox,b.layoutBox);const k=He();em(k,s,w.layoutBox),i2(N,k)||(y=!0),v.options.layoutRoot&&(n.relativeTarget=k,n.relativeTargetOrigin=N,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:d,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function W9(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Z9(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function J9(n){n.clearSnapshot()}function YS(n){n.clearMeasurements()}function XS(n){n.isLayoutDirty=!1}function tz(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function $S(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function ez(n){n.resolveTargetDelta()}function nz(n){n.calcProjection()}function iz(n){n.resetSkewAndRotation()}function sz(n){n.removeLeadSnapshot()}function WS(n,t,e){n.translate=_e(t.translate,0,e),n.scale=_e(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function ZS(n,t,e,s){n.min=_e(t.min,e.min,s),n.max=_e(t.max,e.max,s)}function rz(n,t,e,s){ZS(n.x,t.x,e.x,s),ZS(n.y,t.y,e.y,s)}function az(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const oz={duration:.45,ease:[.4,0,.1,1]},JS=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),tw=JS("applewebkit/")&&!JS("chrome/")?Math.round:li;function ew(n){n.min=tw(n.min),n.max=tw(n.max)}function lz(n){ew(n.x),ew(n.y)}function a2(n,t,e){return n==="position"||n==="preserve-aspect"&&!g9(KS(t),KS(e),.2)}function uz(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const cz=r2({attachResizeListener:(n,t)=>Yc(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),py={current:void 0},o2=r2({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!py.current){const n=new cz({});n.mount(window),n.setOptions({layoutScroll:!0}),py.current=n}return py.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),hz={pan:{Feature:V9},drag:{Feature:D9,ProjectionNode:o2,MeasureLayout:JC}};function nw(n,t,e){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,l=s[a];l&&me.postRender(()=>l(t,dh(t)))}class fz extends Wr{mount(){const{current:t}=this.node;t&&(this.unmount=O5(t,(e,s)=>(nw(this.node,s,"Start"),a=>nw(this.node,a,"End"))))}unmount(){}}class dz extends Wr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ch(Yc(this.node.current,"focus",()=>this.onFocus()),Yc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function iw(n,t,e){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),l=s[a];l&&me.postRender(()=>l(t,dh(t)))}class mz extends Wr{mount(){const{current:t}=this.node;t&&(this.unmount=z5(t,(e,s)=>(iw(this.node,s,"Start"),(a,{success:l})=>iw(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const A_=new WeakMap,gy=new WeakMap,pz=n=>{const t=A_.get(n.target);t&&t(n)},gz=n=>{n.forEach(pz)};function yz({root:n,...t}){const e=n||document;gy.has(e)||gy.set(e,{});const s=gy.get(e),a=JSON.stringify(t);return s[a]||(s[a]=new IntersectionObserver(gz,{root:n,...t})),s[a]}function _z(n,t,e){const s=yz(t);return A_.set(n,e),s.observe(n),()=>{A_.delete(n),s.unobserve(n)}}const vz={some:0,all:1};class Tz extends Wr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:s,amount:a="some",once:l}=t,u={root:e?e.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:vz[a]},h=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),b=p?y:v;b&&b(d)};return _z(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(Ez(t,e))&&this.startObserver()}unmount(){}}function Ez({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const bz={inView:{Feature:Tz},tap:{Feature:mz},focus:{Feature:dz},hover:{Feature:fz}},Az={layout:{ProjectionNode:o2,MeasureLayout:JC}},Sz={...c9,...bz,...hz,...Az},sw=IU(Sz,zU),wz=()=>{const{isLoading:n,ingredients:t,recipes:e,addIngredient:s,updateIngredient:a,deleteIngredient:l}=y6(),[u,h]=Z.useState(null),[d,p]=Z.useState(!1),[y,v]=Z.useState(!1),[b,w]=Z.useState(null),[N,k]=Z.useState(!1),z=Z.useMemo(()=>Array.from(t.values()),[t]),Q=Z.useMemo(()=>Array.from(e.values()),[e]),$=Z.useMemo(()=>!n&&(z.length>0||Q.length>0),[n,z.length,Q.length]),G=Z.useMemo(()=>u&&e.get(u)||null,[u,e]),st=Z.useCallback(()=>{w(null),v(!0)},[]),rt=Z.useCallback(x=>{w(x),v(!0)},[]),lt=Z.useCallback(async x=>{try{if(k(!0),b)await a({...b,...x,id:b.id}),ge.success("Ingrediente actualizado correctamente");else{const jt={name:x.name,pricePerUnit:x.pricePerUnit,unit:x.unit,...x.category&&{category:x.category}};await s(jt),ge.success("Ingrediente agregado correctamente")}v(!1)}catch(jt){console.error("Error al guardar el ingrediente:",jt),ge.error("Error al guardar el ingrediente")}finally{k(!1)}},[b,s,a]),R=Z.useCallback(async x=>{if(window.confirm("Ests seguro de eliminar este ingrediente?"))try{await l(x),ge.success("Ingrediente eliminado correctamente")}catch(jt){console.error("Error al eliminar el ingrediente:",jt),ge.error("Error al eliminar el ingrediente")}},[l]),I=()=>{console.log("Agregar receta")},C=x=>{console.log("Editar receta:",x)},M=x=>{console.log("Eliminar receta:",x)},V=Z.useCallback(x=>x!=null&&x.items?x.items.reduce((jt,oe)=>{const W=t.get(oe.ingredientId);return jt+((W==null?void 0:W.pricePerUnit)||0)*(oe.quantity||0)},0):0,[t]),B=Z.useCallback(x=>!(x!=null&&x.portions)||x.portions<=0?0:V(x)/x.portions,[V]);return n?L.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:L.jsx("div",{className:"text-center space-y-4",children:L.jsxs("div",{className:"animate-pulse flex space-x-4 items-center",children:[L.jsx(F1,{className:"h-12 w-12 text-blue-500 animate-bounce"}),L.jsxs("div",{children:[L.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),L.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]})})}):$?L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[L.jsx(K3,{position:"top-center"}),L.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-20",children:L.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:L.jsxs("div",{className:"flex justify-between items-center h-16",children:[L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsx(D6,{className:"h-8 w-8 text-blue-600"}),L.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Pastry Cost Pro"})]}),L.jsx("div",{className:"lg:hidden",children:L.jsx("button",{onClick:()=>p(!d),className:"p-2 rounded-md text-gray-700 hover:bg-gray-100",children:L.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d?L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})})}),L.jsx("main",{className:"py-6 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:L.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[L.jsx(hS,{children:(d||window.innerWidth>=1024)&&L.jsx(sw.div,{className:"lg:col-span-3 space-y-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:L.jsxs("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:[L.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[L.jsx(z6,{className:"h-5 w-5 mr-2 text-blue-500"}),"Ingredientes"]}),L.jsx("button",{onClick:st,className:"p-1.5 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",children:L.jsx(bc,{className:"h-4 w-4"})})]})}),L.jsx(W6,{ingredients:z,onEdit:rt,onDelete:R})]})})}),L.jsxs("div",{className:"lg:col-span-9 space-y-6",children:[L.jsxs("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:[L.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[L.jsx(Y6,{className:"h-5 w-5 mr-2 text-blue-500"}),"Recetas"]}),L.jsxs("button",{onClick:I,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[L.jsx(bc,{className:"h-4 w-4 mr-1"}),"Nueva"]})]})}),L.jsx(Z6,{recipes:Q,onSelect:h,onEdit:C,onDelete:M,calculateCost:V})]}),L.jsx(hS,{children:G&&L.jsxs(sw.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow overflow-hidden",children:[L.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsxs("button",{onClick:()=>h(null),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[L.jsx(x6,{className:"h-4 w-4 mr-1"}),"Volver"]}),L.jsxs("div",{className:"flex space-x-2",children:[L.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[L.jsx(Yd,{className:"h-3 w-3 mr-1"}),"Costo total: $",V(G).toFixed(2)]}),L.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[L.jsx(Yd,{className:"h-3 w-3 mr-1"}),"Por porcin: $",B(G).toFixed(2)]})]})]})}),L.jsx(J6,{recipe:G,ingredients:z,calculateCost:V})]})})]})]})}),L.jsx("footer",{className:"bg-white border-t border-gray-200 mt-12",children:L.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:L.jsxs("p",{className:"text-center text-sm text-gray-500",children:[" ",new Date().getFullYear()," Pastry Cost Pro. Herramienta profesional para pastelera."]})})}),L.jsx(s3,{isOpen:y,onClose:()=>{v(!1),w(null)},onSave:lt,ingredient:b,isSubmitting:N})]}):L.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:L.jsxs("div",{className:"text-center p-8 max-w-md",children:[L.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4",children:L.jsx(F1,{className:"h-8 w-8 text-blue-600"})}),L.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay datos disponibles"}),L.jsx("p",{className:"text-gray-500 mb-6",children:"Comienza agregando tu primer ingrediente para empezar."}),L.jsxs("button",{onClick:st,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[L.jsx(bc,{className:"h-4 w-4 mr-2"}),"Agregar Ingrediente"]})]})})},Iz=Z.createContext({user:null,loading:!0}),Rz=({children:n})=>{const[t,e]=Z.useState(null),[s,a]=Z.useState(!0);return Z.useEffect(()=>{const l=ik(B1,async u=>{if(u)e(u);else try{const h=await W4(B1);e(h.user)}catch(h){console.error("Error al iniciar sesin annimamente:",h)}a(!1)});return()=>l()},[]),L.jsx(Iz.Provider,{value:{user:t,loading:s},children:!s&&n})},l2=document.getElementById("root");if(!l2)throw new Error("No se pudo encontrar el elemento raz");const xz=$D.createRoot(l2);xz.render(L.jsx(FD.StrictMode,{children:L.jsx(Rz,{children:L.jsx(wz,{})})}));
